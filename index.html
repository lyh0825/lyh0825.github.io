<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Drink`s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Drink&#96;s Blog">
<meta property="og:url" content="https://drinkle.top/index.html">
<meta property="og:site_name" content="Drink&#96;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Drink">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Drink`s Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Drink`s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://drinkle.top"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-流畅的python" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/06/%E6%B5%81%E7%95%85%E7%9A%84python/" class="article-date">
  <time class="dt-published" datetime="2022-02-06T10:02:01.000Z" itemprop="datePublished">2022-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/02/06/%E6%B5%81%E7%95%85%E7%9A%84python/">流畅的python</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Part0-BulitIn"><a href="#Part0-BulitIn" class="headerlink" title="Part0.BulitIn"></a>Part0.BulitIn</h1><h2 id="小知识"><a href="#小知识" class="headerlink" title="小知识"></a>小知识</h2><h3 id="format"><a href="#format" class="headerlink" title="format"></a>format</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#123;&#125; format</span></span><br><span class="line"><span class="comment"># &#123;0&#125; format the index</span></span><br><span class="line"><span class="comment"># &#123;0:2d&#125; format the type --&gt; d int 2d: remain two int</span></span><br><span class="line"><span class="comment"># &#123;&lt;2d&#125; 左对齐，宽度为2d，不足补空格</span></span><br><span class="line">ROW_FMT = <span class="string">&quot;&#123;0:2d&#125;  @ &#123;1:2d&#125;   &#123;2&#125; &#123;0:&lt;2d&#125;&quot;</span></span><br><span class="line">print(ROW_FMT.<span class="built_in">format</span>(needle, posotion, offset))</span><br></pre></td></tr></table></figure>

<h2 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h2><h3 id="函数-方法返回"><a href="#函数-方法返回" class="headerlink" title="函数|方法返回"></a>函数|方法返回</h3><p>python 会对operation返回return None来表示对对象的就地更改, 即不会id(obj)不会变</p>
<ul>
<li>用返回None来表示就地改动有一个弊端, 即调用者无法将其串联起来; 而返回一个新对象的方法(比如说str里的所有方法)则正好相反, 他们可以串联起来调用</li>
</ul>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><p>sort分为两种， 一种是value sort即根据值进行排序， 另一种是time sort即就算两个元素比不出大小， 但在每次排序的结果里他们的相对位置是固定的</p>
<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><h3 id="1-python中list和array的区别"><a href="#1-python中list和array的区别" class="headerlink" title="1.python中list和array的区别"></a>1.python中list和array的区别</h3><ul>
<li>list是python的内置数据类型</li>
<li>list中的数据类不必相同的</li>
<li>array的中的类型必须全部相同</li>
<li>在list中的数据类型保存的是数据存放的地址，简单的说就是指针，并非数据</li>
<li>这种保存方式增加了存储和CPU的消耗例如list1=[1,2,3,’a’]需要4个指针和四个数据</li>
</ul>
<h2 id="Magic-Method"><a href="#Magic-Method" class="headerlink" title="Magic Method"></a>Magic Method</h2><p><strong>表1:跟运算符无关的 magic method</strong></p>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法名</th>
</tr>
</thead>
<tbody><tr>
<td align="center">字符串/字节序列表示形式</td>
<td align="center">repr str format bytes</td>
</tr>
<tr>
<td align="center">数值转换</td>
<td align="center">abs bool complex int float hash index</td>
</tr>
<tr>
<td align="center">集合模拟</td>
<td align="center">len getitem setitem delitem contains</td>
</tr>
<tr>
<td align="center">迭代枚举</td>
<td align="center">iter reversed next</td>
</tr>
<tr>
<td align="center">可调用模拟</td>
<td align="center">call</td>
</tr>
<tr>
<td align="center">上下文管理</td>
<td align="center">enter exit</td>
</tr>
<tr>
<td align="center">实例创建/销毁</td>
<td align="center">new init del</td>
</tr>
<tr>
<td align="center">属性管理</td>
<td align="center">getattr getattribute setattr delattr dir</td>
</tr>
<tr>
<td align="center">属性描述符</td>
<td align="center">get set delete</td>
</tr>
<tr>
<td align="center">跟类有关的服务</td>
<td align="center">prepare instancecheck subclasscheck</td>
</tr>
</tbody></table>
<p><strong>表2:跟运算符相关的 magic method</strong></p>
<table>
<thead>
<tr>
<th align="center">类别</th>
<th align="center">方法名和对应的运算符</th>
</tr>
</thead>
<tbody><tr>
<td align="center">一元运算符</td>
<td align="center">neg - pos + abs abs()</td>
</tr>
<tr>
<td align="center">众多比较运算符</td>
<td align="center">lt &lt; le &lt;= eq == ne != gt &gt; ge &gt;=</td>
</tr>
<tr>
<td align="center">算术运算符</td>
<td align="center">add + sub - mul * truediv / floordiv // mod % divmod divmod() pow **|pow() round round()</td>
</tr>
<tr>
<td align="center">反向算术运算符</td>
<td align="center">radd rsub rmul rturediv rfloordiv rmod rdivmod  rpow</td>
</tr>
<tr>
<td align="center">增量赋值算术运算符</td>
<td align="center">iadd isub imul itruediv ifloordic imod ipow</td>
</tr>
<tr>
<td align="center">位运算符</td>
<td align="center">invert ~ lshift &lt;&lt; rshift &gt;&gt; and &amp; or | xor ^</td>
</tr>
<tr>
<td align="center">反向位运算符</td>
<td align="center">rlshift rrshift rand rxor ror</td>
</tr>
<tr>
<td align="center">增量赋值位运算符</td>
<td align="center">ilshift irshift iand ixor ior</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注: 以下所有的keyword默认为 self.__xx__():</span><br></pre></td></tr></table></figure>

<h3 id="bool-len"><a href="#bool-len" class="headerlink" title="bool|len"></a>bool|len</h3><p>默认情况下我们定义的类的实例总是被认为<code>True</code>,除非在<code>define class</code>中有实现<code>bool或者len</code></p>
<p><code>bool()</code>的背后其实是调用<code>x.__bool__()</code>的结果;如果<code>x.__bool__()</code>不存在, 则调用<code>len()</code>即<code>x.__len__()</code>,如果为<code>0-False other-True</code></p>
<p>调用优先级为<code>bool &gt; len</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define a class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">temp</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.value = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    !<span class="function"><span class="keyword">def</span> <span class="title">__bool__</span>(<span class="params">self</span>):</span></span><br><span class="line">    !   <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">&gt;</span><br><span class="line"><span class="built_in">bool</span>(temp) <span class="literal">False</span></span><br><span class="line">? bool(temp) True</span><br></pre></td></tr></table></figure>



<h3 id="and-mul"><a href="#and-mul" class="headerlink" title="and|mul"></a>and|mul</h3><p><code>and --&gt; +  add</code></p>
<p><code>mul --&gt; *  multiple</code></p>
<h3 id="str-repr"><a href="#str-repr" class="headerlink" title="str|repr"></a>str|repr</h3><p>两者的却别在于<code>str will called by str() and print(), repr can only called by print()</code></p>
<p>如果两者特殊方法保留一个<code>repr</code>会是更好的选择, 因为在没有<code>str</code>时, 解释器会调用<code>repr</code></p>
<p>优先级<code>str &gt; repr </code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define a class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">temp</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.value = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;repr value is <span class="subst">&#123;self.value&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;str value is <span class="subst">&#123;self.value&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">test = temp()</span><br><span class="line">print(test)</span><br><span class="line"></span><br><span class="line">H:\Python\python.exe H:/MY_TXM/test.py</span><br><span class="line"><span class="built_in">str</span> value <span class="keyword">is</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="Moudle"><a href="#Moudle" class="headerlink" title="Moudle"></a>Moudle</h2><h3 id="bisect"><a href="#bisect" class="headerlink" title="bisect"></a>bisect</h3><p>bisect是一个根据二分算法写的库，其中主要的俩个方法是bisect和insert，根本上根据二分算法算出有序序列的索引，可以当做快速定位index使用</p>
<h4 id="bisect-bisect-left"><a href="#bisect-bisect-left" class="headerlink" title="bisect|bisect_left"></a>bisect|bisect_left</h4><p>接受一个有序序列，一个元素，返回该元素在有序序列的索引，索引以前全≤该元素，<code>bisect(bisect_right)|bisect_left</code>主要区别是如果俩对比元素相等，前者返回index是从右边插入，后者左边</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line">temp_sequence = [<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">index = bisect.bisect(temp_sequence, <span class="number">2</span>)</span><br><span class="line">_index = bisect.bisect_left(temp_sequence, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">print(index)</span><br><span class="line">print(_index)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h4 id="insort"><a href="#insort" class="headerlink" title="insort"></a>insort</h4><p>根据bisect或者bisect_left返回的index进行插入，接受有序序列，返回有序序列</p>
<h3 id="itertools"><a href="#itertools" class="headerlink" title="itertools"></a>itertools</h3><h4 id="groupby"><a href="#groupby" class="headerlink" title="groupby"></a>groupby</h4><p>和<code>nlargest() nsmallest()</code>一样支持<code>key=</code></p>
<p>【聚合】</p>
<p>有时候我们需要给一个<code>sequence</code>按照某个属性分组，可以借助groupby来实现,groupby常常和<code>lambda map operator.itemgetter</code>一起使用，因为在分组前，大多希望相关的数据聚集在一起， 这样对于groupby来说分组才有意义</p>
<p>语法：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groupby(seqence, key)</span><br><span class="line">args:</span><br><span class="line">    sequence must iterable</span><br><span class="line">    key sort the sequence 聚合</span><br><span class="line">return iterator contains key, data --&gt; type tuple</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>如果groupby中的key=None，那么group后的key是被group中的element， 如果key=fun那么group后的key是fun(element)</li>
<li>返回的数据<ul>
<li>type(key) type(element) </li>
<li>type(data) iterator</li>
</ul>
</li>
</ol>
<p>实列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">a = [&#123;<span class="string">&#x27;severity&#x27;</span>: <span class="string">&#x27;严重&#x27;</span>&#125;, &#123;<span class="string">&#x27;severity&#x27;</span>: <span class="string">&#x27;严重&#x27;</span>&#125;, &#123;<span class="string">&#x27;severity&#x27;</span>: <span class="string">&#x27;不严重&#x27;</span>&#125;, &#123;<span class="string">&#x27;severity&#x27;</span>: <span class="string">&#x27;严重&#x27;</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果不将数据进行排序直接group</span></span><br><span class="line"><span class="keyword">for</span> key, data <span class="keyword">in</span> groupby(a):</span><br><span class="line">    print(key, <span class="built_in">list</span>(data))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将会输出三组key</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125; [&#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;, &#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;]</span></span><br><span class="line"><span class="string">&#123;&#x27;severity&#x27;: &#x27;不严重&#x27;&#125; [&#123;&#x27;severity&#x27;: &#x27;不严重&#x27;&#125;]</span></span><br><span class="line"><span class="string">&#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125; [&#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对数据进行聚合(排序)但不对group的key进行筛选</span></span><br><span class="line">a.sort(key=itemgetter(<span class="string">&quot;severity&quot;</span>))</span><br><span class="line"><span class="keyword">for</span> key, data <span class="keyword">in</span> groupby(a):</span><br><span class="line">    print(key, <span class="built_in">list</span>(data))</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 此时的key时a中的单个element</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&#123;&#x27;severity&#x27;: &#x27;不严重&#x27;&#125; [&#123;&#x27;severity&#x27;: &#x27;不严重&#x27;&#125;]</span></span><br><span class="line"><span class="string">&#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125; [&#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;, &#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;, &#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对数据进行聚合(排序)且对group的key进行筛选</span></span><br><span class="line">a.sort(key=itemgetter(<span class="string">&quot;severity&quot;</span>))</span><br><span class="line"><span class="keyword">for</span> key, data <span class="keyword">in</span> groupby(a, key=itemgetter(<span class="string">&quot;severity&quot;</span>)):</span><br><span class="line">    print(key, <span class="built_in">list</span>(data))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时的group返回的key是经过滤后的key</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">不严重 [&#123;&#x27;severity&#x27;: &#x27;不严重&#x27;&#125;]</span></span><br><span class="line"><span class="string">严重 [&#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;, &#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;, &#123;&#x27;severity&#x27;: &#x27;严重&#x27;&#125;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="operator"><a href="#operator" class="headerlink" title="operator"></a>operator</h3><h4 id="itemgetter"><a href="#itemgetter" class="headerlink" title="itemgetter"></a>itemgetter</h4><p>operator模块提供的itemgetter函数主要用于获取某一对象 <strong>特定维度的数据，</strong>其中的参数为特定维度的索引</p>
<p>operator.itemgetter函数获取的并不是某一个数值，而是<strong>某一个函数</strong>常常可以使用<code>lambda </code>函数替换</p>
<p>用法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">itemgetter(var)</span><br><span class="line">args:</span><br><span class="line">    var can accept index <span class="keyword">and</span> key</span><br><span class="line"><span class="keyword">return</span> fun()</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import operator</span><br><span class="line"></span><br><span class="line">a = [&#123;&quot;age&quot;: 10, &quot;socre&quot;: 90&#125;, &#123;&quot;age&quot;: 9, &quot;socre&quot;: 98&#125;, &#123;&quot;age&quot;: 0, &quot;socre&quot;: 50&#125;, &#123;&quot;age&quot;: 15, &quot;socre&quot;: 56&#125;]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 定义一个获取维度数据的函数</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取sequence的index=0&amp;1的数据</span></span><br><span class="line">condition = operator.itemgetter(0, 1)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将sequence传入获取函数中</span></span><br><span class="line">res = condition(a)</span><br><span class="line">print(res, type(a))</span><br><span class="line">(&#123;&#x27;age&#x27;: 10, &#x27;socre&#x27;: 90&#125;, &#123;&#x27;age&#x27;: 9, &#x27;socre&#x27;: 98&#125;) &lt;class &#x27;tuple&#x27;&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 对a的age进行排序</span></span><br><span class="line">a.sort(key=itemgetter(&quot;age&quot;))</span><br><span class="line">a.sort(key=lambda x: x[&quot;socre&quot;], reverse=True)</span><br><span class="line">print(a)</span><br><span class="line">[&#123;&#x27;age&#x27;: 0, &#x27;socre&#x27;: 50&#125;, &#123;&#x27;age&#x27;: 9, &#x27;socre&#x27;: 98&#125;, &#123;&#x27;age&#x27;: 10, &#x27;socre&#x27;: 90&#125;, &#123;&#x27;age&#x27;: 15, &#x27;socre&#x27;: 56&#125;]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 先对age排序在对score排序</span></span><br><span class="line">a.sort(key=itemgetter(&quot;age&quot;, &quot;socre&quot;), reverse=True)</span><br></pre></td></tr></table></figure>

<h3 id="headq"><a href="#headq" class="headerlink" title="headq"></a>headq</h3><h4 id="nlargest"><a href="#nlargest" class="headerlink" title="nlargest"></a>nlargest</h4><h4 id="nsmallest"><a href="#nsmallest" class="headerlink" title="nsmallest"></a>nsmallest</h4><p>和<code>groupby()</code>一样支持<code>key=</code></p>
<p> 介绍：</p>
<p>这两个函数可以帮助我们在某个集合中找出最大或最小的N个元素</p>
<p>语法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nlargest</span>(<span class="params">n, iterable, key=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Find the n largest elements in a dataset.</span></span><br><span class="line"><span class="string">    Equivalent to:  sorted(iterable, key=key, reverse=True)[:n]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="random"><a href="#random" class="headerlink" title="random"></a>random</h3><ul>
<li>注意如果在random.method之前使用了seed，那么random.method每次都将按照一定规则返回相同的数值</li>
</ul>
<h4 id="shuffle"><a href="#shuffle" class="headerlink" title="shuffle"></a>shuffle</h4><p>语法:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">random.shuffle(iterable)</span><br><span class="line">args:</span><br><span class="line">    iterbale a <span class="built_in">list</span> <span class="keyword">or</span> <span class="built_in">tuple</span> (sequence)</span><br><span class="line"><span class="keyword">return</span>:</span><br><span class="line">	the origin sequence but the position of element is random ==&gt; None</span><br></pre></td></tr></table></figure>

<p>实列:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">print(a, <span class="built_in">id</span>(a))</span><br><span class="line"></span><br><span class="line"><span class="comment"># operation in ori return None</span></span><br><span class="line">random.shuffle(a)</span><br><span class="line"></span><br><span class="line">print(a, <span class="built_in">id</span>(a))</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] <span class="number">2200356865544</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>] <span class="number">2200356865544</span></span><br></pre></td></tr></table></figure>

<h4 id="seed"><a href="#seed" class="headerlink" title="seed"></a>seed</h4><p>调用 <code>random.random()|shuffle </code>生成随机数时，每一次生成的数都是随机的。<br>但是，当使用<code> random.seed(x)</code> 设定好种子之后，其中的 <code>x </code>可以是任意数字，这个时候，先调用<code>seed</code>的情况下，使用 <code>random() </code>生成的随机数将会是同一个</p>
<h4 id="randrange"><a href="#randrange" class="headerlink" title="randrange"></a>randrange</h4><p>从指定范围内，按指定基数递增的集合中 获取一个随机数。</p>
<p><code>random.randrange([start], stop[, step])</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 结果相当于从[10, 12, 14, 16, … 96, 98]序列中获取一个随机数。</span></span><br><span class="line">random.randrange(<span class="number">10</span>, <span class="number">100</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h4 id="sample"><a href="#sample" class="headerlink" title="sample"></a>sample</h4><p><code>random.sample</code>的函数原型为：<code>random.sample(sequence, k)</code>从指定序列中随机获取指定长度的片断。sample函数不会修改原有序列。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">temp = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">print(temp, <span class="built_in">id</span>(temp))</span><br><span class="line">random_choice = random.sample(temp, <span class="number">3</span>)</span><br><span class="line">print(random_choice, <span class="built_in">id</span>(random_choice))</span><br><span class="line">print(<span class="built_in">id</span>(temp))</span><br><span class="line"></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>] <span class="number">2483596469896</span></span><br><span class="line">[<span class="number">7</span>, <span class="number">8</span>, <span class="number">3</span>] <span class="number">2483594327944</span></span><br><span class="line"><span class="number">2483596469896</span></span><br></pre></td></tr></table></figure>

<h3 id="dis"><a href="#dis" class="headerlink" title="dis"></a>dis</h3><h4 id="dis-dis"><a href="#dis-dis" class="headerlink" title="dis.dis"></a>dis.dis</h4><p>Python代码在执行的时候，会被编译为Python字节码，再由Python虚拟机执行Python字节码。有时候就我们执行python文件的时候会生成一个pyc文件，这个pyc文件即用于存储Python字节码指令，而这些字节码是一种类似于汇编指令的中间语言，但是每个字节码对应的不是机器指令，而是一段C代码。</p>
<p>而dis模块，就是用于查看这些字节码的运行轨迹，因此我们可以用dis模块判断两个函数的内存占用谁会更大，谁会更消耗CPU性能，不仅如此，通过指令，我们还可以知道Python中一些内置函数、变量的取值过程、运行逻辑，对于我们代码性能并优化代码很有帮助。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dis</span><br><span class="line">dis.dis(<span class="string">&quot;ori_tuple[index] += mutable_sequence&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span>           <span class="number">0</span> LOAD_NAME                <span class="number">0</span> (ori_tuple)</span><br><span class="line">              <span class="number">2</span> LOAD_NAME                <span class="number">1</span> (index)</span><br><span class="line">              <span class="number">4</span> DUP_TOP_TWO</span><br><span class="line">              <span class="number">6</span>             <span class="comment"># 实现 TOS = TOS1[TOS] </span></span><br><span class="line">              <span class="number">8</span> LOAD_NAME                <span class="number">2</span> (mutable_sequence)</span><br><span class="line">             <span class="number">10</span> INPLACE_ADD</span><br><span class="line">             <span class="number">12</span> ROT_THREE</span><br><span class="line">             <span class="number">14</span> STORE_SUBSCR</span><br><span class="line">             <span class="number">16</span> LOAD_CONST               <span class="number">0</span> (<span class="literal">None</span>)</span><br><span class="line">             <span class="number">18</span> RETURN_VALUE</span><br></pre></td></tr></table></figure>

<p>字节码操作:</p>
<ul>
<li><p>假设</p>
<ul>
<li>ori_tuple = (1, 2,  [10, 20])</li>
<li>index = 2</li>
<li>mutable_sequence = [30, 40]</li>
</ul>
</li>
<li><p>6 BINARY_SUBSCR 将 <code>ori_tuple[index]</code>的值存入<code>TOS</code>(Top Of Stack)</p>
</li>
<li><p>10 INPLACE_ADD 计算<code>ori_tuple[index] += mutable_sequence</code>, 这一步骤可以完成, 是因为<code>TOS</code>指向的是一个可变对象</p>
</li>
<li><p>14 STORE_SUBSCR 赋值, 这一步骤失败, 是因为tuple属于不可变序列(immutable)</p>
</li>
</ul>
<hr>
<p>我们从这个操作中可以得到三个教训:</p>
<ol>
<li>不要把可变对象放在元组中</li>
<li>增量赋值(+=)不是一个原子操作, 在计算完后的赋值阶段如果抛出异常, 计算仍然会完成</li>
</ol>
<p>譬如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">b = (1, 2, [10, 20])</span><br><span class="line">b += [30, 40]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;input&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">TypeError: can only concatenate tuple (not &quot;list&quot;) to tuple</span><br><span class="line">print(b)</span><br><span class="line">(1, 2, [10, 20])</span><br></pre></td></tr></table></figure>

<p><strong>在上述实列中, 即使在最后的赋值阶段tuple抛出异常, 但是此时tuple的数据依然发生了改变!</strong></p>
<table>
<thead>
<tr>
<th align="center">Python字节码 name(variable)</th>
<th>执行操作</th>
</tr>
</thead>
<tbody><tr>
<td align="center">LOAD_NAME</td>
<td>将与 <code>co_names[namei]</code> 相关联的值推入栈顶。</td>
</tr>
<tr>
<td align="center">DUP_TOP_TWO</td>
<td>复制堆栈顶部的两个引用，使它们保持相同的顺序。</td>
</tr>
<tr>
<td align="center">BINARY_SUBSCR</td>
<td>实现 <code>TOS = TOS1[TOS]</code> 。</td>
</tr>
<tr>
<td align="center">INPLACE_ADD</td>
<td>就地实现 <code>TOS = TOS1 + TOS</code> 。</td>
</tr>
<tr>
<td align="center">ROT_THREE</td>
<td>将第二个和第三个堆栈项向上提升一个位置，顶项移动到位置三。</td>
</tr>
<tr>
<td align="center">STORE_SUBSCR</td>
<td>实现 <code>TOS1[TOS] = TOS2</code> 。</td>
</tr>
<tr>
<td align="center">LOAD_CONST</td>
<td>将 <code>co_consts[consti]</code> 推入栈顶</td>
</tr>
<tr>
<td align="center">RETURN_VALUE</td>
<td>返回 TOS 到函数的调用者。</td>
</tr>
</tbody></table>
<ul>
<li>引用<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/dis.html">dis — Python 字节码反汇编器 — Python 3.10.2 文档</a></li>
</ul>
<h3 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h3><h4 id="getsizeof"><a href="#getsizeof" class="headerlink" title="getsizeof"></a>getsizeof</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">getsizeof(object, default) -&gt; int</span><br><span class="line">Return the size of <span class="built_in">object</span> <span class="keyword">in</span> <span class="built_in">bytes</span>.</span><br></pre></td></tr></table></figure>

<p>获取对象所消耗的内存大小</p>
<h4 id="argv"><a href="#argv" class="headerlink" title="argv"></a>argv</h4><p>是一个从程序外部获取参数的桥梁，从外部取得的参数可以是多个，所以获得的是一个列表（list)，也就是说sys.argv其实可以看作是一个列表，所以才能用[]提取其中的元素。其第一个元素是程序本身，随后才依次是外部给予的参数。</p>
<h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3><p>返回对象的物理存储地址, 一般用作操作符是或否创建了一个新对象, 比较两个对象的物理地址是否相同使用<code>is</code></p>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>提供的函数对指定序列做映射。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(function, iterable, ...)</span><br></pre></td></tr></table></figure>

<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p><strong>filter()</strong> 函数用于过滤序列，过滤掉不符合条件的元素，返回由符合条件元素组成的新列表。</p>
<p><em>Python2.7 返回列表，Python3.x 返回迭代器对象</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">filter</span>(function, iterable)</span><br><span class="line"><span class="comment"># 通常和map函数一起使用</span></span><br></pre></td></tr></table></figure>

<p>Python2.x 中返回的是过滤后的列表, 而 Python3 中返回到是一个 filter 类。</p>
<p>filter 类实现了 <strong>iter</strong> 和 <strong>next</strong> 方法, 可以看成是一个迭代器, 有惰性运算的特性, 相对 Python2.x 提升了性能, 节约内存。</p>
<h3 id="abs-fabs-math"><a href="#abs-fabs-math" class="headerlink" title="abs|fabs[math]"></a>abs|fabs[math]</h3><p><code>Python</code> 中<code> fabs(x)</code> 方法返回 <code>x</code> 的绝对值。虽然类似于 <code>abs()</code> 函数，但是两个函数之间存在以下差异：</p>
<ul>
<li><p><code>abs()</code> 是一个内置函数，而 <code>fabs()</code> 在 <code>math</code> 模块中定义的。</p>
</li>
<li><p><code>fabs()</code> 函数只适用于 <code>float</code> 和 <code>integer</code> 类型，而 <code>abs()</code> 也适用于复数。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">a = -<span class="number">1</span></span><br><span class="line">b = -<span class="number">1.3232</span></span><br><span class="line">c = b</span><br><span class="line">d = <span class="number">1</span> + <span class="number">1.0j</span></span><br><span class="line">e = <span class="number">3</span> + <span class="number">4.0j</span></span><br><span class="line">print(<span class="string">&quot;a的绝对值是:&quot;</span>, <span class="built_in">abs</span>(a))</span><br><span class="line">print(<span class="string">&quot;b的绝对值是:&quot;</span>, <span class="built_in">abs</span>(b))</span><br><span class="line">print(<span class="string">&quot;c的绝对值是:&quot;</span>, math.fabs(c))</span><br><span class="line">print(<span class="string">&quot;d的的绝对值是:&quot;</span>, <span class="built_in">abs</span>(d))</span><br><span class="line">print(<span class="string">&quot;e的绝对值是:&quot;</span>, math.fabs(e))</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;H:/MY_TXM/test.py&quot;</span>, line <span class="number">80</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    print(<span class="string">&quot;e的绝对值是:&quot;</span>,math.fabs(e))</span><br><span class="line">TypeError: can<span class="string">&#x27;t convert complex to float</span></span><br></pre></td></tr></table></figure>

<h3 id="hypot-math"><a href="#hypot-math" class="headerlink" title="hypot[math]"></a>hypot[math]</h3><p><strong>hypot()</strong> 返回欧几里德范数 <code>sqrt(x*x + y*y)</code></p>
<p><code>hypot()</code>是不能直接访问的，需要导入 <code>math</code> 模块，然后通过 <code>math </code>静态对象调用该方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入直角三角形的一条直角边长：&quot;</span>))</span><br><span class="line">b = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入直角三角形的另一条直角边长：&quot;</span>))</span><br><span class="line">print(<span class="string">&quot;该直角三角形的斜边长为: &quot;</span>,  <span class="built_in">int</span>(math.hypot(a, b)))</span><br><span class="line">print(<span class="string">&quot;Done&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="bool"><a href="#bool" class="headerlink" title="bool"></a>bool</h3><p><strong>bool()</strong> 函数用于将给定参数转换为布尔类型，如果没有参数，返回 <code>False</code>用于判断真假</p>
<p><code>bool </code>是 <code>int</code> 的子类。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">bool</span>, <span class="built_in">int</span>)  <span class="comment"># bool 是 int 子类</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h3 id="issubclass"><a href="#issubclass" class="headerlink" title="issubclass"></a>issubclass</h3><p><code>issubclass(class, classinfo) --&gt; return True|False</code></p>
<p><strong>issubclass()</strong> 方法用于判断参数 <code>class </code>是否是类型参数<code>classinfo</code>的子类</p>
<h1 id="Part1-DataModel"><a href="#Part1-DataModel" class="headerlink" title="Part1.DataModel"></a>Part1.DataModel</h1><h2 id="1-具名元组"><a href="#1-具名元组" class="headerlink" title="1.具名元组"></a>1.具名元组</h2><p>Python元组的升级版本 – namedtuple(具名元组)</p>
<p>因为元组的局限性：不能为元组内部的数据进行命名，所以往往我们并不知道一个元组所要表达的意义，所以在这里引入了 collections.namedtuple 这个工厂函数，来构造一个带字段名的元组。具名元组的实例和普通元组消耗的内存一样多，因为字段名都被存在对应的类里面。这个类跟普通的对象实例比起来也要小一些，因为 Python 不会用 <strong>dict</strong> 来存放这些实例的属性。</p>
<p>namedtuple 对象的定义如以下格式：</p>
<p><code>collections.namedtuple(typename, field_names, verbose=False, rename=False)</code><br>返回一个具名元组子类 typename，其中参数的意义如下：</p>
<ul>
<li>typename：元组名称</li>
<li>field_names: 元组中元素的名称</li>
<li>rename: 如果元素名称中含有 python 的关键字，则必须设置为 rename=True</li>
<li>verbose: 默认就好</li>
</ul>
<p>下面来看看声明一个具名元组及其实例化的方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line">两种方法来给 namedtuple 定义方法名</span><br><span class="line">User = collections.namedtuple(<span class="string">&#x27;User&#x27;</span>, [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;id&#x27;</span>])</span><br><span class="line">User = collections.namedtuple(<span class="string">&#x27;User&#x27;</span>, <span class="string">&#x27;name age id&#x27;</span>)</span><br><span class="line">user = User(<span class="string">&#x27;tester&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;464643123&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(user)</span><br><span class="line">collections.namedtuple(<span class="string">&#x27;User&#x27;</span>, <span class="string">&#x27;name age id&#x27;</span>) 创建一个具名元组，需要两个参数，一个是类名，另一个是类的各个字段名。后者可以是有多个字符串组成的可迭代对象，或者是有空格分隔开的字段名组成的字符串（比如本示例）。具名元组可以通过字段名或者位置来获取一个字段的信息。</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line"></span><br><span class="line">User(name=<span class="string">&#x27;tester&#x27;</span>, age=<span class="string">&#x27;22&#x27;</span>, <span class="built_in">id</span>=<span class="string">&#x27;464643123&#x27;</span>)</span><br><span class="line">具名元组的特有属性:</span><br><span class="line"></span><br><span class="line">类属性 _fields：包含这个类所有字段名的元组 类方法 _make(iterable)：接受一个可迭代对象来生产这个类的实例 实例方法 _asdict()：把具名元组以 collections.OrdereDict 的形式返回，可以利用它来把元组里的信息友好的展示出来</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个namedtuple类型User，并包含name，sex和age属性。</span></span><br><span class="line">User = namedtuple(<span class="string">&#x27;User&#x27;</span>, [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个User对象</span></span><br><span class="line">user = User(name=<span class="string">&#x27;Runoob&#x27;</span>, sex=<span class="string">&#x27;male&#x27;</span>, age=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取所有字段名</span></span><br><span class="line">print( user._fields )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以通过一个list来创建一个User对象，这里注意需要使用&quot;_make&quot;方法</span></span><br><span class="line">user = User._make([<span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;male&#x27;</span>, <span class="number">12</span>])</span><br><span class="line"></span><br><span class="line">print( user )</span><br><span class="line"><span class="comment"># User(name=&#x27;user1&#x27;, sex=&#x27;male&#x27;, age=12)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取用户的属性</span></span><br><span class="line">print( user.name )</span><br><span class="line">print( user.sex )</span><br><span class="line">print( user.age )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改对象属性，注意要使用&quot;_replace&quot;方法</span></span><br><span class="line">user = user._replace(age=<span class="number">22</span>)</span><br><span class="line">print( user )</span><br><span class="line"><span class="comment"># User(name=&#x27;user1&#x27;, sex=&#x27;male&#x27;, age=21)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将User对象转换成字典，注意要使用&quot;_asdict&quot;</span></span><br><span class="line">print( user._asdict() )</span><br><span class="line"><span class="comment"># OrderedDict([(&#x27;name&#x27;, &#x27;Runoob&#x27;), (&#x27;sex&#x27;, &#x27;male&#x27;), (&#x27;age&#x27;, 22)])</span></span><br><span class="line">以上实例输出结果为：</span><br><span class="line"></span><br><span class="line">(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">User(name=<span class="string">&#x27;Runoob&#x27;</span>, sex=<span class="string">&#x27;male&#x27;</span>, age=<span class="number">12</span>)</span><br><span class="line">Runoob</span><br><span class="line">male</span><br><span class="line"><span class="number">12</span></span><br><span class="line">User(name=<span class="string">&#x27;Runoob&#x27;</span>, sex=<span class="string">&#x27;male&#x27;</span>, age=<span class="number">22</span>)</span><br><span class="line">OrderedDict([(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>), (<span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;male&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="number">22</span>)])</span><br></pre></td></tr></table></figure>

<h2 id="2-列表表达式"><a href="#2-列表表达式" class="headerlink" title="2.列表表达式"></a>2.列表表达式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 两者相等</span></span><br><span class="line">print([(i, j) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>) <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>, <span class="number">20</span>)])</span><br><span class="line">res = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>, <span class="number">20</span>):</span><br><span class="line">        res.append((i, j))</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># essential</span></span><br><span class="line">fun() <span class="keyword">for</span>-<span class="keyword">in</span>-loop_1 <span class="keyword">for</span>-<span class="keyword">in</span>-loop_2</span><br><span class="line">&lt;==&gt;</span><br><span class="line"><span class="keyword">for</span>-<span class="keyword">in</span>-loop_1:</span><br><span class="line">    <span class="keyword">for</span>-<span class="keyword">in</span>-loop_2:</span><br><span class="line">        fun()</span><br></pre></td></tr></table></figure>

<h2 id="3-random-choice"><a href="#3-random-choice" class="headerlink" title="3.random choice"></a>3.random choice</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line">choice(obj) -&gt; obj: can iterable</span><br><span class="line">==&gt; this module can choice a random element from obj</span><br></pre></td></tr></table></figure>

<h2 id="4-Magic-Method"><a href="#4-Magic-Method" class="headerlink" title="4.Magic Method"></a>4.Magic Method</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">obj[key]</span><br><span class="line">本质上调用的是__getitem__</span><br><span class="line"></span><br><span class="line">magic method 又称为 dunder method 及双下滑线魔法方法</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>-<span class="keyword">in</span>-loop</span><br><span class="line">==&gt; __contains__ 迭代通常是隐式的</span><br><span class="line"></span><br><span class="line">obj[key]   --&gt;  self.__getitem__</span><br><span class="line"></span><br><span class="line">迭代通常是隐式的,如果一个集合类型没有实现slef.__contains__,</span><br><span class="line">那么<span class="keyword">in</span>运算符就会按照顺序做一次迭代搜索</span><br><span class="line"></span><br><span class="line">len(obj)   --&gt;   self.__len__</span><br><span class="line">注意如果obj是python内置的类型比如（<span class="built_in">list</span>、<span class="built_in">str</span>、bytearry）等Cpython会抄个近路，__len__实际上会直接返回PyVarObject的self.ob_size这个属性，而不是执行self.__len__这个方法</span><br><span class="line"></span><br><span class="line">for item in x:   --&gt;  self.__iter__</span><br><span class="line">x 必须是可迭代的</span><br></pre></td></tr></table></figure>

<h2 id="5-迭代器与生成器"><a href="#5-迭代器与生成器" class="headerlink" title="5.迭代器与生成器"></a>5.迭代器与生成器</h2><h3 id="5-1迭代器"><a href="#5-1迭代器" class="headerlink" title="5.1迭代器"></a>5.1迭代器</h3><p>迭代是Python最强大的功能之一，是访问集合元素的一种方式。</p>
<p>迭代器是一个可以记住遍历的位置的对象。</p>
<p>迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。迭代器只能往前不会后退。</p>
<p>迭代器有两个基本的方法：<strong>iter()</strong> 和 **next()**。</p>
<p>字符串，列表或元组对象都可用于创建迭代器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">it = <span class="built_in">iter</span>(<span class="built_in">list</span>)    <span class="comment"># 创建迭代器对象</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">next</span>(it))   <span class="comment"># 输出迭代器的下一个元素</span></span><br><span class="line">&gt;<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">next</span>(it))</span><br><span class="line">&gt;<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>迭代器对象可以使用常规for语句进行遍历</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">it = <span class="built_in">iter</span>(<span class="built_in">list</span>)    <span class="comment"># 创建迭代器对象</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> it:</span><br><span class="line">    <span class="built_in">print</span> (x, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    </span><br><span class="line">&gt; <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><strong>也可以使用 next() 函数：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> sys         <span class="comment"># 引入 sys 模块</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">it = <span class="built_in">iter</span>(<span class="built_in">list</span>)    <span class="comment"># 创建迭代器对象</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span> (<span class="built_in">next</span>(it))</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        sys.exit()</span><br></pre></td></tr></table></figure>

<h3 id="5-2创建一个迭代器"><a href="#5-2创建一个迭代器" class="headerlink" title="5.2创建一个迭代器"></a>5.2创建一个迭代器</h3><p>把一个类作为一个迭代器使用需要在类中实现两个方法 <strong>iter</strong>() 与 <strong>next</strong>() </p>
<p>在定义类的时候都有一个构造函数，Python 的构造函数为 <strong>init</strong>(), 它会在对象初始化的时候执行。</p>
<p><strong>iter</strong>() 方法返回一个特殊的<strong>迭代器对象</strong>， 这个迭代器对象实现了 <strong>next</strong>() 方法并通过 <strong>StopIteration</strong> 异常标识迭代的完成。</p>
<p><strong>next</strong>() 方法（Python 2 里是 next()）会返回下一个迭代器对象。</p>
<p>创建一个返回数字的迭代器，初始值为 1，逐步递增 1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Numbers</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    抽象一个迭代器对象，初始属性【value=0每次next自增1，并通过【value&gt;20】来rais StopInteration</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.value = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 注意这里返回的不是属性self.value而是self这个抽象对象</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self.value &lt;= <span class="number">20</span>:</span><br><span class="line">	        self.value += <span class="number">1</span></span><br><span class="line">            <span class="comment"># 这里我们需要输出值,print进行查看</span></span><br><span class="line">            <span class="keyword">return</span> self.value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">            </span><br><span class="line"><span class="comment"># ------</span></span><br><span class="line"></span><br><span class="line">temp = Numbers()</span><br><span class="line">temp_iter = <span class="built_in">iter</span>(temp)  <span class="comment"># 这一步骤可以省略，因为temp在实例化的时候已经是一个迭代器了（contains magic method） iterm | next</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以直接for-in-loop temp</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> temp_iter:</span><br><span class="line">    print(item)</span><br><span class="line">&gt; <span class="number">1</span> <span class="number">2</span> ... <span class="number">21</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将俩者的信息进行打印如下:</span></span><br><span class="line">print(<span class="string">f&quot;the obj is <span class="subst">&#123;temp&#125;</span> , type is <span class="subst">&#123;<span class="built_in">type</span>(temp)&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;the iter is <span class="subst">&#123;temp_iter&#125;</span> , type is <span class="subst">&#123;<span class="built_in">type</span>(temp)&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line">the obj <span class="keyword">is</span> &lt;__main__.Numbers <span class="built_in">object</span> at <span class="number">0x0000016FFBD51088</span>&gt; , <span class="built_in">type</span> <span class="keyword">is</span> &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">__main__</span>.<span class="title">Numbers</span>&#x27;&gt;</span></span><br><span class="line">the iter is &lt;__main__.Numbers object at 0x0000016FFBD51088&gt; , type is &lt;class &#x27;__main__.Numbers&#x27;&gt;</span><br><span class="line"><span class="comment"># 可以看到两者的物理地址相同，因此iter(OBJ)和OBJ一样都是属于迭代器</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="5-3生成器"><a href="#5-3生成器" class="headerlink" title="5.3生成器"></a>5.3生成器</h3><p>在 Python 中，使用了 yield 的函数被称为生成器（generator）。</p>
<p>跟普通函数不同的是，生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。</p>
<p>在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。</p>
<p>调用一个生成器函数，返回的是一个迭代器对象。</p>
<p>以下实例使用 yield 实现斐波那契数列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci</span>(<span class="params">n</span>):</span>  <span class="comment"># 生成器函数 - 斐波那契</span></span><br><span class="line">    a, b, counter = <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> (counter &gt; n): </span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">f = fibonacci(<span class="number">10</span>)  <span class="comment"># f 是一个迭代器，由生成器返回生成</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span> (<span class="built_in">next</span>(f), end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        sys.exit()</span><br><span class="line"><span class="comment">#  每次next（generator）所生成的迭代器对象公用和一个物理地址</span></span><br></pre></td></tr></table></figure>

<h3 id="5-4迭代器和生成器对比："><a href="#5-4迭代器和生成器对比：" class="headerlink" title="5.4迭代器和生成器对比："></a>5.4迭代器和生成器对比：</h3><ul>
<li><p>迭代器（iterator）是一个特殊的类，其中必有iterm和next方法，本质上是一个类|对象 </p>
<ul>
<li>除了使用class来定义一个迭代器外， 还可以使用iterm(obj)来快速生成一个迭代器对象</li>
<li>可以使用rais StopIteration来抛出exception阻止迭代器进入<strong>死循环</strong></li>
<li>是一个可以记住遍历的位置的对象（本质上含有iterm和next）</li>
</ul>
</li>
<li><p>生成器是一个含有yield的函数（generator），生成器是一个返回迭代器的函数，只能用于迭代操作，其实生成器也可以理解成一种特殊的迭代器</p>
<ul>
<li>生成器是一个返回迭代器的函数</li>
<li>在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。</li>
<li>调用一个生成器函数，返回的是一个迭代器对象</li>
</ul>
</li>
</ul>
<h2 id="6-len为什么不是普通方法"><a href="#6-len为什么不是普通方法" class="headerlink" title="6.len为什么不是普通方法"></a>6.len为什么不是普通方法</h2><p>如果x是一个python内置类型的实例， 那么len(x)中Cpython会直接调用这个类的属性，解释器将不走<code>__len__()</code>这个方法</p>
<h2 id="杂谈"><a href="#杂谈" class="headerlink" title="杂谈"></a>杂谈</h2><ol>
<li><p>数据模型|对象模型</p>
<ul>
<li>python文档中大多使用数据模型, 而大多数喜欢使用对象模型</li>
<li>对象模型:计算机编程语言中对象的属性&lt;==&gt;数据模型</li>
</ul>
</li>
<li><p>魔法方法</p>
<ul>
<li>python用这个方法来提供更多的元对象协议,目的是让语言的使用者和开发者拥有并使用同样的工具</li>
</ul>
</li>
<li><p>元对象</p>
<p><code>the art of the MetaObject Protocal | AMOP</code></p>
<ul>
<li>元对象协议:那些对构建语言本身来讲很重要的对象, 以此为前提, 协议也可以看成是接口, 即是说, 元对象协议是对象模型(数据模型)的同义词, 他们的本质都是构建核心语言的API</li>
</ul>
</li>
</ol>
<h1 id="Part2-DataStructure"><a href="#Part2-DataStructure" class="headerlink" title="Part2.DataStructure"></a>Part2.DataStructure</h1><h2 id="2-0前言"><a href="#2-0前言" class="headerlink" title="2.0前言"></a>2.0前言</h2><p>在创建<code>poython</code>之前<code>Guido</code>曾为<code>ABC</code>语言贡献过代码, <code>ABC</code>语言是一个致力于为初学者设计变成环境的长达10的研究项目, 其中很多点子在现在看来任然具有python的特性如:</p>
<ol>
<li>序列的泛型操作</li>
<li>内置的元组</li>
<li>映射类型</li>
<li>用缩进来构建源码</li>
<li>无需变量声明的强类型</li>
</ol>
<p>python也从ABC继承了用统一风格处理<code>序列数据</code>这一特点, 无论是中数据结构(string|list|bytes|tuple|array|xml|element|database query)他们都公用一套操作:</p>
<ol>
<li>迭代</li>
<li>切片</li>
<li>排序</li>
<li>拼接</li>
</ol>
<h2 id="2-1内置序列类型"><a href="#2-1内置序列类型" class="headerlink" title="2.1内置序列类型"></a>2.1内置序列类型</h2><p>python使用C实现了两大类序列类型：<strong>容器序列 扁平序列</strong></p>
<p>两者</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2022/02/06/%E6%B5%81%E7%95%85%E7%9A%84python/" data-id="ckzb823ai0000ngf5h2vdfe6t" data-title="流畅的python" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-经济分析-1" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/11/14/%E7%BB%8F%E6%B5%8E%E5%88%86%E6%9E%90-1/" class="article-date">
  <time class="dt-published" datetime="2021-11-14T15:14:00.000Z" itemprop="datePublished">2021-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/11/14/%E7%BB%8F%E6%B5%8E%E5%88%86%E6%9E%90-1/">经济分析[1]</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/11/14/%E7%BB%8F%E6%B5%8E%E5%88%86%E6%9E%90-1/" data-id="ckwtcwj440000jof547g5dmg1" data-title="经济分析[1]" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-新闻联播-2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/11/14/%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD-2/" class="article-date">
  <time class="dt-published" datetime="2021-11-14T15:13:39.000Z" itemprop="datePublished">2021-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/11/14/%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD-2/">新闻联播[2]</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/11/14/%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD-2/" data-id="ckwtcwj490001jof5gi3cd85y" data-title="新闻联播[2]" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Question" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/07/Question/" class="article-date">
  <time class="dt-published" datetime="2021-10-07T11:39:08.000Z" itemprop="datePublished">2021-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/07/Question/">Question</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Q21-SSLError"><a href="#Q21-SSLError" class="headerlink" title="Q21 SSLError"></a>Q21 SSLError</h2><h3 id="Info"><a href="#Info" class="headerlink" title="-Info"></a>-Info</h3><p>在使用<code>AsyncHTTPClient</code>调用<code>API</code>时, 出现错误</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AsyncHTTPClient</span><br><span class="line">ssl.SSLError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:<span class="number">852</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="-Analysis"></a>-Analysis</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;https://txm.zidouchat.com/wx/get_access_token&quot;</span></span><br><span class="line">data = &#123;<span class="string">&quot;token&quot;</span>: <span class="string">&quot;doododisagreatcompany&quot;</span>&#125;</span><br><span class="line">body = json.dumps(data)</span><br><span class="line">response = <span class="keyword">await</span> httpclient.fetch(url, method=<span class="string">&quot;POST&quot;</span>, body=body)</span><br></pre></td></tr></table></figure>

<p>debug排查:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(ssl_options, host)</span><br><span class="line"><span class="keyword">if</span> ssl_options <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">	<span class="keyword">if</span> timeout <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">		stream = <span class="keyword">yield</span> gen.with_timeout(timeout, stream.start_tls(<span class="literal">False</span>, ssl_options=ssl_options, server_hostname=host))</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		stream = <span class="keyword">yield</span> stream.start_tls(<span class="literal">False</span>, ssl_options=ssl_options,server_hostname=host)</span><br><span class="line"><span class="keyword">raise</span> gen.Return(stream)</span><br></pre></td></tr></table></figure>

<p>此网站的ssl证书验证失败</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;ssl.SSLContext <span class="built_in">object</span> at <span class="number">0x7f9f0d393ac8</span>&gt;   txm.zidouchat.com</span><br></pre></td></tr></table></figure>

<h3 id="Solution"><a href="#Solution" class="headerlink" title="-Solution"></a>-Solution</h3><p>方法一</p>
<blockquote>
<p>在使用http链接建立请求时关闭ssl验证</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加ssl跳过验证</span></span><br><span class="line"><span class="keyword">import</span> ssl</span><br><span class="line">ssl_options = &#123;<span class="string">&quot;ssl_version&quot;</span>: ssl.PROTOCOL_TLSv1&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加ssl跳过验证</span></span><br><span class="line"><span class="keyword">if</span> ssl_options <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">	<span class="keyword">if</span> timeout <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">		stream = <span class="keyword">yield</span> gen.with_timeout(timeout, stream.start_tls(<span class="literal">False</span>, ssl_options=ssl_options, server_hostname=host))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        stream = <span class="keyword">yield</span> stream.start_tls(<span class="literal">False</span>, ssl_options=ssl_options,</span><br><span class="line">                                                server_hostname=host)</span><br></pre></td></tr></table></figure>

<p>方法二</p>
<blockquote>
<p>在实例化时赋予属性 validate_cert=False, 有一定风险仍然使用old_ssl</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tornado.httpclient</span><br><span class="line"></span><br><span class="line">request = tornado.httpclient.HTTPRequest(</span><br><span class="line">    url=<span class="string">&quot;https://myhostname.com:9001&quot;</span>,</span><br><span class="line">    method=<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    validate_cert=<span class="literal">False</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span> tornado.httpclient.HTTPClient().fetch(request)</span><br></pre></td></tr></table></figure>

<h3 id="Review"><a href="#Review" class="headerlink" title="-Review"></a>-Review</h3><p><code>curl http_address -k</code></p>
<p>可以跳过ssl验证</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I<span class="string">&#x27;m trying to use tornado&#x27;</span>s http client to fetch a URL. I<span class="string">&#x27;ve done this before many times, but I&#x27;</span>m getting a really odd SSL error this time. The endpoint I<span class="string">&#x27;m trying to consume does not have a valid cert, but a -k on a curl call still proves it works.</span></span><br></pre></td></tr></table></figure>

<h2 id="Q20-Docker-Compose"><a href="#Q20-Docker-Compose" class="headerlink" title="Q20 Docker Compose"></a>Q20 Docker Compose</h2><h3 id="Info-1"><a href="#Info-1" class="headerlink" title="-Info"></a>-Info</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 拉取镜像报错</span></span><br><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>

<h3 id="Analysis-1"><a href="#Analysis-1" class="headerlink" title="-Analysis"></a>-Analysis</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 报错信息</span></span><br><span class="line">ERROR: write /var/lib/docker/tmp/GetImageBlob264931462: no space left on device</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指宿主机内部没有空间写入docker文件</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看内存使用</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>

<h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="-Solution"></a>-Solution</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 清除宿主机内不在使用的imgaes</span></span><br><span class="line">docker rmi $ (docker images -aq)</span><br></pre></td></tr></table></figure>

<h2 id="Q19GIt-PUll失败"><a href="#Q19GIt-PUll失败" class="headerlink" title="Q19GIt PUll失败"></a>Q19GIt PUll失败</h2><h3 id="Info-2"><a href="#Info-2" class="headerlink" title="-Info"></a>-Info</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(venv) edy@bogon TXM % git pull</span><br><span class="line"></span><br><span class="line">Your configuration specifies to merge <span class="keyword">with</span> the ref <span class="string">&#x27;refs/heads/watsons_uat&#x27;</span></span><br><span class="line"><span class="keyword">from</span> the remote, but no such ref was fetched.</span><br></pre></td></tr></table></figure>

<h3 id="Analysis-2"><a href="#Analysis-2" class="headerlink" title="-Analysis"></a>-Analysis</h3><ol>
<li>远程仓库不存在要pull的分支</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">本地仓库当前分支是a，但是a的远程分支被删除掉了，pull的时候就会报错，这时候使用</span><br><span class="line">git remote prune origin</span><br><span class="line">同步下远程分支，并清除掉已删除的分支，再清除掉当前分支（如果当前分支在工作区的话）就可以了</span><br><span class="line"></span><br><span class="line">建议：使用命令行拉取新分支代码前使用：git fetch -p 获取最新分支 然后获取远程分支代码</span><br><span class="line">git fetch -p</span><br></pre></td></tr></table></figure>

<h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="-Solution"></a>-Solution</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 切换到其他分支, 建议master分支</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 同步远程分支, 并清楚已经删除的分支</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 清除被删除的分支</span></span><br><span class="line">git remote prune origin  </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在获取之前，删除远程上不再存在的任何远程跟踪引用</span></span><br><span class="line">git fetch -p  </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到出现问题的分支</span></span><br><span class="line">git checkout target_branch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关联分支</span></span><br><span class="line">git branch --set-upstream-to=origin/master &lt;target_branch&gt;</span><br><span class="line"></span><br><span class="line">git push --set-upstream origin &lt;local_branch&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Q18mogodb更新失败"><a href="#Q18mogodb更新失败" class="headerlink" title="Q18mogodb更新失败"></a>Q18mogodb更新失败</h2><h3 id="Info-3"><a href="#Info-3" class="headerlink" title="-Info"></a>-Info</h3><p>在更新ipdate_one()时出现update error</p>
<h3 id="Analysis-3"><a href="#Analysis-3" class="headerlink" title="-Analysis"></a>-Analysis</h3><p>查看所使用的是否是原生语法, 如果使用http连接更新, 则尝试使用原生语句进行更新</p>
<h2 id="Q17linux连接目标主机报错-ssh"><a href="#Q17linux连接目标主机报错-ssh" class="headerlink" title="Q17linux连接目标主机报错[ssh]"></a>Q17linux连接目标主机报错[ssh]</h2><h3 id="Info-4"><a href="#Info-4" class="headerlink" title="-Info"></a>-Info</h3><p><strong>问题一</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过linux主机，远程其他linux服务器时报错：Unable to negotiate with xx.xxx.xxx.x port 22:no matching cipher found. Their offer: aes128-cbc,aes256-cbc,3des-cbc,des-cbc</span><br></pre></td></tr></table></figure>

<p><strong>问题二</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">远程其他linux服务器时又报错：Unable to negotiate with xx.xx.xx.xx port 22: no matching key exchange method.found.Their.offer:diffie-hellman-group-exchange-sha1,diffie-hellman-group1-sha1</span><br></pre></td></tr></table></figure>

<h3 id="Analysis-4"><a href="#Analysis-4" class="headerlink" title="-Analysis"></a>-Analysis</h3><p><strong>问题一</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由于发起远程访问端的主机openssh版本过高（我的这台主机为最新8.1版本），导致不支持对低版本的远程连接主机的ssh解密，故报错。</span><br></pre></td></tr></table></figure>

<p><strong>问题二</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">根据提示，ssh不能远程登录的原因为：没有找到相关的主机密钥类型。</span><br></pre></td></tr></table></figure>

<h3 id="Soultion"><a href="#Soultion" class="headerlink" title="-Soultion"></a>-Soultion</h3><p><strong>问题一</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 修改发起远程访问的本机SSH客户端配置（/etc/ssh/ssh_config）文件，将默认注释的：</span></span><br><span class="line">Ciphers aes128-ctr,aes192-ctr,aes256-ctr,aes128-cbc,3des-cbc</span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用即可。</span></span><br></pre></td></tr></table></figure>

<p><strong>问题二</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 修改发起远程访问的本机SSH客户端配置（/etc/ssh/ssh_config）文件，在最后加上一行：</span></span><br><span class="line">KexAlgorithms +diffie-hellman-group1-sha1</span><br></pre></td></tr></table></figure>

<h2 id="Q16Docker连接redis失败"><a href="#Q16Docker连接redis失败" class="headerlink" title="Q16Docker连接redis失败"></a>Q16Docker连接redis失败</h2><h3 id="Info-5"><a href="#Info-5" class="headerlink" title="-Info"></a>-Info</h3><p>在docker-container中发现container重启</p>
<p><code>docker logs -f --tail 100 container_id&lt;container name&gt;</code></p>
<p>发现是连接redis报错</p>
<h3 id="Analysis-5"><a href="#Analysis-5" class="headerlink" title="-Analysis"></a>-Analysis</h3><p>分析发现是docker连接不到redis</p>
<h3 id="Solution-3"><a href="#Solution-3" class="headerlink" title="-Solution"></a>-Solution</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看docker状态</span></span><br><span class="line">services docker status</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启docker</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>



<h2 id="Q15Docker运行脚本"><a href="#Q15Docker运行脚本" class="headerlink" title="Q15Docker运行脚本"></a>Q15Docker运行脚本</h2><h3 id="Info-6"><a href="#Info-6" class="headerlink" title="-Info"></a>-Info</h3><p>在需要跑数据时, 可以 [根据场景选择] :</p>
<ol>
<li>写script</li>
<li>写临时API</li>
</ol>
<h3 id="Solution-4"><a href="#Solution-4" class="headerlink" title="-Solution"></a>-Solution</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> config.config <span class="keyword">import</span> Table</span><br><span class="line"><span class="keyword">from</span> model.base_model <span class="keyword">import</span> BaseModel</span><br><span class="line"></span><br><span class="line">phone = [<span class="string">&#x27;16620132242&#x27;</span>, <span class="string">&#x27;16676748179&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">export_excel</span>():</span></span><br><span class="line">    friend_count = []</span><br><span class="line">    <span class="keyword">for</span> sim <span class="keyword">in</span> phone:</span><br><span class="line">        print(<span class="string">f&#x27;---------sim:<span class="subst">&#123;sim&#125;</span>&#x27;</span>)</span><br><span class="line">        bot_username = <span class="keyword">await</span> BaseModel.fetch_one(</span><br><span class="line">            Table.BotInfo,</span><br><span class="line">            <span class="string">&quot;*&quot;</span>,</span><br><span class="line">            BaseModel.where_dict(&#123;<span class="string">&quot;sim&quot;</span>: sim&#125;)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> bot_username:</span><br><span class="line">            friend_count.append(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        friend_count_info = <span class="keyword">await</span> BaseModel.count_(</span><br><span class="line">            Table.Friend,</span><br><span class="line">            BaseModel.where_dict(&#123;<span class="string">&quot;bot_username&quot;</span>: bot_username.username, <span class="string">&quot;is_friend&quot;</span>: <span class="number">1</span>&#125;)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        friend_count.append(friend_count_info)</span><br><span class="line">    <span class="keyword">return</span> friend_count</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    task = asyncio.Task(export_excel())</span><br><span class="line">    done, pending = <span class="keyword">await</span> asyncio.wait(&#123;task&#125;)</span><br><span class="line">    <span class="keyword">if</span> task <span class="keyword">in</span> done:</span><br><span class="line">        print(task)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">  	<span class="comment"># 需要初始化BaseModel的model_dict()</span></span><br><span class="line">    BaseModel.init_model_dict()</span><br><span class="line">    loop = asyncio.get_event_loop()</span><br><span class="line">    loop.run_until_complete(main())</span><br><span class="line">    loop.close()</span><br></pre></td></tr></table></figure>

<h3 id="Review-1"><a href="#Review-1" class="headerlink" title="-Review"></a>-Review</h3><p>使用到的命令:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># copy file from linux-server to another linux-server</span></span><br><span class="line">scp source_file root@remote_ip:/target_directory/</span><br><span class="line"></span><br><span class="line"><span class="comment"># create file</span></span><br><span class="line">vim target_file.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># copy file from linux-server to linux-server-container</span></span><br><span class="line">docker cp source_file container_id[name]:/target_directory/</span><br></pre></td></tr></table></figure>

<p>需要注意的:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要初始化BaseModel的model_dict()</span></span><br><span class="line">BaseModel.init_model_dict()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导出excel</span></span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">people_count_list = [<span class="number">4190</span>, <span class="number">1415</span>]</span><br><span class="line">book = Workbook()</span><br><span class="line">sheet = book.active</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index, value <span class="keyword">in</span> <span class="built_in">enumerate</span>(people_count_list):</span><br><span class="line">    sheet[<span class="string">f&quot;A<span class="subst">&#123;index+<span class="number">1</span>&#125;</span>&quot;</span>] = value</span><br><span class="line">    print(value)</span><br><span class="line"></span><br><span class="line">book.save(<span class="string">&quot;/Users/edy/Desktop/sample.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Q14导出大数据Excel"><a href="#Q14导出大数据Excel" class="headerlink" title="Q14导出大数据Excel"></a>Q14导出大数据Excel</h2><h3 id="Info-7"><a href="#Info-7" class="headerlink" title="-Info"></a>-Info</h3><p>在导出群-机器人数据时, 涉及到群数据量很大导出excel失败</p>
<h3 id="Solution-5"><a href="#Solution-5" class="headerlink" title="-Solution"></a>-Solution</h3><p>使用page pagesize进行分页导出</p>
<h2 id="Q13字典获取key"><a href="#Q13字典获取key" class="headerlink" title="Q13字典获取key"></a>Q13字典获取key</h2><p>获取dict中key所对应的vaule, 使用. get [“key”]有什么区别?</p>
<h2 id="Q12unhashed-type-dict"><a href="#Q12unhashed-type-dict" class="headerlink" title="Q12unhashed type dict"></a>Q12unhashed type dict</h2><h3 id="Info-8"><a href="#Info-8" class="headerlink" title="-Info"></a>-Info</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR: unhashed <span class="built_in">type</span> <span class="built_in">dict</span></span><br></pre></td></tr></table></figure>

<h3 id="Analysis-6"><a href="#Analysis-6" class="headerlink" title="-Analysis"></a>-Analysis</h3><p>字典不能存储在集合</p>
<h2 id="Q11生成器对象不可下标"><a href="#Q11生成器对象不可下标" class="headerlink" title="Q11生成器对象不可下标"></a>Q11生成器对象不可下标</h2><h3 id="Infolocal"><a href="#Infolocal" class="headerlink" title="-Infolocal"></a>-Infolocal</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: ‘generator’ <span class="built_in">object</span> <span class="keyword">is</span> <span class="keyword">not</span> subscriptable </span><br></pre></td></tr></table></figure>

<h3 id="Analysis-7"><a href="#Analysis-7" class="headerlink" title="-Analysis"></a>-Analysis</h3><p>通常是list.append(generator)</p>
<h3 id="Solution-6"><a href="#Solution-6" class="headerlink" title="-Solution"></a>-Solution</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = []</span><br><span class="line">b = []</span><br><span class="line">a.append([<span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">5</span>)])</span><br><span class="line">b.extend(<span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表生成器</span></span><br><span class="line">[<span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">5</span>)]</span><br></pre></td></tr></table></figure>

<h2 id="Q10导入包含同名文件冲突"><a href="#Q10导入包含同名文件冲突" class="headerlink" title="Q10导入包含同名文件冲突"></a>Q10导入包含同名文件冲突</h2><h3 id="Info-9"><a href="#Info-9" class="headerlink" title="-Info"></a>-Info</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import resolves to its containing file</span><br><span class="line"></span><br><span class="line">file&gt; component</span><br><span class="line">import time</span><br></pre></td></tr></table></figure>

<h3 id="Analysis-8"><a href="#Analysis-8" class="headerlink" title="-Analysis"></a>-Analysis</h3><p>在<code>component</code>目录下有<code>time</code>文件,且import 了 time(python) 与python自带的第三方time库冲突</p>
<h3 id="Solution-7"><a href="#Solution-7" class="headerlink" title="-Solution"></a>-Solution</h3><h2 id="Q9Mongodb保存-插入字段失败"><a href="#Q9Mongodb保存-插入字段失败" class="headerlink" title="Q9Mongodb保存|插入字段失败"></a>Q9Mongodb保存|插入字段失败</h2><ul>
<li><input disabled="" type="checkbox"> 1.查看Table定义==&gt;fiedls = fiedls.<strong>IntFields()</strong>   ==&gt;需要加()</li>
</ul>
<h2 id="Q8虚拟环境配置"><a href="#Q8虚拟环境配置" class="headerlink" title="Q8虚拟环境配置"></a>Q8虚拟环境配置</h2><ul>
<li><input disabled="" type="checkbox"> 拉取项目后如何配置虚拟环境?</li>
<li><input disabled="" type="checkbox"> 如何激活虚拟环境, 并每次进入pycharm的terminal都保证是venv?</li>
</ul>
<ol>
<li>venv的目录和interpreter的目录要配置相同</li>
</ol>
<p>![image-20211018164551110](/Users/edy/Library/Application Support/typora-user-images/image-20211018164551110.png)</p>
<p>![image-20211018164714977](/Users/edy/Library/Application Support/typora-user-images/image-20211018164714977.png)</p>
<ol start="2">
<li>terminal的配置如下</li>
</ol>
<p>![image-20211018164922890](/Users/edy/Library/Application Support/typora-user-images/image-20211018164922890.png)</p>
<h2 id="Q7Nginx-Timeout-504"><a href="#Q7Nginx-Timeout-504" class="headerlink" title="Q7Nginx Timeout 504"></a>Q7Nginx Timeout 504</h2><h3 id="Info-10"><a href="#Info-10" class="headerlink" title="-Info"></a>-Info</h3><p>在前端导出excel时, 导出失败并返回<code>GateWay TimeOut 504</code></p>
<h3 id="Analysis-9"><a href="#Analysis-9" class="headerlink" title="-Analysis"></a>-Analysis</h3><ul>
<li>重新导出查看log</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url: /channel/get_excel?token=ab5c40fa9da40d74f5a2ba17d84dcf63</span><br><span class="line">GET /channel/get_excel?token=ab5c40fa9da40d74f5a2ba17d84dcf63 (183.81.181.194) 67000.83ms</span><br></pre></td></tr></table></figure>

<ul>
<li>说明导出正常, 其中导出时间大于<code>60s</code></li>
<li>nginx做反向代理，默认请求是有一个60秒的超时，如果http请求超过了60秒，再返回，连接就会被nginx中断，前端就会得到504的错误：gateway time-out。</li>
</ul>
<h3 id="Solution-8"><a href="#Solution-8" class="headerlink" title="-Solution"></a>-Solution</h3><blockquote>
<p>修改nginx的配置, 将超时设置延长至300s</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">docker ps </span><br><span class="line"></span><br><span class="line">docker exec -it nginx_container_id bash</span><br><span class="line"></span><br><span class="line">whereis nginx.conf</span><br><span class="line"></span><br><span class="line">cd /etc/config</span><br><span class="line"></span><br><span class="line">vim nginx.conf</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    keepalive_timeout 300;</span><br><span class="line">    proxy_connect_timeout 300;</span><br><span class="line">    proxy_send_timeout 300;</span><br><span class="line">    proxy_read_timeout 300;</span><br><span class="line">    send_timeout 300;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用挂载修复</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 进入服务器</span></span><br><span class="line">ssh root@xxx</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编辑volumne</span></span><br><span class="line">vim docker-compose.yaml</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加挂载</span></span><br><span class="line"> nginx-proxy:</span><br><span class="line">    image: registry.cn-beijing.aliyuncs.com/doododmain/nginx-proxy:20mbody</span><br><span class="line">    container_name: nginx-proxy</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;80:80&quot;</span><br><span class="line">      - &quot;443:443&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - /certs:/etc/nginx/certs</span><br><span class="line">      - /var/run/docker.sock:/tmp/docker.sock:ro</span><br><span class="line">      - /root/nginx/nginx.conf:/etx/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在外部创建对应的挂载文件[宿主机]</span></span><br><span class="line">vim /root/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  auto;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout 300;</span><br><span class="line"></span><br><span class="line">    proxy_connect_timeout 300;</span><br><span class="line"></span><br><span class="line">    proxy_send_timeout 300;</span><br><span class="line"></span><br><span class="line">    proxy_read_timeout 300;</span><br><span class="line"></span><br><span class="line">    send_timeout 300;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br><span class="line">daemon off;</span><br></pre></td></tr></table></figure>

<h3 id="Review-2"><a href="#Review-2" class="headerlink" title="-Review"></a>-Review</h3><ul>
<li>如果程序正常, log也没有报错, 很可能是配置的原因</li>
</ul>
<h2 id="Q6mongodb插入数据报错"><a href="#Q6mongodb插入数据报错" class="headerlink" title="Q6mongodb插入数据报错"></a>Q6mongodb插入数据报错</h2><h3 id="Info-11"><a href="#Info-11" class="headerlink" title="-Info"></a>-Info</h3><p>在mongodb中插入数据报错<code>&#123;&#39;code&#39;: -1, &#39;msg&#39;: &#39;exception&#39;&#125;</code></p>
<h3 id="Analysis-10"><a href="#Analysis-10" class="headerlink" title="-Analysis"></a>-Analysis</h3><p>经过排查不是以下原因:</p>
<ul>
<li>插入字段类型与定义不符</li>
<li>缺少必要字段</li>
</ul>
<h3 id="Solution-9"><a href="#Solution-9" class="headerlink" title="-Solution"></a>-Solution</h3><p>在mongodb表中定义字段如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 群发任务</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AssistantBatchSend</span>(<span class="params">BaseModel</span>):</span></span><br><span class="line">    __table__ = <span class="string">&#x27;assistant_batch_send&#x27;</span></span><br><span class="line">    client_id = fields.IntField()     <span class="comment"># 创建人</span></span><br><span class="line">    task_id = fields.IntField()       <span class="comment"># 任务标识</span></span><br><span class="line">    message_list = fields.JsonField()  <span class="comment"># 发送内容</span></span><br><span class="line">    bot_username_list = fields.JsonField()  <span class="comment"># 机器人id</span></span><br></pre></td></tr></table></figure>

<p>在插入的数据中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">task_identification = <span class="built_in">int</span>(<span class="built_in">str</span>(self.user_info.client_id) + <span class="built_in">str</span>(<span class="built_in">int</span>(time.time()*<span class="number">1000000</span>))) <span class="comment"># 任务标识</span></span><br><span class="line">immediate_info = CM(Table.AssistantBatchSend)</span><br><span class="line">immediate_info.task_id = task_identification</span><br></pre></td></tr></table></figure>

<p>其中task_id定义为<code>intfiled</code>长度最大</p>
<p>为:</p>
<p>![image-20211011134300296](/Users/edy/Library/Application Support/typora-user-images/image-20211011134300296.png)</p>
<p>但是传入的长度为<code>22</code>, 应该把此字段定义为<code>StringField</code></p>
<h2 id="Q5SSH连接VCM断开"><a href="#Q5SSH连接VCM断开" class="headerlink" title="Q5SSH连接VCM断开"></a>Q5SSH连接VCM断开</h2><h3 id="Question"><a href="#Question" class="headerlink" title="-Question"></a>-Question</h3><p><strong>报错信息</strong></p>
<p><strong>info1</strong></p>
<p>client_loop: send disconnect: Broken pipe</p>
<p><strong>info2</strong></p>
<p>yum-config-manager client_loop: send disconnect: Broken pipe</p>
<h3 id="Analysis-11"><a href="#Analysis-11" class="headerlink" title="-Analysis"></a>-Analysis</h3><p><strong>info1</strong></p>
<p>终端连接服务器无响应且没用自动间隔连接配置<strong>VCM的问题</strong></p>
<h3 id="Solution-10"><a href="#Solution-10" class="headerlink" title="-Solution"></a>-Solution</h3><p><strong>info1</strong></p>
<p>修改<code>/etc/ssh/sshd_config</code>文件, 修改<code>ClientAliveInterval 120</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过每 300 秒（每 5 分钟）进行响应确认来保持连接。 我认为这个部分的数字可以是60或120。</span></span><br><span class="line">&gt;/etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#PermitUserEnvironment no</span></span><br><span class="line"><span class="comment">#Compression delayed</span></span><br><span class="line">ClientAliveInterval 60</span><br><span class="line"><span class="comment">#ClientAliveCountMax 3</span></span><br></pre></td></tr></table></figure>

<p>重新启动ssh服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure>

<p>或者在客户端进行更改<code>/etc/ssh/ssh_config</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 添加参数</span></span><br><span class="line">TCPKeepAlive yes</span><br><span class="line">ServerAliveInterval 60</span><br></pre></td></tr></table></figure>

<p><strong>info2</strong></p>
<p>配置<code>/etc/ssh/ssh_config</code>文件，增加以下内容即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line">				IPQoS=throughput</span><br><span class="line">        <span class="comment"># 断开时重试连接的次数</span></span><br><span class="line">        ServerAliveCountMax 5</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 每隔5秒自动发送一个空的请求以保持连接</span></span><br><span class="line">        ServerAliveInterval 5</span><br></pre></td></tr></table></figure>

<p>重新启动ssh服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure>

<h3 id="Review-3"><a href="#Review-3" class="headerlink" title="-Review"></a>-Review</h3><p><strong>1.在服务端进行修改</strong></p>
<p>在服务器端， 可以让服务器发送“心跳”信号测试提醒客户端进行保持连接</p>
<p>通过修改 sshd 的配置文件，能够让 SSH Server 发送“心跳”信号来维持持续连接，下面是设置的内容</p>
<p>打开服务器 <code>/etc/ssh/sshd_config</code>，我在最后增加一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ClientAliveInterval 60</span><br><span class="line">ClientAliveCountMax 1</span><br></pre></td></tr></table></figure>

<p>这样，SSH Server 每 60 秒就会自动发送一个信号给 Client，而等待 Client 回应，（注意：是服务器发心跳信号，不是客户端，这个有别于一些 FTP Client 发送的 KeepAlives 信号），如果客户端没有回应，会记录下来直到记录数超过 ClientAliveCountMax 的值时，才会断开连接。</p>
<p><strong>2.在客户端进行修改</strong></p>
<p>只要在/etc/ssh/ssh_config文件里加两个参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TCPKeepAlive yes</span><br><span class="line">ServerAliveInterval 60</span><br></pre></td></tr></table></figure>

<p>前一个参数是说要保持连接，后一个参数表示每过1分钟发一个数据包到服务器表示“我还活着”</p>
<p>如果你没有root权限，修改或者创建~/.ssh/ssh_config也是可以的</p>
<h2 id="Q4vim安装失败"><a href="#Q4vim安装失败" class="headerlink" title="Q4vim安装失败"></a>Q4vim安装失败</h2><h3 id="Question-1"><a href="#Question-1" class="headerlink" title="-Question"></a>-Question</h3><ol>
<li>在使用<code>vim</code>时发现报错<code>bash: vim: command not found</code></li>
</ol>
<h3 id="Analysis-12"><a href="#Analysis-12" class="headerlink" title="-Analysis"></a>-Analysis</h3><p>使用<code>cat /proc/version</code>查看系统版本</p>
<p>![image-20210928202753365](/Users/edy/Library/Application Support/typora-user-images/image-20210928202753365.png)</p>
<p>查看系统镜像中是否有<code>vim</code>, 发现<code>red hat 5</code>才有<code>vim</code></p>
<h3 id="Solution-11"><a href="#Solution-11" class="headerlink" title="-Solution"></a>-Solution</h3><ul>
<li>使用<code>apt install vim </code>安装<code>vim</code></li>
<li>发现<code>Unable to locate package vim</code></li>
</ul>
<p>![image-20210928203059115](/Users/edy/Library/Application Support/typora-user-images/image-20210928203059115.png)</p>
<ul>
<li>需要输入：<code>apt-get update</code>（作用是：同步 /etc/apt/sources.list 和 /etc/apt/sources.list.d 中列出的源的索引，这样才能获取到最新的软件包）</li>
<li>之后再输入<code>apt-get install vim</code>安装（非root用户登录，<code>root apt-get intall vim</code>）</li>
</ul>
<h3 id="Review-4"><a href="#Review-4" class="headerlink" title="-Review"></a>-Review</h3><p><strong>docker常用命令</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 修改了image内的文件后重启image</span></span><br><span class="line">docker restart image_id</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动container中的所有image</span></span><br><span class="line">docker start $(docker ps -a | awk &#x27;&#123; print $1&#125;&#x27; | tail -n +2)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止container中的所有image</span></span><br><span class="line">docker stop $(docker ps -a | awk &#x27;&#123; print $1&#125;&#x27; | tail -n +2)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除container中的所有image</span></span><br><span class="line">docker rm $(docker ps -a | awk &#x27;&#123; print $1&#125;&#x27; | tail -n +2)</span><br></pre></td></tr></table></figure>

<h2 id="Q3镜像部署失败"><a href="#Q3镜像部署失败" class="headerlink" title="Q3镜像部署失败"></a>Q3镜像部署失败</h2><h3 id="Question-2"><a href="#Question-2" class="headerlink" title="-Question"></a>-Question</h3><ol>
<li>部署对应的tag的时候出现<code>error</code></li>
</ol>
<p>![image-20210928155639667](/Users/edy/Library/Application Support/typora-user-images/image-20210928155639667.png)</p>
<ol start="2">
<li>有正在运行的container, 无法部署</li>
</ol>
<h3 id="Analysis-13"><a href="#Analysis-13" class="headerlink" title="-Analysis"></a>-Analysis</h3><ul>
<li>在部署的过程中存在正在运行的container</li>
<li>需要将所有的正在运行的container停下来或者删除所有正在运行的container中的image</li>
</ul>
<h3 id="Solution-12"><a href="#Solution-12" class="headerlink" title="-Solution"></a>-Solution</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动所有image</span></span><br><span class="line">docker start $(docker ps -a | awk <span class="string">&#x27;&#123; print $1&#125;&#x27;</span> | tail -n +2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止运行所有image</span></span><br><span class="line">docker stop $(docker ps -a | awk <span class="string">&#x27;&#123; print $1&#125;&#x27;</span> | tail -n +2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除container中的所有image</span></span><br><span class="line">docker rm $(docker ps -a | awk <span class="string">&#x27;&#123; print $1&#125;&#x27;</span> | tail -n +2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新部署</span></span><br><span class="line">sh deploy-debug.sh 1.0.0.65</span><br></pre></td></tr></table></figure>

<h3 id="Review-5"><a href="#Review-5" class="headerlink" title="-Review"></a>-Review</h3><ul>
<li>使用<code>docker ps -a</code>container中的所有image包括正在运行和未运行的</li>
<li><code>docker rmi -f &#39;docker iamges&#39; </code>删除的已经存在但未运行的image</li>
<li><code>docker rm image_id</code>删除正在运行的image</li>
</ul>
<h2 id="Q2镜像重启"><a href="#Q2镜像重启" class="headerlink" title="Q2镜像重启"></a>Q2镜像重启</h2><h3 id="Question-3"><a href="#Question-3" class="headerlink" title="-Question"></a>-Question</h3><ol>
<li>Docker ps 查看镜像状态显示<code>restart</code></li>
</ol>
<p>![image-20210928095953991](/Users/edy/Library/Application Support/typora-user-images/image-20210928095953991.png)</p>
<ol start="2">
<li>RabbitMQ只有生产者没有消费者</li>
</ol>
<h3 id="Analysis-14"><a href="#Analysis-14" class="headerlink" title="-Analysis"></a>-Analysis</h3><ol>
<li>部分服务器没起来</li>
</ol>
<h3 id="Solution-13"><a href="#Solution-13" class="headerlink" title="-Solution"></a>-Solution</h3><ol>
<li><code>docker logs -f image_name </code>查看对应的image日志</li>
<li>找到报错信息</li>
</ol>
<p>![image-20210928095931103](/Users/edy/Library/Application Support/typora-user-images/image-20210928095931103.png)</p>
<p><code>cerely can&#39;t find module name &#39;component.task.member_change_task.component&#39;</code></p>
<p><strong>cerely配置错误</strong></p>
<h3 id="Review-6"><a href="#Review-6" class="headerlink" title="-Review"></a>-Review</h3><ul>
<li>docker logs -f </li>
<li>command r 搜索已经使用的order</li>
</ul>
<h2 id="Q1磁盘溢出"><a href="#Q1磁盘溢出" class="headerlink" title="Q1磁盘溢出"></a>Q1磁盘溢出</h2><h3 id="Question-4"><a href="#Question-4" class="headerlink" title="-Question"></a>-<strong>Question</strong></h3><ol>
<li>mongodb连接失败报错<ul>
<li><code>failed to read 4 bytes from socket within 300000 milliseconds</code></li>
</ul>
</li>
<li>紫豆超管后台登陆失败<ul>
<li><code>login 无响应</code></li>
</ul>
</li>
<li>机器人正常但不可用<ul>
<li><code>机器人上报heartbeat给服务器但服务器不callback</code></li>
</ul>
</li>
</ol>
<h3 id="Analysis-15"><a href="#Analysis-15" class="headerlink" title="-Analysis"></a>-Analysis</h3><ol>
<li>登陆紫豆服务器<code>ssh root@ip</code><ul>
<li>报错显示disk overflower</li>
</ul>
</li>
<li><code>df -h</code>查看disk存储情况</li>
</ol>
<p><img src="file:///Users/edy/Library/Application%20Support/typora-user-images/image-20210926170428181.png?lastModify=1632625187" alt="image-20210926170428181"></p>
<h3 id="Solution-14"><a href="#Solution-14" class="headerlink" title="-Solution"></a><strong>-Solution</strong></h3><ol>
<li><p>删除不用的container|容器修剪</p>
<ul>
<li>PRO环境具有一定的风险</li>
<li><code>docker system prune</code>  <code>docker container prune</code></li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker container prune</span><br><span class="line">WARNING! This will remove all stopped containers.</span><br><span class="line">Are you sure you want to continue? [y/N] y</span><br><span class="line">Deleted Containers:</span><br><span class="line"><span class="number">4</span>a7f7eebae0f63178aff7eb0aa39cd3f0627a203ab2df258c1a00b456cf20063</span><br><span class="line">f98f9c2aa1eaf727e4ec9c0283bc7d4aa4762fbdba7f26191f26c97f64090360</span><br><span class="line"></span><br><span class="line">Total reclaimed space: <span class="number">212</span> B</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除镜像[优先选择]</strong></p>
<ul>
<li><pre><code class="bahs">docker rmi -f `docker images`
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   - docker image需&#96;</span><br><span class="line"></span><br><span class="line">   - **删除已经存在的镜像「不包括正在运行的」**</span><br><span class="line"></span><br><span class="line">### -Review</span><br><span class="line"></span><br><span class="line">**docker rmi :** 删除本地一个或多个镜像。</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;docker</span><br><span class="line">docker rmi [OPTIONS] IMAGE [IMAGE...]</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ol>
<p><strong>OPTIONS说明：</strong></p>
<ul>
<li>**-f :**强制删除；</li>
<li>**–no-prune :**不移除该镜像的过程镜像，默认移除；</li>
</ul>
<hr>
<p><strong>docker prune 命令</strong></p>
<p>prune 命令用来删除不再使用的 docker 对象。</p>
<p>删除所有未被 tag 标记和未被容器使用的镜像:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker image prune</span><br><span class="line">WARNING! This will remove all dangling images.</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span>? [y/N] y</span><br></pre></td></tr></table></figure>

<p>删除所有未被容器使用的镜像:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker image prune -a</span><br></pre></td></tr></table></figure>

<p>删除所有停止运行的容器:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker container prune</span><br></pre></td></tr></table></figure>

<p>删除所有未被挂载的卷:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker volume prune</span><br></pre></td></tr></table></figure>

<p>删除所有网络:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker network prune</span><br></pre></td></tr></table></figure>

<p>删除 docker 所有资源:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker system prune</span><br></pre></td></tr></table></figure>

<p><strong>docker system prune</strong> 命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This will remove:</span><br><span class="line">        - all stopped containers</span><br><span class="line">        - all networks not used by at least one container</span><br><span class="line">        - all dangling images</span><br><span class="line">        - all dangling build cache</span><br></pre></td></tr></table></figure>

<p>删除停止的容器、删除所有未被容器使用的网络、删除所有none的镜像。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/10/07/Question/" data-id="ckugvc4kn0000wwf5bh7l07c6" data-title="Question" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Drink/" rel="tag">Drink</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-My-Project" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/07/My-Project/" class="article-date">
  <time class="dt-published" datetime="2021-10-07T11:34:45.000Z" itemprop="datePublished">2021-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/07/My-Project/">My-Project</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><h3 id="详细对比"><a href="#详细对比" class="headerlink" title="详细对比"></a>详细对比</h3><img src="https://pic1.zhimg.com/v2-8dd72a44b6c9936bcf5e03ea21028eb3_r.jpg?source=1940ef5c" alt="preview" style="zoom:200%;" />

<h3 id="轻量应用服务器"><a href="#轻量应用服务器" class="headerlink" title="轻量应用服务器"></a>轻量应用服务器</h3><p><strong>单机类应用</strong></p>
<ul>
<li>个人网站</li>
<li>博客</li>
<li>云端测试等轻量级应用<ul>
<li>技术小白</li>
<li>不想搭建云服务器环境</li>
<li>没有云平台内网需求</li>
<li>本身自带运行环境</li>
</ul>
</li>
<li>特点<ul>
<li>轻运维、开箱即用</li>
</ul>
</li>
</ul>
<h3 id="云服务器CVM"><a href="#云服务器CVM" class="headerlink" title="云服务器CVM"></a>云服务器CVM</h3><p><strong>专业级应用</strong></p>
<ul>
<li>集群</li>
<li>高可用应用</li>
<li>特点<ul>
<li>高并发网站</li>
<li>视频编解码</li>
<li>大型游戏</li>
<li>复杂分布式集群应用</li>
</ul>
</li>
</ul>
<h2 id="终端连接CVM"><a href="#终端连接CVM" class="headerlink" title="终端连接CVM"></a>终端连接CVM</h2><ol>
<li><strong>CVM生成hash密钥</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在云服务器配置中生成密钥rsa</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 需要注意生成的后只能绑定已经关机的实例</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改rsa证书权限</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将在CVM生成的pem证书文件移动到指定目录下</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在次目录下运行</span></span><br><span class="line">chomd 400 &lt;target_rsa.pem&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>item远程链接服务器</strong></li>
</ol>
<p><strong>配置信息如下</strong></p>
<table>
<thead>
<tr>
<th>Profiles</th>
<th>-</th>
<th>order</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>job</td>
<td></td>
</tr>
<tr>
<td>command</td>
<td>command</td>
<td><strong>ssh -i order</strong></td>
</tr>
<tr>
<td>working directory</td>
<td>home directory</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>ssh order<code>ssh [-i login_name] [-p port] [user@]hostname</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i ~/.ssh/drink_rsa.pem root@110.40.240.39</span><br></pre></td></tr></table></figure>

<ul>
<li>ssh -i :ssh命令, 指定用户登录<ul>
<li> [-i identity_file]</li>
<li> &lt;必须指定&gt;</li>
</ul>
</li>
<li>~/.ssh/drink_rsa.pem : cvm生成的rsa证书</li>
<li>root : cvm主机用户</li>
<li>110.40.240.39 : cvm公网ip地址</li>
</ul>
<h3 id="ssh操作"><a href="#ssh操作" class="headerlink" title="ssh操作"></a>ssh操作</h3><p> ssh命令用于远程登陆上Linux主机</p>
<p>ssh默认port: 22</p>
<p>不指定用户：服务器</p>
<blockquote>
<p>ssh 192.168.0.11网络</p>
</blockquote>
<p>指定用户：</p>
<blockquote>
<p>ssh -l root 192.168.0.11ssh</p>
</blockquote>
<blockquote>
<p>ssh <a href="mailto:&#x72;&#111;&#111;&#116;&#x40;&#x31;&#57;&#50;&#46;&#49;&#54;&#56;&#46;&#x30;&#46;&#49;&#49;&#116;&#x63;&#x70;">&#x72;&#111;&#111;&#116;&#x40;&#x31;&#57;&#50;&#46;&#49;&#54;&#56;&#46;&#x30;&#46;&#49;&#49;&#116;&#x63;&#x70;</a><br>若是修改过ssh登陆端口的能够：工具</p>
</blockquote>
<blockquote>
<p>ssh -p 12333 192.168.0.11spa</p>
</blockquote>
<blockquote>
<p>ssh -l root -p 12333 216.230.230.114操作系统</p>
</blockquote>
<blockquote>
<p>ssh -p 12333 <a href="mailto:&#x72;&#111;&#111;&#x74;&#x40;&#50;&#49;&#54;&#46;&#x32;&#51;&#48;&#46;&#x32;&#51;&#48;&#x2e;&#x31;&#x31;&#52;">&#x72;&#111;&#111;&#x74;&#x40;&#50;&#49;&#54;&#46;&#x32;&#51;&#48;&#46;&#x32;&#51;&#48;&#x2e;&#x31;&#x31;&#52;</a></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ssh [-b bind_address] [-c cipher_spec]</span><br><span class="line">[-D [bind_address:]port] [-E log_file] </span><br><span class="line">[-e escape_char] [-F configfile] </span><br><span class="line">[-I pkcs11] [-i identity_file]</span><br><span class="line">[-J [user@]host[:port]] [-L address]</span><br><span class="line">[-l login_name] [-m mac_spec]</span><br><span class="line">[-O ctl_cmd] [-o option] [-p port]</span><br><span class="line">[-Q query_option] [-R address]</span><br><span class="line">[-S ctl_path] [-W host:port] </span><br><span class="line">[-wlocal_tun[:remote_tun]][user@]hostname [command]</span><br></pre></td></tr></table></figure>

<p><strong>默认配置文件和SSH端口</strong></p>
<p>/etc/ssh/sshd_config：OpenSSH服务器配置文件；</p>
<p>/etc/ssh/ssh_config：OpenSSH客户端配置文件；</p>
<p>~/.ssh/：用户SSH配置目录；</p>
<p>~/.ssh/authorized_keys：用户公钥（RSA或DSA）；</p>
<p>/etc/nologin：若是存在这个文件，sshd会拒绝除root用户外的其它用户登陆；</p>
<p>/etc/hosts.allow和/etc/hosts.deny：定义tcp-wrapper执行的访问控制列表；</p>
<ol start="3">
<li><strong>mac终端连接(需要CVM密码)</strong></li>
</ol>
<ul>
<li>打开mac终端</li>
<li>输入<code>chmod 400 &lt;CVM-ssh-的绝对路径&gt;</code></li>
<li>输入<code>ssh root@CVM.ip</code></li>
<li>输入<code>CVM密码</code></li>
</ul>
<hr>
<ul>
<li>打开mac终端</li>
<li>输入<code>chmod 400 &lt;CVM-ssh-的绝对路径&gt;</code></li>
<li>输入<code>ssh -i ~/.ssh/id_rsa root@CVM.ip</code></li>
<li><strong>(无需密码即可)</strong></li>
</ul>
<hr>
<ul>
<li>打开mac终端</li>
<li>输入<code>chmod 400 &lt;CVM-ssh-的绝对路径&gt;</code></li>
<li>输入<code>ssh -l root -p 22 CVM.ip</code></li>
<li><strong>(VCM密码)</strong></li>
</ul>
<h2 id="0-Linux基础"><a href="#0-Linux基础" class="headerlink" title="0.Linux基础"></a>0.Linux基础</h2><p><strong>查看系统内核</strong></p>
<p><code>uname -r</code></p>
<p><strong>查看系统版本</strong></p>
<p><code>cat /etc/os-release</code></p>
<p><strong>用户与主机名</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> [root@localhost]</span></span><br><span class="line">root: 当前登陆的用户</span><br><span class="line">localhost: 当前的主机名</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改主机名</span></span><br><span class="line">1.临时修改</span><br><span class="line">sudo hostname &lt;new-hostname&gt;</span><br><span class="line"></span><br><span class="line">2.永久修改 命令修改|配置修改</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> sudo hostnamectl set-hostname &lt;newhostname&gt;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> vim手动修改/etc/hostname文件</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前主机名</span></span><br><span class="line">hostnamectl</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改之后重启生效</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<p><strong>退出|关机|重启linux</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">退出:</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">关机命令：</span><br><span class="line">1、halt 立刻关机</span><br><span class="line">2、poweroff 立刻关机</span><br><span class="line">3、shutdown -h now 立刻关机(root用户使用)</span><br><span class="line">4、shutdown -h 10 10分钟后自动关机 如果是通过shutdown命令设置关机的话，可以用shutdown -c命令取消重启</span><br><span class="line">5、init0 停机或者关机</span><br><span class="line"></span><br><span class="line">重启命令：</span><br><span class="line">1、reboot</span><br><span class="line">2、shutdown -r now 立刻重启(root用户使用)</span><br><span class="line">3、shutdown -r 10 过10分钟自动重启(root用户使用)</span><br><span class="line">4、init6 重启</span><br><span class="line"></span><br><span class="line">init一共分为7个级别，这7个级别的所代表的含义如下</span><br><span class="line">0：停机或者关机（千万不能将initdefault设置为0）</span><br><span class="line">1：单用户模式，只root用户进行维护</span><br><span class="line">2：多用户模式，不能使用NFS(Net File System)</span><br><span class="line">3：完全多用户模式（标准的运行级别）</span><br><span class="line">4：安全模式</span><br><span class="line">5：图形化（即图形界面）</span><br><span class="line">6：重启（千万不要把initdefault设置为6）</span><br></pre></td></tr></table></figure>

<h3 id="yum命令"><a href="#yum命令" class="headerlink" title="yum命令"></a>yum命令</h3><blockquote>
<p>yum（ Yellow dog Updater, Modified）是一个在 Fedora 和 RedHat 以及 SUSE 中的 Shell 前端软件包管理器。</p>
</blockquote>
<p>基于 RPM 包管理，能够从指定的服务器自动下载 RPM 包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。</p>
<h3 id="SSH登陆"><a href="#SSH登陆" class="headerlink" title="SSH登陆"></a>SSH登陆</h3><ul>
<li>从CVM中获取<code>rsa_pub.pem</code></li>
<li>将<code>rsa_pub.pem</code>保存在client的<code>./ssh</code>目录下</li>
<li>从client<code>./ssh</code>中获取<code>rsa_pub</code></li>
<li>将<code>rsa_pub</code>中的内容放在CVM的<code>/root/.ssh/authorized_keys</code>中</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> client</span> </span><br><span class="line">ssh root@ip</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ori</span></span><br><span class="line">ssh -i ~/.ssh/rsa_CVM.pub root@CVM.ip</span><br></pre></td></tr></table></figure>

<h4 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h4><p><code>/root/.ssh/authorized_keys</code></p>
<p><strong>远程主机将用户的公钥，保存在此</strong></p>
<ul>
<li>存放访问的client的pub_rsa</li>
</ul>
<hr>
<p><code>/etc/ssh/sshd_config</code></p>
<p><code>/etc/ssh/ssh_config</code></p>
<ul>
<li><p>ssh_config是针对客户端的配置文件</p>
</li>
<li><p>sshd_config是针对服务器的配置文件</p>
</li>
</ul>
<p><strong>ssh服务配置文件</strong></p>
<p><strong>文件修改后使用:</strong></p>
<p><code>service sshd restart </code>保存</p>
<h2 id="1-安装docker"><a href="#1-安装docker" class="headerlink" title="1.安装docker"></a>1.安装docker</h2><p>1⃣️卸载旧版本docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$  sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>

<p>2⃣️安装yum</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils</span><br></pre></td></tr></table></figure>

<p>3⃣️设置镜像仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<p>4⃣️更新yum索引和cache</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure>

<p>5⃣️安装docker</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli container.io</span><br></pre></td></tr></table></figure>

<p>6⃣️启动docker</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>

<p>7⃣️查看docker配置|版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure>

<p>8⃣️启动hello world</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hell-world</span><br></pre></td></tr></table></figure>

<p>9⃣️查看docker的images</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<h3 id="阿里云镜像加速"><a href="#阿里云镜像加速" class="headerlink" title="阿里云镜像加速"></a>阿里云镜像加速</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/10/07/My-Project/" data-id="ckugv58gh0000ysf50hvq0wbm" data-title="My-Project" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Drink/" rel="tag">Drink</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-我的学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/09/25/%E6%88%91%E7%9A%84%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2021-09-25T15:53:35.000Z" itemprop="datePublished">2021-09-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/09/25/%E6%88%91%E7%9A%84%E5%AD%A6%E4%B9%A0/">我的学习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="阅读书籍"><a href="#阅读书籍" class="headerlink" title="阅读书籍"></a>阅读书籍</h2><h3 id="框架思维"><a href="#框架思维" class="headerlink" title="框架思维"></a>框架思维</h3><ul>
<li><input disabled="" type="checkbox"> 数据密集型应用</li>
</ul>
<h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><ul>
<li><input disabled="" type="checkbox"> </li>
</ul>
<h3 id="底层源码"><a href="#底层源码" class="headerlink" title="底层源码"></a>底层源码</h3><ul>
<li><input disabled="" type="checkbox"> </li>
</ul>
<h2 id="目前学习"><a href="#目前学习" class="headerlink" title="目前学习"></a>目前学习</h2><h3 id="网络基础原理"><a href="#网络基础原理" class="headerlink" title="网络基础原理"></a>网络基础原理</h3><p><strong>source: wait</strong></p>
<ul>
<li><input disabled="" type="checkbox"> 网络基础原理</li>
</ul>
<h3 id="Docker基础"><a href="#Docker基础" class="headerlink" title="Docker基础"></a>Docker基础</h3><p><strong>source：b站|狂神</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Docker基本概念</li>
<li><input disabled="" type="checkbox"> Docker基本语法</li>
<li><input disabled="" type="checkbox"> Docker进阶</li>
<li><input disabled="" type="checkbox"> Docker实践操作</li>
<li><input disabled="" type="checkbox"> Docker复盘</li>
</ul>
<h3 id="Nginx基础"><a href="#Nginx基础" class="headerlink" title="Nginx基础"></a>Nginx基础</h3><p><strong>source：b站|狂神</strong></p>
<ul>
<li><input disabled="" type="checkbox"> nginx基本概念</li>
<li><input disabled="" type="checkbox"> nginx基本语法</li>
<li><input disabled="" type="checkbox"> nginx进阶</li>
<li><input disabled="" type="checkbox"> nginx实践操作</li>
<li><input disabled="" type="checkbox"> nginx复盘</li>
</ul>
<h2 id="计划学习"><a href="#计划学习" class="headerlink" title="计划学习"></a>计划学习</h2><ul>
<li><input disabled="" type="checkbox"> Nginx</li>
<li><input disabled="" type="checkbox"> 网络基础</li>
<li><input disabled="" type="checkbox"> Celery</li>
<li><input disabled="" type="checkbox"> RabbitMQ</li>
<li><input disabled="" type="checkbox"> Docker</li>
<li><input disabled="" type="checkbox"> Mysql</li>
<li><input disabled="" type="checkbox"> ElasticSearch</li>
<li><input disabled="" type="checkbox"> Hadoop</li>
</ul>
<h2 id="已经学习"><a href="#已经学习" class="headerlink" title="已经学习"></a>已经学习</h2><h3 id="Mongodb"><a href="#Mongodb" class="headerlink" title="Mongodb"></a>Mongodb</h3><p><strong>source：b站|黑马</strong></p>
<ul>
<li><input checked="" disabled="" type="checkbox"> mongodb基本概念</li>
<li><input checked="" disabled="" type="checkbox"> mongodb基本语法</li>
<li><input disabled="" type="checkbox"> mongodb进阶</li>
<li><input disabled="" type="checkbox"> mongodb实践操作</li>
<li><input disabled="" type="checkbox"> mongodb复盘</li>
</ul>
<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><p><strong>source：b站|狂神</strong></p>
<ul>
<li><input checked="" disabled="" type="checkbox"> redis基本概念</li>
<li><input checked="" disabled="" type="checkbox"> redis基本语法</li>
<li><input disabled="" type="checkbox"> redis进阶</li>
<li><input disabled="" type="checkbox"> redis实践操作</li>
<li><input disabled="" type="checkbox"> redis复盘</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/09/25/%E6%88%91%E7%9A%84%E5%AD%A6%E4%B9%A0/" data-id="cktzzenlq0000i0f58tkx7ytw" data-title="我的学习" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/825%E8%AE%A1%E5%88%92/" rel="tag">825计划</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-数据库索引原理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2021-08-29T05:41:59.000Z" itemprop="datePublished">2021-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86/">数据库索引原理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="数据库索引原理"><a href="#数据库索引原理" class="headerlink" title="数据库索引原理"></a>数据库索引原理</h2><h3 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a><strong>推荐阅读</strong></h3><p><a target="_blank" rel="noopener" href="https://liuchenyang0515.blog.csdn.net/article/details/118004118"><strong>MySQL索引——入门进阶必备</strong></a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34115899/article/details/118308424"><strong>MySQL中B+树索引的应用场景大全</strong></a></p>
<hr>
<p><a target="_blank" rel="noopener" href="https://haicoder.net/mongodb/mongodb-index-principle.html"><strong>MongoDB索引原理</strong></a></p>
<hr>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/348074129"><strong>关系型数据库和非关系型数据库之间的区别</strong></a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1784274"><strong>非关系型数据库（NOSQL）和关系型数据库（SQL）区别详解</strong></a></p>
<hr>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lh_hebine/article/details/99051646"><strong>什么是事务？事务的四大特性是什么？</strong></a></p>
<p>B+树索引是B+树在数据库中的一种实现，是最常见也是数据库中使用最为频繁的一种索引。B+树中的B代表平衡（balance），而不是二叉（binary），因为B+树是从最早的平衡二叉树演化而来的。在讲B+树之前必须先了解二叉查找树、平衡二叉树（AVLTree）和平衡多路查找树（B-Tree），B+树即由这些树逐步优化而来。</p>
<h3 id="二叉查找树"><a href="#二叉查找树" class="headerlink" title="二叉查找树"></a>二叉查找树</h3><p>二叉树具有以下性质：左子树的键值小于根的键值，右子树的键值大于根的键值。<br>如下图所示就是一棵二叉查找树，</p>
<p><img src="https://img-blog.csdn.net/20160202203355523" alt="索引"></p>
<p>对该二叉树的节点进行查找发现深度为1的节点的查找次数为1，深度为2的查找次数为2，深度为n的节点的查找次数为n，因此其平均查找次数为 (1+2+2+3+3+3) / 6 = 2.3次</p>
<p>二叉查找树可以任意地构造，同样是2,3,5,6,7,8这六个数字，也可以按照下图的方式来构造：</p>
<p><img src="https://img-blog.csdn.net/20160202203448944" alt="索引"></p>
<p>但是这棵二叉树的查询效率就低了。因此若想二叉树的查询效率尽可能高，需要这棵二叉树是平衡的，从而引出新的定义——平衡二叉树，或称AVL树。</p>
<h3 id="平衡二叉树（AVL-Tree）"><a href="#平衡二叉树（AVL-Tree）" class="headerlink" title="平衡二叉树（AVL Tree）"></a>平衡二叉树（AVL Tree）</h3><p>平衡二叉树（AVL树）在符合二叉查找树的条件下，还满足任何节点的两个子树的高度最大差为1。下面的两张图片，左边是AVL树，它的任何节点的两个子树的高度差&lt;=1；右边的不是AVL树，其根节点的左子树高度为3，而右子树高度为1；</p>
<p><img src="https://img-blog.csdn.net/20160202203554663" alt="索引"></p>
<p>如果在AVL树中进行插入或删除节点，可能导致AVL树失去平衡，这种失去平衡的二叉树可以概括为四种姿态：LL（左左）、RR（右右）、LR（左右）、RL（右左）。它们的示意图如下：</p>
<p><img src="https://img-blog.csdn.net/20160202203648148" alt="索引"></p>
<p>这四种失去平衡的姿态都有各自的定义：</p>
<ul>
<li><p><strong>LL</strong>：LeftLeft，也称“左左”。插入或删除一个节点后，根节点的左孩子（Left Child）的左孩子（Left Child）还有非空节点，导致根节点的左子树高度比右子树高度高2，AVL树失去平衡。</p>
</li>
<li><p><strong>RR</strong>：RightRight，也称“右右”。插入或删除一个节点后，根节点的右孩子（Right Child）的右孩子（Right Child）还有非空节点，导致根节点的右子树高度比左子树高度高2，AVL树失去平衡。</p>
</li>
<li><p><strong>LR</strong>：LeftRight，也称“左右”。插入或删除一个节点后，根节点的左孩子（Left Child）的右孩子（Right Child）还有非空节点，导致根节点的左子树高度比右子树高度高2，AVL树失去平衡。</p>
</li>
<li><p><strong>RL</strong>：RightLeft，也称“右左”。插入或删除一个节点后，根节点的右孩子（Right Child）的左孩子（Left Child）还有非空节点，导致根节点的右子树高度比左子树高度高2，AVL树失去平衡。</p>
</li>
</ul>
<p>AVL树失去平衡之后，可以通过旋转使其恢复平衡。下面分别介绍四种失去平衡的情况下对应的旋转方法。</p>
<p>LL的旋转。LL失去平衡的情况下，可以通过一次旋转让AVL树恢复平衡。步骤如下：</p>
<ol>
<li>将根节点的左孩子作为新根节点。</li>
<li>将新根节点的右孩子作为原根节点的左孩子。</li>
<li>将原根节点作为新根节点的右孩子。</li>
</ol>
<p><strong>LL旋转示意图如下：</strong></p>
<p><img src="https://img-blog.csdn.net/20160202204113994" alt="索引"></p>
<p><strong>RR的旋转：</strong>RR失去平衡的情况下，旋转方法与LL旋转对称，步骤如下：</p>
<ol>
<li>将根节点的右孩子作为新根节点。</li>
<li>将新根节点的左孩子作为原根节点的右孩子。</li>
<li>将原根节点作为新根节点的左孩子。</li>
</ol>
<p><strong>RR旋转示意图如下：</strong></p>
<p><img src="https://img-blog.csdn.net/20160202204207963" alt="索引"></p>
<p>LR的旋转：LR失去平衡的情况下，需要进行两次旋转，步骤如下：</p>
<ol>
<li>围绕根节点的左孩子进行RR旋转。</li>
<li>围绕根节点进行LL旋转。</li>
</ol>
<p><strong>LR的旋转示意图如下：</strong></p>
<p><img src="https://img-blog.csdn.net/20160202204257369" alt="索引"></p>
<p>RL的旋转：RL失去平衡的情况下也需要进行两次旋转，旋转方法与LR旋转对称，步骤如下：</p>
<ol>
<li>围绕根节点的右孩子进行LL旋转。</li>
<li>围绕根节点进行RR旋转。</li>
</ol>
<p><strong>RL的旋转示意图如下：</strong></p>
<p><img src="https://img-blog.csdn.net/20160202204331073" alt="索引"></p>
<h3 id="平衡多路查找树（B-Tree）"><a href="#平衡多路查找树（B-Tree）" class="headerlink" title="平衡多路查找树（B-Tree）"></a>平衡多路查找树（B-Tree）</h3><p>B-Tree是为磁盘等外存储设备设计的一种平衡查找树。因此在讲B-Tree之前先了解下磁盘的相关知识。</p>
<p>系统从磁盘读取数据到内存时是以磁盘块（block）为基本单位的，位于同一个磁盘块中的数据会被一次性读取出来，而不是需要什么取什么。</p>
<p>InnoDB存储引擎中有页（Page）的概念，页是其磁盘管理的最小单位。InnoDB存储引擎中默认每个页的大小为16KB，可通过参数innodb_page_size将页的大小设置为4K、8K、16K，在MySQL中可通过如下命令查看页的大小：</p>
<p><code>mysql&gt; show variables like &#39;innodb_page_size&#39;;</code></p>
<p>而系统一个磁盘块的存储空间往往没有这么大，因此InnoDB每次申请磁盘空间时都会是若干地址连续磁盘块来达到页的大小16KB。InnoDB在把磁盘数据读入到磁盘时会以页为基本单位，在查询数据时如果一个页中的每条数据都能有助于定位数据记录的位置，这将会减少磁盘I/O次数，提高查询效率。</p>
<p>B-Tree结构的数据可以让系统高效的找到数据所在的磁盘块。为了描述B-Tree，首先定义一条记录为一个二元组[key, data] ，key为记录的键值，对应表中的主键值，data为一行记录中除主键外的数据。对于不同的记录，key值互不相同。</p>
<p>一棵m阶的B-Tree有如下特性：</p>
<ol>
<li>每个节点最多有m个孩子。</li>
<li>除了根节点和叶子节点外，其它每个节点至少有Ceil(m/2)个孩子。</li>
<li>若根节点不是叶子节点，则至少有2个孩子</li>
<li>所有叶子节点都在同一层，且不包含其它关键字信息</li>
<li>每个非终端节点包含n个关键字信息（P0,P1,…Pn, k1,…kn）</li>
<li>关键字的个数n满足：ceil(m/2)-1 &lt;= n &lt;= m-1</li>
<li>ki(i=1,…n)为关键字，且关键字升序排序。</li>
<li>Pi(i=1,…n)为指向子树根节点的指针。P(i-1)指向的子树的所有节点关键字均小于ki，但都大于k(i-1)</li>
</ol>
<p>B-Tree中的每个节点根据实际情况可以包含大量的关键字信息和分支，如下图所示为一个3阶的B-Tree：</p>
<p><img src="https://img-blog.csdn.net/20160202204827368" alt="索引"></p>
<p>每个节点占用一个盘块的磁盘空间，一个节点上有两个升序排序的关键字和三个指向子树根节点的指针，指针存储的是子节点所在磁盘块的地址。两个关键词划分成的三个范围域对应三个指针指向的子树的数据的范围域。以根节点为例，关键字为17和35，P1指针指向的子树的数据范围为小于17，P2指针指向的子树的数据范围为17~35，P3指针指向的子树的数据范围为大于35。</p>
<p><strong>模拟查找关键字29的过程：</strong></p>
<ol>
<li>根据根节点找到磁盘块1，读入内存。【磁盘I/O操作第1次】</li>
<li>比较关键字29在区间（17,35），找到磁盘块1的指针P2。</li>
<li>根据P2指针找到磁盘块3，读入内存。【磁盘I/O操作第2次】</li>
<li>比较关键字29在区间（26,30），找到磁盘块3的指针P2。</li>
<li>根据P2指针找到磁盘块8，读入内存。【磁盘I/O操作第3次】</li>
<li>在磁盘块8中的关键字列表中找到关键字29。</li>
</ol>
<p>分析上面过程，发现需要3次磁盘I/O操作，和3次内存查找操作。由于内存中的关键字是一个有序表结构，可以利用二分法查找提高效率。而3次磁盘I/O操作是影响整个B-Tree查找效率的决定因素。B-Tree相对于AVLTree缩减了节点个数，使每次磁盘I/O取到内存的数据都发挥了作用，从而提高了查询效率。</p>
<h3 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B+Tree"></a>B+Tree</h3><p>B+Tree是在B-Tree基础上的一种优化，使其更适合实现外存储索引结构，InnoDB存储引擎就是用B+Tree实现其索引结构。</p>
<p>从上一节中的B-Tree结构图中可以看到每个节点中不仅包含数据的key值，还有data值。而每一个页的存储空间是有限的，如果data数据较大时将会导致每个节点（即一个页）能存储的key的数量很小，当存储的数据量很大时同样会导致B-Tree的深度较大，增大查询时的磁盘I/O次数，进而影响查询效率。在B+Tree中，所有数据记录节点都是按照键值大小顺序存放在同一层的叶子节点上，而非叶子节点上只存储key值信息，这样可以大大加大每个节点存储的key值数量，降低B+Tree的高度。</p>
<p>B+Tree相对于B-Tree有几点不同：</p>
<ol>
<li>非叶子节点只存储键值信息。</li>
<li>所有叶子节点之间都有一个链指针。</li>
<li>数据记录都存放在叶子节点中。</li>
</ol>
<p>将上一节中的B-Tree优化，由于B+Tree的非叶子节点只存储键值信息，假设每个磁盘块能存储4个键值及指针信息，则变成B+Tree后其结构如下图所示：</p>
<p><img src="https://img-blog.csdn.net/20160202205105560" alt="索引"></p>
<p>通常在B+Tree上有两个头指针，一个指向根节点，另一个指向关键字最小的叶子节点，而且所有叶子节点（即数据节点）之间是一种链式环结构。因此可以对B+Tree进行两种查找运算：一种是对于主键的范围查找和分页查找，另一种是从根节点开始，进行随机查找。</p>
<p>可能上面例子中只有22条数据记录，看不出B+Tree的优点，下面做一个推算：</p>
<p>InnoDB存储引擎中页的大小为16KB，一般表的主键类型为INT（占用4个字节）或BIGINT（占用8个字节），指针类型也一般为4或8个字节，也就是说一个页（B+Tree中的一个节点）中大概存储16KB/(8B+8B)=1K个键值（因为是估值，为方便计算，这里的K取值为10^3^)。也就是说一个深度为3的B+Tree索引可以维护10^3 * 10^3 * 10^3 = 10亿 条记录。</p>
<p>实际情况中每个节点可能不能填充满，因此在数据库中，B+Tree的高度一般都在2<del>4层。MySQL的InnoDB存储引擎在设计时是将根节点常驻内存的，也就是说查找某一键值的行记录时最多只需要1</del>3次磁盘I/O操作。</p>
<p>数据库中的B+Tree索引可以分为聚集索引（clustered index）和辅助索引（secondary index）。上面的B+Tree示例图在数据库中的实现即为聚集索引，聚集索引的B+Tree中的叶子节点存放的是整张表的行记录数据。辅助索引与聚集索引的区别在于辅助索引的叶子节点并不包含行记录的全部数据，而是存储相应行数据的聚集索引键，即主键。当通过辅助索引来查询数据时，InnoDB存储引擎会遍历辅助索引找到主键，然后再通过主键在聚集索引中找到完整的行记录数据。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/08/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86/" data-id="ckswtcg150001kcf5gvrl6l3n" data-title="数据库索引原理" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DataBase/" rel="tag">DataBase</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Mongodb" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/28/Mongodb/" class="article-date">
  <time class="dt-published" datetime="2021-08-28T03:38:04.000Z" itemprop="datePublished">2021-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/28/Mongodb/">Mongodb</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Mongodb"><a href="#Mongodb" class="headerlink" title="Mongodb"></a>Mongodb</h1><h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><p><a target="_blank" rel="noopener" href="https://www.codenong.com/6452021/"><strong>mongodb时间戳</strong></a></p>
<h2 id="id"><a href="#id" class="headerlink" title="_id"></a>_id</h2><p>打开 MongoDB 数据库中的任何一个文档，你会注意到文档中有一个 _id 字段，实际上，ObjectId 或 _id 是每个 MongoDB 文档中都存在的字段。</p>
<h3 id="bjectId-的结构"><a href="#bjectId-的结构" class="headerlink" title="bjectId 的结构"></a>bjectId 的结构</h3><p>这些是 _id 的一些主要特征的摘要：</p>
<ul>
<li>_id 是集合中文档的主键，用于区分文档（记录）。</li>
<li>_id自动编入索引。指定 { _id: } 的查找将 _id 索引作为其指南。</li>
<li>默认情况下，_id 字段的类型为 ObjectID，是 MongoDB 的 BSON 类型之一。如果需要，用户还可以将 _id 覆盖为 ObjectID 以外的其他内容。</li>
</ul>
<p>ObjectID 长度为 12 字节，由几个 2-4 字节的链组成。每个链代表并指定文档身份的具体内容。以下的值构成了完整的 12 字节组合：</p>
<p><strong>一个字节两个字符</strong></p>
<ul>
<li>一个 4 字节的值，表示自 Unix 纪元以来的秒数–&gt;8位16进制</li>
<li>一个 3 字节的机器标识符</li>
<li>一个 2 字节的进程 ID</li>
<li>一个 3 字节的计数器，以随机值开始</li>
</ul>
<p><img src="http://www.navicat.com.cn/link/Blog/Image/2019/20190326/_id.png" alt="img"></p>
<p>通常，你不必担心要如何生成 ObjectID。如果文档尚未分配 _id 值，MongoDB 将自动生成一个 _id 值。</p>
<h3 id="创建新的-ObjectId"><a href="#创建新的-ObjectId" class="headerlink" title="创建新的 ObjectId"></a>创建新的 ObjectId</h3><p>如果你想自己生成新的 ObjectId，可以使用以下代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newObjectId = ObjectId()</span><br></pre></td></tr></table></figure>

<p>你也可以直接在 Navicat 编辑器中输入它。</p>
<p>这将会生成一个唯一的 _id，例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ObjectId(&quot;5349b4ddd2781d08c09890f3&quot;)</span><br></pre></td></tr></table></figure>

<p>或者，你亦可以提供一个 12 字节的 ID：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myObjectId = ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="文档的创建时间戳"><a href="#文档的创建时间戳" class="headerlink" title="文档的创建时间戳"></a>文档的创建时间戳</h3><p>由于 _id ObjectId 默认存储了 4 字节的时间戳，因此在大多数情况下，你不需要存储任何文档的创建时间。你可以使用 getTimestamp 方法获取文档的创建时间：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;).getTimestamp()</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;</span></span><br><span class="line">ObjectId(&quot;612b264173e5b4a6bda0abdb&quot;)</span><br></pre></td></tr></table></figure>

<p>这将以 ISO 日期格式返回此文档的创建时间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ISODate(&quot;2019-09-12T30:39:17Z&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="将-ObjectId-转换为字符串（String）"><a href="#将-ObjectId-转换为字符串（String）" class="headerlink" title="将 ObjectId 转换为字符串（String）"></a>将 ObjectId 转换为字符串（String）</h3><p>在某些情况下，你可能需要得到字符串格式的 ObjectId 值。若要转换 ObjectId 为字符串，请使用以下代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newObjectId.str</span><br></pre></td></tr></table></figure>

<p>上面的代码将返回 Guid 的字符串格式的 ObjectId：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5349b4ddd2781d08c09890f3</span><br></pre></td></tr></table></figure>

<h3 id="文档排序"><a href="#文档排序" class="headerlink" title="文档排序"></a>文档排序</h3><p>由于每个 ObjectId 都包含一个时间戳，因此你可以用 _id 字段将文档按创建时间排序。但请务必注意，此排序方法并不代表排序是严格或精确的，因为 ID 的其他组件也会影响，导致次序会反映其他变量，而不仅仅是创建时间。</p>
<h3 id="更改-ObjectId"><a href="#更改-ObjectId" class="headerlink" title="更改 ObjectId"></a>更改 ObjectId</h3><p>_id 字段基本上是不可变的。在创建文档之后，根据定义，它已被分配了一个无法更改的 _id。话虽如此，在插入新文档时是可以覆盖 _id 的。覆盖文档的 _id 字段可能有其用处，但是当这样做时，你有责任确保每个文档的 _id 值都是唯一的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/08/28/Mongodb/" data-id="ckswtcg130000kcf5h35y6ngc" data-title="Mongodb" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-English-Study-5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/25/English-Study-5/" class="article-date">
  <time class="dt-published" datetime="2021-08-25T13:08:38.000Z" itemprop="datePublished">2021-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/25/English-Study-5/">English-Study-5</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Day7"><a href="#Day7" class="headerlink" title="Day7"></a>Day7</h2><ul>
<li><input disabled="" type="checkbox"> detach |蒂塔迟～| n v 分离 分开 派遣</li>
<li><input disabled="" type="checkbox"> STDIN  标准输入</li>
<li><input disabled="" type="checkbox"> interactive |艾特.rua^棵.忒.夫.| adj  web n 交互的 相互配合的</li>
<li><input disabled="" type="checkbox"> isolation |艾涩.雷神.| n adj web 隔离 分离 分析 绝缘</li>
</ul>
<hr>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-i, --interactive                    </span><br><span class="line">	 Keep STDIN open even if not attached</span><br><span class="line">	 </span><br><span class="line">     --ip string</span><br><span class="line">     IPv4 address (e.g., 172.30.100.104)</span><br><span class="line">     </span><br><span class="line">     --ip6 string</span><br><span class="line">     IPv6 address (e.g., 2001:db8::33)</span><br><span class="line">     </span><br><span class="line">     --ipc string</span><br><span class="line">     IPC mode to use</span><br><span class="line">     </span><br><span class="line">     --isolation string</span><br><span class="line">     Container isolation technology</span><br><span class="line">     </span><br><span class="line">     --kernel-memory bytes</span><br><span class="line">     Kernel memory limit</span><br></pre></td></tr></table></figure>



<h2 id="Day6"><a href="#Day6" class="headerlink" title="Day6"></a>Day6</h2><ul>
<li><input disabled="" type="checkbox"> digest |得艾.杰.斯特| n 摘要 汇编 v 消化 理解 领会 web 忍受</li>
<li><input disabled="" type="checkbox"> suffix |撒.费.刻丝-| n 后缀</li>
<li><input disabled="" type="checkbox"> discard|滴.斯.嘎得.| n 抛弃 垫出的牌 v 抛弃 解雇 web 丢弃</li>
</ul>
<h2 id="Day5"><a href="#Day5" class="headerlink" title="Day5"></a>Day5</h2><ul>
<li><input disabled="" type="checkbox"> dimension |呆.门.身.| n 纬度</li>
</ul>
<h2 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h2><ul>
<li><input disabled="" type="checkbox"> stock |丝.大.渴| n 股票 库存 储备 v 库存 放鱼 adj 老一套 常备的 web 存库 紫罗兰 </li>
<li><input disabled="" type="checkbox"> purchase |泼.企^鹅.丝| n v 购买 买卖</li>
</ul>
<h2 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h2><ul>
<li><input disabled="" type="checkbox"> async |A.醒颗| n 异步</li>
<li><input disabled="" type="checkbox"> commodity |渴.贸得.忒| n 商品 产品 大宗商品</li>
<li><input disabled="" type="checkbox"> distribution |低丝泼.biu.什恩| n 分布 分配 分发 web 配送 发行 配销</li>
<li><input disabled="" type="checkbox"> refund |瑞.放得饿| n v 退款 返还款 偿还金额</li>
</ul>
<h2 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h2><ul>
<li><input disabled="" type="checkbox"> scalability |斯.盖楼.biu乐^特A| n 可扩展性</li>
<li><input disabled="" type="checkbox"> cipher |撒.佛沃.| n 密码 密码索引 v 计算 web 暗号 密文 加密算法</li>
</ul>
<h2 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h2><ul>
<li><input disabled="" type="checkbox"> fuzzy |佛爱.Z(en)·| adj 模糊的, 有绒毛的, 失帧的</li>
<li><input disabled="" type="checkbox"> essence|艾森.s~| n 本质的 实质 香精 精华 要素</li>
<li><input disabled="" type="checkbox"> snapshot|斯.奈普,少特er| n 简介 快照</li>
<li><input disabled="" type="checkbox"> resource|瑞扫丝.| n 资源</li>
<li><input disabled="" type="checkbox"> quantity|框内A^特A.| n 数量 大量 订购数量 </li>
<li><input disabled="" type="checkbox"> retrieve|瑞.吹无^v| n 恢复 v 取回, 挽回 检索</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/08/25/English-Study-5/" data-id="cksrl3vnz0000vkf52qcq85vv" data-title="English-Study-5" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/English-Study/" rel="tag">English Study</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-独到科技" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/02/%E7%8B%AC%E5%88%B0%E7%A7%91%E6%8A%80/" class="article-date">
  <time class="dt-published" datetime="2021-08-02T13:33:16.000Z" itemprop="datePublished">2021-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/08/02/%E7%8B%AC%E5%88%B0%E7%A7%91%E6%8A%80/">独到科技</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><p><strong><a target="_blank" rel="noopener" href="https://docs.mongoing.com/">mongodb官网手册|官网</a></strong></p>
<p><strong><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/74063251">kafaka基本操作|知乎</a></strong></p>
<p><strong><a target="_blank" rel="noopener" href="https://pycharm.iswbm.com/index.html">如何高效操作pycharm|个人</a></strong></p>
<h2 id="第三方库"><a href="#第三方库" class="headerlink" title="第三方库"></a>第三方库</h2><ul>
<li><input disabled="" type="checkbox"> xlrd</li>
<li><input disabled="" type="checkbox"> Asyncio</li>
<li><input checked="" disabled="" type="checkbox"> pandas</li>
</ul>
<h2 id="Target"><a href="#Target" class="headerlink" title="Target"></a>Target</h2><ul>
<li><input disabled="" type="checkbox"> celery</li>
<li><input checked="" disabled="" type="checkbox"> Mongoldb</li>
<li><input checked="" disabled="" type="checkbox"> Nginx </li>
<li><input checked="" disabled="" type="checkbox"> Kibana </li>
<li><input checked="" disabled="" type="checkbox"> ElasticSearch</li>
<li><input checked="" disabled="" type="checkbox"> Rabitmq </li>
<li><input checked="" disabled="" type="checkbox"> redis</li>
<li><input checked="" disabled="" type="checkbox"> git</li>
<li><input checked="" disabled="" type="checkbox"> docker</li>
<li><input disabled="" type="checkbox"> kafka</li>
<li><input disabled="" type="checkbox"> tornado</li>
</ul>
<h2 id="Advance"><a href="#Advance" class="headerlink" title="Advance"></a>Advance</h2><ul>
<li><input checked="" disabled="" type="checkbox"> docker</li>
</ul>
<hr>
<h2 id="Day41"><a href="#Day41" class="headerlink" title="Day41"></a>Day41</h2><h3 id="str转dict"><a href="#str转dict" class="headerlink" title="str转dict"></a>str转dict</h3><ol>
<li>使用json转化</li>
</ol>
<blockquote>
<p>需要””才可以转化</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 原始数据的key和value需要是&quot;&quot;</span></span><br><span class="line"><span class="comment"># 如果内部是&#x27;&#x27;需要使用eval</span></span><br><span class="line"><span class="comment"># 但是使用eval可能导致</span></span><br><span class="line">a = <span class="string">&#x27;&#123;&quot;a&quot;:&quot;1&quot;, &quot;b&quot;:&quot;1&quot;&#125;&#x27;</span></span><br><span class="line">c = json.loads(a)</span><br><span class="line">print(c, <span class="built_in">type</span>(c))</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用eval转化</li>
</ol>
<blockquote>
<p>对引号没有要求,但是具有一定的安全性问题</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">user_info = <span class="string">&quot;&#123;&#x27;name&#x27; : &#x27;john&#x27;, &#x27;gender&#x27; : &#x27;male&#x27;, &#x27;age&#x27;: 28&#125;&quot;</span></span><br><span class="line">user_dict =json.loads(user_info )</span><br><span class="line">print(user_dict , <span class="built_in">type</span>(user_dict ))</span><br><span class="line"></span><br><span class="line">a = <span class="string">&#x27;&#123;&quot;a&quot;:&quot;1&quot;, &quot;b&quot;:&quot;1&quot;&#125;&#x27;</span></span><br><span class="line">b = <span class="built_in">eval</span>(a)</span><br><span class="line">print(b, <span class="built_in">type</span>(b))</span><br></pre></td></tr></table></figure>

<ul>
<li><p>安全性问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果，当前目录中恰好有一个文件，名为data.py，则恶意用户变读取到了文件中的内容。</span></span><br><span class="line">please <span class="built_in">input</span>:<span class="built_in">open</span>(<span class="string">&#x27;data.py&#x27;</span>).read()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="3">
<li>使用 literal_eval进行转换</li>
</ol>
<blockquote>
<p>综合了方法一和方法二的优点</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ast</span><br><span class="line">user = <span class="string">&#x27;&#123;&quot;name&quot; : &quot;john&quot;, &quot;gender&quot; : &quot;male&quot;, &quot;age&quot;: 28&#125;&#x27;</span></span><br><span class="line">user_dict = ast.literal_eval(user)</span><br><span class="line">print(user_dict,<span class="built_in">type</span>(user_dict))</span><br></pre></td></tr></table></figure>

<h2 id="Day40"><a href="#Day40" class="headerlink" title="Day40"></a>Day40</h2><h3 id="bytes图片转jpg格式"><a href="#bytes图片转jpg格式" class="headerlink" title="bytes图片转jpg格式"></a>bytes图片转jpg格式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># PIL图像处理标准库</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将bytes转化成字节流</span></span><br><span class="line">bytes_stream = BytesIO(qrcode)</span><br><span class="line"><span class="comment"># 读取图片</span></span><br><span class="line">roiimg = Image.<span class="built_in">open</span>(bytes_stream)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># PIL图像处理标准库</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line">http = urllib3.PoolManager()</span><br><span class="line">response = http.request(<span class="string">&#x27;GET&#x27;</span>,<span class="string">&#x27;f.hiphotos.baidu.com/image/pic/item/8d5494eef01f3a29f863534d9725bc315d607c8e.jpg&#x27;</span>)</span><br><span class="line">result = response.data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将bytes转化成字节流是关键</span></span><br><span class="line"><span class="comment"># 将bytes结果转化为字节流</span></span><br><span class="line">bytes_stream = BytesIO(result)</span><br><span class="line"><span class="comment"># 读取到图片</span></span><br><span class="line">roiimg = Image.<span class="built_in">open</span>(bytes_stream)</span><br><span class="line"></span><br><span class="line"><span class="comment"># roiimg.show()  #展示图片</span></span><br><span class="line"><span class="comment"># print(type(result))</span></span><br><span class="line"><span class="comment"># print(response.status)</span></span><br><span class="line"></span><br><span class="line">imgByteArr = BytesIO()    <span class="comment"># 初始化一个空字节流</span></span><br><span class="line">roiimg.save(imgByteArr,<span class="built_in">format</span>(<span class="string">&#x27;PNG&#x27;</span>))     <span class="comment"># 把我们得图片以‘PNG’保存到空字节流</span></span><br><span class="line">imgByteArr = imgByteArr.getvalue()    <span class="comment"># 无视指针，获取全部内容，类型由io流变成bytes。</span></span><br><span class="line"><span class="comment"># dir_name = os.mkdir(&#x27;baiduimg&#x27;)</span></span><br><span class="line">img_name = <span class="string">&#x27;1.jpg&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(<span class="string">&#x27;baiduimg&#x27;</span>,img_name),<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(imgByteArr)</span><br></pre></td></tr></table></figure>

<h2 id="Day39"><a href="#Day39" class="headerlink" title="Day39"></a>Day39</h2><h3 id="merge特定提交"><a href="#merge特定提交" class="headerlink" title="merge特定提交"></a>merge特定提交</h3><ol>
<li>使用<code>git log</code>或者<code>git reflog</code>查看提交信息</li>
<li>回到要<code>merge</code>的分支</li>
<li><code>git cherry-pick &lt;hash_version_num&gt;</code></li>
</ol>
<h2 id="Day38"><a href="#Day38" class="headerlink" title="Day38"></a>Day38</h2><h3 id="git-撤销commit"><a href="#git-撤销commit" class="headerlink" title="git 撤销commit"></a>git 撤销commit</h3><ol>
<li>执行commit后，还没执行push时，想要撤销这次的commit</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> soft撤销不会撤销add的文件, 同样也撤销不了merge后有conflict的文件</span></span><br><span class="line">git reset --soft HEAD^</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>详细命令</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 如果想要连着add也撤销的话，–soft改为–hard（删除工作空间的改动代码）</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> HEAD^ 表示上一个版本，即上一次的commit，也可以写成HEAD~1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果进行两次的commit，想要都撤回，可以使用HEAD~2</span></span><br><span class="line"></span><br><span class="line">–-soft</span><br><span class="line">不删除工作空间的改动代码 ，撤销commit，不撤销git add file</span><br><span class="line"></span><br><span class="line">–hard</span><br><span class="line">删除工作空间的改动代码，撤销commit且撤销add</span><br></pre></td></tr></table></figure>

<h3 id="git-stash指定文件"><a href="#git-stash指定文件" class="headerlink" title="git stash指定文件"></a>git stash指定文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash push &lt;file1&gt; &lt;file2&gt; &lt;file3&gt; [file4 ...]</span><br></pre></td></tr></table></figure>

<h2 id="Day37"><a href="#Day37" class="headerlink" title="Day37"></a>Day37</h2><h3 id="vim编辑tab"><a href="#vim编辑tab" class="headerlink" title="vim编辑tab"></a>vim编辑tab</h3><blockquote>
<p>编辑vim tab空四个格</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 编辑文件</span></span><br><span class="line">vi ~/.vimrc</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 输入order</span></span><br><span class="line">syntax on</span><br><span class="line">set ts=4   # 空格数</span><br><span class="line">set expandtab  # 设置 Tab 键宽度为 4 个空格。</span><br><span class="line">set autoindent  # 设置自动缩进，即每行的缩进同上一节相同。</span><br></pre></td></tr></table></figure>

<h2 id="Day36"><a href="#Day36" class="headerlink" title="Day36"></a>Day36</h2><h3 id="Datetime-String-Unix"><a href="#Datetime-String-Unix" class="headerlink" title="Datetime-String-Unix"></a>Datetime-String-Unix</h3><blockquote>
<p>datetime &lt;–&gt;  string  &lt;–&gt; unix  相互转化</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日期时间字符串</span></span><br><span class="line">st = <span class="string">&quot;2017-11-23 16:10:10&quot;</span></span><br><span class="line"><span class="comment"># 当前日期时间</span></span><br><span class="line">dt = datetime.datetime.now()</span><br><span class="line"><span class="comment"># 当前时间戳</span></span><br><span class="line">sp = time.time()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.把datetime转成字符串</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">datetime_toString</span>(<span class="params">dt</span>):</span></span><br><span class="line">    print(<span class="string">&quot;1.把datetime转成字符串: &quot;</span>, dt.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.把字符串转成datetime</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">string_toDatetime</span>(<span class="params">st</span>):</span></span><br><span class="line">    print(<span class="string">&quot;2.把字符串转成datetime: &quot;</span>, datetime.datetime.strptime(st, <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.把字符串转成时间戳形式</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">string_toTimestamp</span>(<span class="params">st</span>):</span></span><br><span class="line">    print(<span class="string">&quot;3.把字符串转成时间戳形式:&quot;</span>, time.mktime(time.strptime(st, <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.把时间戳转成字符串形式</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timestamp_toString</span>(<span class="params">sp</span>):</span></span><br><span class="line">    print(<span class="string">&quot;4.把时间戳转成字符串形式: &quot;</span>, time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, time.localtime(sp)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.把datetime类型转外时间戳形式</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">datetime_toTimestamp</span>(<span class="params">dt</span>):</span></span><br><span class="line">    print(<span class="string">&quot;5.把datetime类型转外时间戳形式:&quot;</span>, time.mktime(dt.timetuple()))</span><br></pre></td></tr></table></figure>

<h2 id="Day35"><a href="#Day35" class="headerlink" title="Day35"></a>Day35</h2><p>Linux修改文件名</p>
<h3 id="文件重命名"><a href="#文件重命名" class="headerlink" title="文件重命名"></a>文件重命名</h3><blockquote>
<p>单个文件命名</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv old_file_name new_file_name</span><br></pre></td></tr></table></figure>

<h3 id="文件重命名-批量"><a href="#文件重命名-批量" class="headerlink" title="文件重命名[批量]"></a>文件重命名[批量]</h3><blockquote>
<p>多个文件命名</p>
<p>匹配正则表达式</p>
</blockquote>
<h3 id="docker进阶"><a href="#docker进阶" class="headerlink" title="docker进阶"></a>docker进阶</h3><blockquote>
<p>背景: 使用官方的docker-compose文档联系docker-compose</p>
</blockquote>
<p><strong>docker-compose:</strong> 可以理解为一个官方插件, 需要下载, 用于维护项目, 可以快速启动多个微服务, 需要docker-compose<code>yml</code>文件配置各个微服务间的依赖关系, 并使用<code>docker-compose build</code> <code>docker-compose up</code>启动服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>过程如下:</p>
<ol>
<li>根据yml文件目录(即项目目录名)创建一个默认的网络, <code>project-compose_default</code>, 会将所涉及的所有微服务共同至于一个网络下, 这样可以使用域名而非ip进行访问</li>
<li>根据yml文件创建对应的container容器</li>
<li>启动服务, 开启项目</li>
</ol>
<p><strong>官网docker-compose</strong></p>
<blockquote>
<p>创建目录composetest, 所有的文件均创建在此目录下</p>
</blockquote>
<ol>
<li>创建应用(app.py)</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">cache = redis.Redis(host=<span class="string">&quot;redis&quot;</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_hit_count</span>():</span></span><br><span class="line">	retries = <span class="number">5</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> cache.incr(<span class="string">&quot;hits&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> redis.exceptions.ConnectionError <span class="keyword">as</span> exc:</span><br><span class="line">            <span class="keyword">if</span> retries == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">raise</span> exc</span><br><span class="line">            retries -= <span class="number">1</span></span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span>():</span></span><br><span class="line">    count = get_hit_count()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;hello world!, i have been seen <span class="subst">&#123;count&#125;</span> times.&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建<code>Dockerfile</code>构建imagse(打包服务和环境)</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM python:<span class="number">3.6</span>-alpine</span><br><span class="line">ADD . /code</span><br><span class="line">WORKDIR /code</span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line">CMD [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;app.py&quot;</span>]</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>创建<code>docer-compose.yml</code> (启动项目, 构建各个微服务之间的依赖)</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">	<span class="attr">web:</span></span><br><span class="line">		<span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">		<span class="attr">ports:</span></span><br><span class="line">			<span class="bullet">-</span> <span class="string">&quot;5000:5000&quot;</span></span><br><span class="line">	<span class="attr">redis:</span></span><br><span class="line">		<span class="attr">image:</span> <span class="string">&quot;redis:alpine&quot;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>创建<code>requirements.txt</code>(依赖环境)</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis</span><br><span class="line">flask</span><br></pre></td></tr></table></figure>

<h4 id="Review"><a href="#Review" class="headerlink" title="Review"></a>Review</h4><ul>
<li>在<code>docker-compose build</code>出现<code>error</code>时, 需要执行<code>docker rm $(docker ps -aq)</code>删除所有存在且不可用容器</li>
</ul>
<h2 id="Day34"><a href="#Day34" class="headerlink" title="Day34"></a>Day34</h2><h3 id="Dal-数据交换层"><a href="#Dal-数据交换层" class="headerlink" title="Dal[数据交换层]"></a>Dal[数据交换层]</h3><p>DAL是[数据访问层]英文缩写，即为数据访问层（Data Access Layer）。其功能主要是负责数据库的访问。简单地说就是实现对数据表的Select（查询）、Insert（插入）、Update（更新）、Delete（删除）等操作。</p>
<p>Dal一般有自己的服务器IP, 可以进入查看相应的log, 如果Dal做了负载均衡, 最好的方式是通过script查看对数据的访问</p>
<h2 id="Day33"><a href="#Day33" class="headerlink" title="Day33"></a>Day33</h2><h3 id="asyncio-异步"><a href="#asyncio-异步" class="headerlink" title="asyncio[异步]"></a>asyncio[异步]</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    task = asyncio.Task(update_username())</span><br><span class="line">    done, pending = <span class="keyword">await</span> asyncio.wait(&#123;task&#125;)</span><br><span class="line">    <span class="keyword">if</span> task <span class="keyword">in</span> done:</span><br><span class="line">        print(task)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    BaseModel.init_model_dict()</span><br><span class="line">    loop = asyncio.get_event_loop()</span><br><span class="line">    loop.run_until_complete(main())</span><br><span class="line">    loop.close()</span><br></pre></td></tr></table></figure>

<h2 id="Day32"><a href="#Day32" class="headerlink" title="Day32"></a>Day32</h2><h3 id="vim命令"><a href="#vim命令" class="headerlink" title="vim命令"></a>vim命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">h Move left</span><br><span class="line">j Move down</span><br><span class="line">k Move up</span><br><span class="line">l Move right</span><br><span class="line">w Move to next word</span><br><span class="line">W Move to next blank delimited word</span><br><span class="line">b Move to the beginning of the word</span><br><span class="line">B Move to the beginning of blank delimted word</span><br><span class="line">e Move to the end of the word</span><br><span class="line">E Move to the end of Blank delimited word</span><br><span class="line">( Move a sentence back</span><br><span class="line">) Move a sentence forward</span><br><span class="line">&#123; Move a paragraph back</span><br><span class="line">&#125; Move a paragraph forward</span><br><span class="line"><span class="meta">#</span><span class="bash"> =================================</span></span><br><span class="line">0 Move to the begining of the line</span><br><span class="line"><span class="meta">$</span><span class="bash"> Move to the end of the line</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> =================================</span></span><br><span class="line">1G Move to the first line of the file</span><br><span class="line">G Move to the last line of the file</span><br><span class="line">nG Move to nth line of the file</span><br><span class="line">:n Move to nth line of the file</span><br><span class="line">fc Move forward to c</span><br><span class="line">Fc Move back to c</span><br><span class="line">H Move to top of screen</span><br><span class="line">M Move to middle of screen</span><br><span class="line">L Move to botton of screen</span><br><span class="line"><span class="meta">%</span><span class="bash"> Move to associated ( ), &#123; &#125;, [ ]</span></span><br></pre></td></tr></table></figure>

<h2 id="Day31"><a href="#Day31" class="headerlink" title="Day31"></a>Day31</h2><h3 id="执行order"><a href="#执行order" class="headerlink" title="执行order"></a>执行order</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看linux所有<span class="built_in">history</span> order</span></span><br><span class="line">history</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;</span></span><br><span class="line">1 ls</span><br><span class="line">2 ll</span><br><span class="line">3 docker ps -a </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行<span class="built_in">history</span> order</span></span><br><span class="line">! &lt;order-rank&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Day30"><a href="#Day30" class="headerlink" title="Day30"></a>Day30</h2><h3 id="判断bool"><a href="#判断bool" class="headerlink" title="判断bool"></a>判断bool</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span>(var)</span><br></pre></td></tr></table></figure>

<h2 id="Day29"><a href="#Day29" class="headerlink" title="Day29"></a>Day29</h2><h3 id="服务器之间传递文件"><a href="#服务器之间传递文件" class="headerlink" title="服务器之间传递文件"></a>服务器之间传递文件</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/78133776">两台Linux服务器之间传输文件的四种方法 - 知乎 (zhihu.com)</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 从本地复制到远程</span></span><br><span class="line">scp local_file remote_username@remote_ip:remote_folder </span><br><span class="line"></span><br><span class="line">scp local_file remote_username@remote_ip:remote_file </span><br><span class="line"></span><br><span class="line">scp local_file remote_ip:remote_folder </span><br><span class="line"></span><br><span class="line">scp local_file remote_ip:remote_file </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从远程复制到本</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 只要将从本地复制到远程的命令的后2个参数调换顺序即可地</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果没有权限使用root用户(默认通过ssh连接)</li>
</ul>
<p><code>scp /Users/edy/PycharmProjects/TXM/component/tasks/order_tasks.py root@59.110.228.229:/root/</code></p>
<h3 id="在容器内修改项目"><a href="#在容器内修改项目" class="headerlink" title="在容器内修改项目"></a>在容器内修改项目</h3><ul>
<li>砍掉上线这一步骤, 节约时间</li>
<li>在测试服进行debug</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在宿主机与container中copy文件</span><br><span class="line"></span><br><span class="line">docker cp local_system/app.py container_id:/Project/demo</span><br><span class="line">docker cp [宿主机目录|文件]  [容器ID]:[目标文件|目录]</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> modify <span class="built_in">local</span> file</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> copy file to remote-server</span></span><br><span class="line">scp /Users/edy/PycharmProjects/TXM/component/tasks/order_tasks.py root@59.110.228.229:/root/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> copy file from server to container</span></span><br><span class="line">docker cp order_tasks.py txm-task-order:/TXM/component/tasks/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> restart target docker</span> </span><br><span class="line">docker restart &lt;docker_name&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Day28"><a href="#Day28" class="headerlink" title="Day28"></a>Day28</h2><h3 id="连接本地服务-wait"><a href="#连接本地服务-wait" class="headerlink" title="连接本地服务[wait]"></a>连接本地服务[wait]</h3><h2 id="Day27"><a href="#Day27" class="headerlink" title="Day27"></a>Day27</h2><h3 id="For-loop"><a href="#For-loop" class="headerlink" title="For-loop"></a>For-loop</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tmp = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> temp:</span><br><span class="line">  print(<span class="string">&#x27;something~&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">由于tmp为空, 此时for-in-loop-structure并不会</span></span><br><span class="line"><span class="string">运行for-block-code</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="集合取交集"><a href="#集合取交集" class="headerlink" title="集合取交集"></a>集合取交集</h3><p><strong>用法: set().intersection(set_1, set_2|iterable)</strong></p>
<ul>
<li><strong>intersection()可以任何可迭代集合</strong></li>
<li>返回的是<strong>set</strong></li>
</ul>
<p>intersection() 方法返回包含两个或更多集合之间相似性的集合。</p>
<p>含义：返回的集合仅包含两个集合中都存在的项目，或者如果使用两个以上的集合进行比较，则在所有集合中都存在。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module_list = [<span class="string">&#x27;assistant&#x27;</span>, <span class="string">&#x27;moments&#x27;</span>, <span class="string">&#x27;friend-welcome&#x27;</span>, <span class="string">&#x27;xxxx&#x27;</span>]</span><br><span class="line">modules = [<span class="string">&#x27;xxxx&#x27;</span>, <span class="string">&#x27;12371283&#x27;</span>]</span><br><span class="line">ans = <span class="built_in">list</span>(<span class="built_in">set</span>(modules).intersection(module_list))</span><br><span class="line"></span><br><span class="line">print(ans)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line">y = &#123;<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>&#125;</span><br><span class="line">z = &#123;<span class="string">&quot;f&quot;</span>, <span class="string">&quot;g&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">result = x.intersection(y, z)</span><br><span class="line"></span><br><span class="line">print(result)</span><br><span class="line">&gt;&gt;</span><br><span class="line">&#123;<span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">a = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line">b = [<span class="string">&quot;c&quot;</span>, <span class="string">&quot;f&quot;</span>]</span><br><span class="line">c = &#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line">d = <span class="string">&quot;cccddaqasda&quot;</span></span><br><span class="line"></span><br><span class="line">ans = a.intersection(b, c, d)</span><br><span class="line">print(ans)</span><br></pre></td></tr></table></figure>

<h2 id="Day26"><a href="#Day26" class="headerlink" title="Day26"></a>Day26</h2><h3 id="Shell-命令"><a href="#Shell-命令" class="headerlink" title="Shell[命令]"></a>Shell[命令]</h3><p><strong>查看磁盘</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">1．命令格式：</span><br><span class="line"></span><br><span class="line">df [选项] [文件]</span><br><span class="line"></span><br><span class="line">2．命令功能：</span><br><span class="line"></span><br><span class="line">显示指定磁盘文件的可用空间。如果没有文件名被指定，则所有当前被挂载的文件系统的可用空间将被显示。默认情况下，磁盘空间将以 1KB 为单位进行显示，除非环境变量 POSIXLY_CORRECT 被指定，那样将以512字节为单位进行显示</span><br><span class="line"></span><br><span class="line">3．命令参数：</span><br><span class="line"></span><br><span class="line">必要参数：</span><br><span class="line"></span><br><span class="line">-a 全部文件系统列表</span><br><span class="line"></span><br><span class="line">-h 方便阅读方式显示</span><br><span class="line"></span><br><span class="line">-H 等于“-h”，但是计算式，1K=1000，而不是1K=1024</span><br><span class="line"></span><br><span class="line">-i 显示inode信息</span><br><span class="line"></span><br><span class="line">-k 区块为1024字节</span><br><span class="line"></span><br><span class="line">-l 只显示本地文件系统</span><br><span class="line"></span><br><span class="line">-m 区块为1048576字节</span><br><span class="line"></span><br><span class="line">--no-sync 忽略 sync 命令</span><br><span class="line"></span><br><span class="line">-P 输出格式为POSIX</span><br><span class="line"></span><br><span class="line">--sync 在取得磁盘信息前，先执行sync命令</span><br><span class="line"></span><br><span class="line">-T 文件系统类型</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 搜索执行的命令</span></span><br><span class="line">control r</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看存储情况</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>

<h3 id="mongodb模糊查询"><a href="#mongodb模糊查询" class="headerlink" title="mongodb模糊查询"></a>mongodb模糊查询</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># / 是mongodb的通配符</span></span><br><span class="line"><span class="comment"># 以下命令使用正则表达式查找包含 runoob 字符串的文章：</span></span><br><span class="line">db.posts.find(&#123;post_text:/runoob/&#125;)</span><br><span class="line">db.posts.find(&#123;post_text:&#123;<span class="variable">$regex</span>:<span class="string">&quot;runoob&quot;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Day25"><a href="#Day25" class="headerlink" title="Day25"></a>Day25</h2><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><ul>
<li><strong>DEV|自测</strong></li>
</ul>
<p>[Development environment]开发环境，外部用户无法访问，开发人员使用，版本变动很大。</p>
<ul>
<li><strong>TEST</strong></li>
</ul>
<p>[Test environment]测试环境，外部用户无法访问，专门给测试人员使用的，版本相对稳定。</p>
<ul>
<li><strong>SIT</strong></li>
</ul>
<p>[System Integration Test]系统集成测试，开发人员自己测试流程是否走通。</p>
<ul>
<li><strong>UAT</strong></li>
</ul>
<p>[User Acceptance Test environment]用户验收测试环境，用于生产环境下的软件测试者测试使用。</p>
<ul>
<li><strong>PRE</strong></li>
</ul>
<p>[preparatory environment]灰度环境，外部用户可以访问，但是服务器配置相对低，其它和生产一样，外部用户可以访问，版本发布初期，正式版本发布前。</p>
<ul>
<li><strong>PRD|PRO</strong></li>
</ul>
<p>[Production environment]生产环境，面向外部用户的环境，正式环境，连接上互联网即可访问。</p>
<ul>
<li><strong>FAT</strong></li>
</ul>
<p>[Feature Acceptance Test environment]功能验收测试环境，用于软件测试者测试使用</p>
<h2 id="Day24"><a href="#Day24" class="headerlink" title="Day24"></a>Day24</h2><h3 id="线上script"><a href="#线上script" class="headerlink" title="线上script"></a>线上script</h3><p>获取线上数据库时使用script, 其中需要登陆线上的服务器中的docker</p>
<p>写法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 头文件</span></span><br><span class="line"><span class="comment"># 用户端输出print</span></span><br><span class="line"><span class="keyword">from</span> config.config <span class="keyword">import</span> Table</span><br><span class="line"><span class="keyword">from</span> model <span class="keyword">import</span> BaseModel</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.read_excel(<span class="string">&quot;/Users/edy/Desktop/test.xlsx&quot;</span>, usecols=[<span class="number">1</span>])  <span class="comment"># 读取项目名称列,不要列名</span></span><br><span class="line">data_list = data.values.tolist()</span><br><span class="line">phone_list = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">    phone_list.extend(item)</span><br><span class="line"></span><br><span class="line">phones = <span class="built_in">map</span>(<span class="built_in">str</span>, phone_list)</span><br><span class="line"></span><br><span class="line">res = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> phones:</span><br><span class="line">    device_info = <span class="keyword">await</span> BaseModel.fetch_one(Table.UDevice, <span class="string">&quot;*&quot;</span>,</span><br><span class="line">                                            BaseModel.where_dict(&#123;<span class="string">&quot;sim&quot;</span>: item&#125;))</span><br><span class="line">    <span class="keyword">if</span> device_info:</span><br><span class="line">        sim = device_info.get(<span class="string">&quot;sim&quot;</span>)</span><br><span class="line">        uniques = device_info.get(<span class="string">&quot;unique_id&quot;</span>)</span><br><span class="line">        bot_usernames = (device_info.get(<span class="string">&quot;bot_username&quot;</span>))</span><br><span class="line">        res.append(</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;phone&quot;</span>: sim,</span><br><span class="line">                <span class="string">&quot;设备id&quot;</span>: uniques,</span><br><span class="line">                <span class="string">&quot;微信号&quot;</span>: bot_usernames</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>

<h2 id="Day23"><a href="#Day23" class="headerlink" title="Day23"></a>Day23</h2><h3 id="分支关联"><a href="#分支关联" class="headerlink" title="分支关联"></a>分支关联</h3><p><strong>本地分支与远程分支关联(隐式关联)</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git branch --set-upstream-to=origin/&lt;branch&gt; dev_lyh_private_send</span><br><span class="line"></span><br><span class="line"><span class="comment"># 优先选择此方法</span></span><br><span class="line">git push --set-upstream origin local_branch</span><br><span class="line"></span><br><span class="line">git push -u origin local_branch</span><br></pre></td></tr></table></figure>

<h3 id="sheet-name-规范"><a href="#sheet-name-规范" class="headerlink" title="sheet_name[规范]"></a>sheet_name[规范]</h3><p>Excel工作表表名不能用下列字符：<br>冒号——：<br>斜杠——/<br>问号——？<br>反斜杠——<br>星号——*<br>方符号——[ 或 ]</p>
<p>构成工作表的表名字符个数不得超过31个。</p>
<h2 id="Day22"><a href="#Day22" class="headerlink" title="Day22"></a>Day22</h2><h3 id="Python字符串编码格式"><a href="#Python字符串编码格式" class="headerlink" title="Python字符串编码格式"></a>Python<strong>字符串编码格式</strong></h3><h3 id="unicode编码"><a href="#unicode编码" class="headerlink" title="unicode编码"></a>unicode编码</h3><p><strong>Python中的编码格式</strong></p>
<blockquote>
<p>字符串的编码一开始是 ascii，只支持英文，由于多种语言的存在，出现万国码 unicode，但 unicode 不兼容 ascii，而且对存储空间造成浪费，所以出现 utf-8 编码，一种针对 unicode 的可变长度字符编码。</p>
</blockquote>
<p>在 Python3 中共有两种字符序列。一种是 str 序列，默认对字符串编码；一种是 bytes 序列，操作二进制数据流，如代码段一中的 hi，通过在字符串前的 b，即表示 bytes 。这两种序列可通过 decode 和 encode 相互转换</p>
<p>在网络传输中，如 urllib、request 等获取数据的库，通常返回 bytes 序列，这时可通过 decode 指定相应的格式经行解码，获取中文字符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以b开头 --&gt; bytes序列</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以u开头 --&gt; unicode序列</span></span><br></pre></td></tr></table></figure>

<p><strong>方法一：使用unicode_escape 解码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># </span></span><br><span class="line">unicode = <span class="string">b&#x27;\\u4f60\\u597d&#x27;</span></span><br><span class="line">re = unicode.decode(<span class="string">&quot;unicode_escape&quot;</span>)</span><br><span class="line">print(re)</span><br><span class="line"></span><br><span class="line">返回：你好</span><br></pre></td></tr></table></figure>

<p><strong>方法二：使用encode()方法转换，再调用bytes.decode()转换为字符串形式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">r&#x27;\u4f60\u597d&#x27;</span></span><br><span class="line">print(s.encode().decode(<span class="string">&quot;unicode_escape&quot;</span>))</span><br></pre></td></tr></table></figure>

<p><strong>方法三： 使用json.loads 解码（为json 格式）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;\u4eac\u4e1c\u653e\u517b\u7684\u722c\u866b&#x27;</span></span><br><span class="line"><span class="built_in">print</span> json.loads(<span class="string">&#x27;&quot;%s&quot;&#x27;</span> %<span class="built_in">str</span>)</span><br></pre></td></tr></table></figure>

<p><strong>方法四：使用eval（遇到Unicode是通过requests在网上爬取的时候）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response = requests.get(url,headers=headers)</span><br><span class="line">re = <span class="built_in">eval</span>(<span class="string">&quot;u&quot;</span>+<span class="string">&quot;\&#x27;&quot;</span>+response.text+<span class="string">&quot;\&#x27;&quot;</span>)</span><br><span class="line">print(re)</span><br></pre></td></tr></table></figure>

<h2 id="Day21"><a href="#Day21" class="headerlink" title="Day21"></a>Day21</h2><h3 id="调试API"><a href="#调试API" class="headerlink" title="调试API"></a>调试API</h3><ul>
<li>本地调试http, 不用https</li>
</ul>
<h3 id="1-2-转化成-“1”-“2”"><a href="#1-2-转化成-“1”-“2”" class="headerlink" title="[1, 2]转化成[“1”, “2”]"></a>[1, 2]转化成[“1”, “2”]</h3><p>使用<code>map</code>函数</p>
<p><strong>描述</strong></p>
<p><strong>map()</strong> 会根据提供的函数对指定序列做映射。</p>
<p>第一个参数 function 以参数序列中的每一个元素调用 function 函数，返回包含每次 function 函数返回值的新列表。</p>
<p><strong>语法</strong></p>
<p>map() 函数语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map(function, iterable, ...)</span><br></pre></td></tr></table></figure>

<h2 id="Day20"><a href="#Day20" class="headerlink" title="Day20"></a>Day20</h2><h3 id="获取维度数据"><a href="#获取维度数据" class="headerlink" title="获取维度数据"></a>获取维度数据</h3><p><code>operator中的itemgetter函数</code></p>
<p><code>from operator import itemgetter</code></p>
<p>该函数的作用是获取对象的某个/些维度的数据, 默认将对象的维度看为1维 该函数的使用方法:</p>
<ol>
<li>定义一个itemgetter函数,并指定获取某个对象中哪些维度的值</li>
<li>用定义好的函数作用于对象 </li>
</ol>
<blockquote>
<p>example</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line"><span class="comment"># define 1*1 1*2 array</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># define itemgetter-fun fetch a | b dimension data</span></span><br><span class="line">get = itemgetter(<span class="number">0</span>)</span><br><span class="line">print(get(a), get(b), sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&gt;&gt;</span><br><span class="line"><span class="number">1</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line"><span class="comment"># define 1*1 1*2 array</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取a b第0维和2维的数据</span></span><br><span class="line"><span class="comment"># 获取多维数据 return: tuple</span></span><br><span class="line">get = itemgetter(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">print(get(a), get(b), sep=<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">&gt;&gt;</span><br><span class="line">(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure>

<h3 id="字典列表排序"><a href="#字典列表排序" class="headerlink" title="字典列表排序"></a>字典列表排序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line">list_to_be_sorted = [&#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">44</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">10</span>&#125;,</span><br><span class="line">                     &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">12</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">39</span>&#125;,</span><br><span class="line">                     &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">88</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">22</span>&#125;,</span><br><span class="line">                     &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">2</span>&#125;,</span><br><span class="line">                     &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">4</span>&#125;]</span><br><span class="line"></span><br><span class="line">new_list = <span class="built_in">sorted</span>(list_to_be_sorted, key=itemgetter(<span class="string">&#x27;age&#x27;</span>))</span><br><span class="line">print(new_list)</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line">[</span><br><span class="line">  &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">6</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">2</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">4</span>&#125;, </span><br><span class="line">  &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">44</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">10</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">88</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">22</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&#x27;lv&#x27;</span>: <span class="number">12</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">39</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="python封装「-」"><a href="#python封装「-」" class="headerlink" title="python封装「,」"></a>python封装「,」</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 联系使用多个变量并用,进行连接时 python会将其自动封装成tuple</span></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">a = a, a, a, a</span><br><span class="line">print(<span class="built_in">type</span>(a), a, sep=<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">tuple</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">(<span class="params"><span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span></span>)</span></span><br></pre></td></tr></table></figure>

<h2 id="Day19"><a href="#Day19" class="headerlink" title="Day19"></a>Day19</h2><h3 id="本地远程测试"><a href="#本地远程测试" class="headerlink" title="本地远程测试"></a>本地远程测试</h3><ul>
<li>mac terminal<code>ifconfig</code>找到<code>en0&gt;&gt; inet</code>ip地址, 将localhost替换成inet地址即可远程连调</li>
</ul>
<h3 id="本地测试"><a href="#本地测试" class="headerlink" title="本地测试"></a>本地测试</h3><p>开展本地测试首先在config中配置本地环境</p>
<p><a target="_blank" rel="noopener" href="http://127.0.0.1:9000/controllername/api_name">http://127.0.0.1:9000/controllername/api_name</a></p>
<h3 id="TXM上线"><a href="#TXM上线" class="headerlink" title="TXM上线"></a>TXM上线</h3><p>团小蜜测试服打完<code>release-v_test_0.26.97</code>tag后,  直接push到远程分支, 不用运行<code>sh脚本</code>直接可以上线</p>
<h3 id="Git-删除Tag"><a href="#Git-删除Tag" class="headerlink" title="Git|删除Tag"></a>Git|删除Tag</h3><p><strong>git  删除本地标签：</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag -d 标签名  </span><br><span class="line"></span><br><span class="line">例如：git tag -d v3.<span class="number">1.0</span></span><br></pre></td></tr></table></figure>

<p><strong>git  删除远程标签:</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git push origin <span class="symbol">:refs/tags/</span>标签名  </span><br><span class="line"></span><br><span class="line">例如：git push origin <span class="symbol">:refs/tags/v3</span>.<span class="number">1.0</span></span><br></pre></td></tr></table></figure>

<p><strong>git  删除本地模块标签的操作</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git submodule <span class="keyword">foreach</span> git tag -d 标签名</span><br><span class="line"></span><br><span class="line">例如：git submodule <span class="keyword">foreach</span> git tag -d v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">删除成功提示：</span><br><span class="line">To http:<span class="comment">//XXXXXXXX_Master.git</span></span><br><span class="line"> - [deleted]         v3<span class="number">.1</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>

<p><strong>git 删除远程模块标签的操作</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git submodule <span class="keyword">foreach</span> git push origin :refs/tags/标签名</span><br><span class="line"></span><br><span class="line">例如：git submodule <span class="keyword">foreach</span> git push origin :refs/tags/v3<span class="number">.1</span><span class="number">.0</span> </span><br><span class="line"></span><br><span class="line">删除成功的提示：</span><br><span class="line">Entering <span class="string">&#x27;XXXXXXXX&#x27;</span></span><br><span class="line">To http:<span class="comment">//XXXXXXXX.git</span></span><br><span class="line"> - [deleted]         v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line">Entering <span class="string">&#x27;XXXXXXXX&#x27;</span></span><br><span class="line">To http:<span class="comment">//XXXXXXXX.git</span></span><br><span class="line"> - [deleted]         v3<span class="number">.1</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>

<h2 id="Day18"><a href="#Day18" class="headerlink" title="Day18"></a>Day18</h2><h3 id="mongo聚合查询"><a href="#mongo聚合查询" class="headerlink" title="mongo聚合查询"></a>mongo聚合查询</h3><p><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/"><strong>聚合查询</strong></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># aggregation</span><br><span class="line">[</span><br><span class="line">	&#123;$match: &#123;member_count:&#123;$gt:100&#125;&#125;&#125;,</span><br><span class="line">	&#123;$group: &#123;&quot;_id&quot;: &#123;&#125;, &quot;total&quot;: &#123;$sum: &quot;$member_count&quot;&#125;&#125;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="Day17"><a href="#Day17" class="headerlink" title="Day17"></a>Day17</h2><h3 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h3><p><code>time.time()</code></p>
<p><strong>格林威治时间1970年01月01日00时00分00秒</strong>起至现在的总秒数</p>
<p><code>db.collection.findOne()._id.getTimestamp()</code></p>
<p><strong>世界标准时间</strong></p>
<p><strong>ISODate时间ISODate(“2013-03-01T00:00:00Z”)  + 你的时区</strong></p>
<p><strong>北京+8h</strong></p>
<h3 id="查看log"><a href="#查看log" class="headerlink" title="查看log"></a>查看log</h3><ol>
<li>进入服务器</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@ip</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>查看镜像</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>根据kibana-index进入对应的镜像内</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 静态查询</span></span><br><span class="line">docker logs --tail 100 celery_newmsg</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 动态查询</span></span><br><span class="line">docker logs -f --tail 100 image_name</span><br></pre></td></tr></table></figure>

<p><strong>查询技巧</strong></p>
<ul>
<li>显示所有log</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示某个指定容器<span class="built_in">log</span></span></span><br><span class="line">docker logs [options] 容器ID or 容器name</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示docker compose启动的所有容器<span class="built_in">log</span></span></span><br><span class="line">docker-compose logs</span><br></pre></td></tr></table></figure>

<ul>
<li>显示实时log</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f [docker_id] or [docker_name]</span><br></pre></td></tr></table></figure>

<ul>
<li>动态显示log尾部</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --tail 100 [docker_id] or [docker_name]</span><br></pre></td></tr></table></figure>

<ul>
<li>使用grep过滤log</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查找所有包含<span class="string">&quot;error&quot;</span>的<span class="built_in">log</span></span></span><br><span class="line">docker logs | grep error</span><br></pre></td></tr></table></figure>

<ul>
<li>根据时间进行log的查找</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs --since 2021-08-25T12:01:46.452616Z [容器Id] or [容器name]</span><br></pre></td></tr></table></figure>

<ul>
<li>组合查询</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --tail 100 容器id | grep info</span><br></pre></td></tr></table></figure>

<h2 id="Day16"><a href="#Day16" class="headerlink" title="Day16"></a>Day16</h2><h3 id="使用GIT进行版本控制"><a href="#使用GIT进行版本控制" class="headerlink" title="使用GIT进行版本控制"></a>使用GIT进行版本控制</h3><p><strong>以Mac为例</strong></p>
<ol>
<li>查看git version</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>安装git</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置git</li>
</ol>
<p><code>git跟踪谁修改了项目, git必须知道你的用户名, 但你可以使用一个虚假的emial</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;username&quot;</span><br><span class="line">git config --global user.email &quot;email&quot;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>创建项目|以下操作非必要说明均在<code>sub_dir</code>中使用命令</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd super_directory</span><br><span class="line">mkdir sub_dir</span><br><span class="line">cd sub_dir</span><br><span class="line">touch project.py test.py</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>初始化仓库</li>
</ol>
<p>git在对应的目录中初始化一个空的仓库,  仓库是指程序中被git主动追踪的一组文件.  git用来管理仓库的文件都存储在.git/这个隐藏目录中, 包括index/ local git,  .git存放着项目的所有历史记录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加忽略追踪文件</span></span><br><span class="line">.gitignore</span><br><span class="line">text.py</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>检查状态</li>
</ol>
<p>git中一个分支代表一个版本对应一般开发一个功能</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line"><span class="meta">#</span><span class="bash"> on branch master</span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># initial commit</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># untracked files</span></span></span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="bash"><span class="comment"># .gitignore</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> test.py</span></span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">将项目中未被跟踪的所有文件全部加入到仓库中, 但是并不提交他们, 只是让git开始关注它们</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">git commit -m &quot;info&quot;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">将被追踪的文件提交到本地仓库</span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>查看历史提交</li>
</ol>
<p>每次提交时, git都会生成一个包含40字符的UID, 记录提交是谁执行的|提交的时间以及提交的指定信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br><span class="line"></span><br><span class="line">git log --pretty=oneline</span><br><span class="line"><span class="meta">#</span><span class="bash"> 只显示提交引用的UID和提交时的info</span></span><br></pre></td></tr></table></figure>

<ol start="8">
<li>撤销修改</li>
</ol>
<p><code>git checkout</code>命令用于切换分支或恢复工作树文件。<code>git checkout</code>是git最常用的命令之一，同时也是一个很危险的命令，因为这条命令会重写工作区。</p>
<p>放弃修改, 恢复到前一个可执行状态</p>
<p>将working的修改放弃, 回到最近一次commit代码, 如果已经通过add进入indexing则无法撤回</p>
<p><strong>注意</strong>:在checkout时会影响到working code, 因此必须在checkout时先add -commit或者stash push</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 撤销当前working代码, 回到前一次commit</span></span><br><span class="line">git checkout .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换分支</span></span><br><span class="line">git checkout taget_branch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换工作树</span></span><br><span class="line">git checkout UID的前六位</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;</span></span><br><span class="line">提示目前在历史分支树上</span><br><span class="line">detached: 分离的</span><br><span class="line">HEAD detached at 81ba859</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>回退分支</li>
</ol>
<p><strong>版本–分支–code</strong></p>
<p><code>git rest --hard HEAD^</code>：回退到上一版；<br><code>git rest --hard HEAD^^</code>：回退到倒数第二版；<br><code>git rest --hard 3628164</code>：回退到commit id为3628164的版本；</p>
<h3 id="lunix"><a href="#lunix" class="headerlink" title="lunix"></a>lunix</h3><p>Apt: advanced packaging tool 高级封装工具</p>
<ul>
<li>下载软件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install package_name</span><br></pre></td></tr></table></figure>

<ul>
<li>更新软件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt package_name</span><br></pre></td></tr></table></figure>

<ul>
<li>删除软件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt remove package_name</span><br></pre></td></tr></table></figure>

<ul>
<li>更新所有可升级软件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">列出所有可更新的软件清单命令：sudo apt update</span><br><span class="line"></span><br><span class="line">升级软件包：sudo apt upgrade</span><br><span class="line"></span><br><span class="line">列出可更新的软件包及版本信息：apt list --upgradeable</span><br><span class="line"></span><br><span class="line">升级软件包，升级前先删除需要更新软件包：sudo apt full-upgrade</span><br></pre></td></tr></table></figure>

<h2 id="Day15"><a href="#Day15" class="headerlink" title="Day15"></a>Day15</h2><h3 id="体系"><a href="#体系" class="headerlink" title="体系"></a>体系</h3><ul>
<li>uid与wxid打通==&gt;生态闭环</li>
<li>分销==&gt;打通ERP</li>
<li>目前主打社群沉淀与私域流量维护</li>
<li>to b和to c两种用户画像</li>
<li>to b 注重流量维护|社群沉淀</li>
<li>to c 注重营销</li>
</ul>
<h3 id="git常用命令"><a href="#git常用命令" class="headerlink" title="git常用命令"></a>git常用命令</h3><ul>
<li><strong>初始化仓库</strong></li>
</ul>
<p><code>git init repo_name</code></p>
<ul>
<li><strong>将远程仓库clone到本地</strong></li>
</ul>
<p><code>git clone https://gitee.com/cr_rui/drugstore.git</code> </p>
<ul>
<li><p><strong>添加远程仓库到本地</strong></p>
<p><code>git remote add origin https://gitee.com/cr_rui/drugstore.git</code> </p>
</li>
<li><p><strong>本地分支连接远程分支</strong></p>
</li>
</ul>
<p><code>git branch -u origin/name</code></p>
<ul>
<li><strong>将当前分支推送到远程上的同名的方便方法</strong></li>
</ul>
<p><code>git push origin HEAD </code></p>
<ul>
<li><strong>删除远程分支</strong></li>
</ul>
<p><code>git push origin --delete &#39;branch_name&#39;</code></p>
<ul>
<li><strong>删除本地分支</strong></li>
</ul>
<p>git branch -d 会在删除前检查merge状态（其与上游分支或者与head）。<br>git branch -D 是git branch –delete –force的简写，它会直接删除。</p>
<p><code>git branch -d|D &#39;branch_name&#39;</code></p>
<p><code>都是删除本地分支的方法（与删除远程分支命令相独立，要想本地和远程都删除，必须得运行两个命令）</code></p>
<h3 id="chain"><a href="#chain" class="headerlink" title="chain"></a>chain</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chain(*iterables) --&gt; chain object</span><br><span class="line">Return a chain <span class="built_in">object</span> whose .__next__() method returns elements <span class="keyword">from</span> the first iterable until it <span class="keyword">is</span> exhausted, then elements <span class="keyword">from</span> the <span class="built_in">next</span> iterable, until <span class="built_in">all</span> of the iterables are exhausted.</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">a = [[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line">b = [[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>]]</span><br><span class="line">c = itertools.chain(a, b)</span><br><span class="line">d = itertools.chain(*a, b)</span><br><span class="line">e = itertools.chain(a, *b)</span><br><span class="line">f = itertools.chain(*a, *b)</span><br><span class="line">g = itertools.chain(*(a, b))</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">list</span>(c))</span><br><span class="line">print(<span class="built_in">list</span>(d))</span><br><span class="line">print(<span class="built_in">list</span>(e))</span><br><span class="line">print(<span class="built_in">list</span>(f))</span><br><span class="line">print(<span class="built_in">list</span>(g))</span><br><span class="line">&gt;&gt;</span><br><span class="line">[[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>]]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, [<span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>]]</span><br><span class="line">[[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">[[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>]]</span><br></pre></td></tr></table></figure>

<p>string:可迭代对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;aa&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>]</span><br><span class="line">b = itertools.chain(a)</span><br><span class="line">c = itertools.chain(*a)</span><br><span class="line">print(a)</span><br><span class="line">print(<span class="built_in">list</span>(b))</span><br><span class="line">print(<span class="built_in">list</span>(c))</span><br><span class="line">&gt;&gt;</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;aa&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;aa&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------split-------</span></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">a = [[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line">b = itertools.chain(a)</span><br><span class="line">c = itertools.chain(*a)</span><br><span class="line">print(a)</span><br><span class="line">print(<span class="built_in">list</span>(b))</span><br><span class="line">print(<span class="built_in">list</span>(c))</span><br><span class="line">&gt;&gt;</span><br><span class="line">[[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line">[[<span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure>

<h2 id="Day14"><a href="#Day14" class="headerlink" title="Day14"></a>Day14</h2><h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p><strong>filter()</strong> 函数用于过滤序列，过滤掉不符合条件的元素，返回由符合条件元素组成的新列表。</p>
<p>该接收两个参数，第一个为函数，第二个为序列，序列的每个元素作为参数传递给函数进行判断，然后返回 True 或 False，最后将返回 True 的元素放到新列表中。</p>
<p><code>**注意:** *Python2.7 返回列表，Python3.x 返回迭代器对象*</code></p>
<p><strong>使用方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">filter</span>(function, iterable)</span><br></pre></td></tr></table></figure>

<p>example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">b = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x%<span class="number">2</span>==<span class="number">0</span>, a)</span><br><span class="line">print(<span class="built_in">list</span>(b))</span><br></pre></td></tr></table></figure>

<h2 id="Day13"><a href="#Day13" class="headerlink" title="Day13"></a>Day13</h2><h3 id="Git-stash"><a href="#Git-stash" class="headerlink" title="Git|stash"></a>Git|stash</h3><p>在add之后进入index, 此时可以使用git stash save “info”将改动的code放在stash库中, 地址.git/refs/stash</p>
<p>stash库没有branch的限制, 可以在任意的branch将code拿出来, 切换到对应的branch</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> push stash</span></span><br><span class="line">git stash push -m &quot;info&quot; </span><br><span class="line">-----or-----</span><br><span class="line">git stash save &quot;info&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> view all stash</span></span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> view info stash@&#123;id&#125;</span></span><br><span class="line">git stash show -p stash@&#123;id&#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> load specify stash</span></span><br><span class="line">git stash pop</span><br><span class="line">------or------</span><br><span class="line">git stash apply stash@&#123;id&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> delete</span> </span><br><span class="line">git stash drop stash@&#123;id&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Day12"><a href="#Day12" class="headerlink" title="Day12"></a>Day12</h2><h3 id="手机-API传视频参数"><a href="#手机-API传视频参数" class="headerlink" title="手机|API传视频参数"></a>手机|API传视频参数</h3><p>**手机端:**只需要response的值一样即可, 用户在手机端只需要点击视频即可, 不需要request</p>
<p>**API调用:**不仅需要传入的参数request一样, 而且也需要response的值一样</p>
<h3 id="任务传播流程"><a href="#任务传播流程" class="headerlink" title="任务传播流程"></a>任务传播流程</h3><p>![image-20210817180655004](/Users/edy/Library/Application Support/typora-user-images/image-20210817180655004.png)</p>
<p>在传递过程中, 尤其是API的调用存在参数的校验</p>
<p>对外的接口可以在一级传参中进行封装</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">input</span>(<span class="string">&#x27;a=&#x27;</span>)</span><br><span class="line">b = <span class="built_in">input</span>(<span class="string">&#x27;b=&#x27;</span>)</span><br><span class="line"></span><br><span class="line">params = &#123;</span><br><span class="line">  <span class="string">&#x27;param_a&#x27;</span>: a,</span><br><span class="line">  <span class="string">&#x27;param_b&#x27;</span>: b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#	对外参数显示a, b</span></span><br><span class="line"><span class="comment"># 而实际传递过程中是param_a, param_b</span></span><br></pre></td></tr></table></figure>

<h3 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h3><p>For a client-side API I could guess something like this:</p>
<ol>
<li>You make an API call to some url.</li>
<li>You receive a response</li>
<li>A callback function is called with the response as its arguments</li>
</ol>
<p>illustration/·ai-lou-s·-·zhui·-·shen·/</p>
<p>![image-20210818112915134](/Users/edy/Library/Application Support/typora-user-images/image-20210818112915134.png)</p>
<h3 id="thumb-url"><a href="#thumb-url" class="headerlink" title="thumb_url"></a>thumb_url</h3><p><strong>缓存文件</strong></p>
<p>Thumbs.db只是一个图片索引文件，可以加速你用缩略图方式查看图片，会随着文件夹的图片的增多也体积增大。</p>
<h2 id="Day11"><a href="#Day11" class="headerlink" title="Day11"></a>Day11</h2><h3 id="vim编辑器"><a href="#vim编辑器" class="headerlink" title="vim编辑器"></a>vim编辑器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim file  # 查看文件不编辑</span><br><span class="line">i  # 进入编辑模式</span><br><span class="line">esc  # 退出编辑模式 输入:一下指令</span><br><span class="line">    :q 即可退出vim编辑器</span><br><span class="line">    :q!(强制退出不保存)</span><br><span class="line">    :wq(保存后退出)</span><br><span class="line">    :wq!(强制保存后退出)</span><br></pre></td></tr></table></figure>

<h3 id="回调API设置"><a href="#回调API设置" class="headerlink" title="回调API设置"></a>回调API设置</h3><ol>
<li><p>首先启动API, 新起一个API_test, 对照API开发文档将所需参数填入, 运行后查看response值</p>
</li>
<li><p>之后在database中查找对应的module_id</p>
</li>
<li><p>在源码中查看所有打出response的情况, 并在log中寻找</p>
</li>
</ol>
<ul>
<li>在log中查找关键词<code>调用客户</code>info中打印</li>
</ul>
<h2 id="Day10"><a href="#Day10" class="headerlink" title="Day10"></a>Day10</h2><h3 id="debug后的版本提交流程"><a href="#debug后的版本提交流程" class="headerlink" title="debug后的版本提交流程"></a>debug后的版本提交流程</h3><p><strong>「整体上分为三个部分」</strong></p>
<ul>
<li>进入项目目录查看当前修改的内容, 确认是否要将修改的文件推上测试服</li>
<li>对文件根据命名规则打上tag</li>
<li>进入docker修改指定项目的deploy-debug.sh</li>
</ul>
<p><strong>0.查看状态</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 对当前分支状态进行查看,使用的最频繁的命令</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> modified--&gt;add-&gt;commit</span></span><br><span class="line">git status</span><br></pre></td></tr></table></figure>

<p><strong>1.进入项目目录</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd Priject_Debug</span><br></pre></td></tr></table></figure>

<p><strong>2.查看目录状态</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;</span></span><br><span class="line">return info:</span><br><span class="line">on branch master # 目前所在branch</span><br><span class="line"></span><br><span class="line">changes to be commited: # 那些文件更改了并提交了,从缓存区add到了暂存区</span><br><span class="line">    (color: green)</span><br><span class="line">    new file: xxxx.py</span><br><span class="line">    new file: xxxx.py</span><br><span class="line"></span><br><span class="line">changes not staged for commit: # 那些文件更改了还没提交,等待add添加</span><br><span class="line">	  (color: red)</span><br><span class="line">	  modified: xxx.py</span><br><span class="line">		modified: xxx.py</span><br></pre></td></tr></table></figure>

<p><strong>3.暂存分支</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git stash  <span class="comment"># 暂存分支</span></span><br><span class="line"></span><br><span class="line">git status  <span class="comment"># 查看当前分支状态</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 抛出暂存分支</span></span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<p>保存当前的修改,但是想回到之前最后一次提交的干净的工作仓库时进行的操作<code>git stash</code>将本地的修改保存起来,并且将当前代码切换到<code>HEAD</code>提交上.</p>
<p><strong>4.创建|切换分支</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 切换已经存在的分支</span></span><br><span class="line">git checkout new_created_branch</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换分支,如果分支不存在则创建分支</span></span><br><span class="line">git checkout -b new_uncreated_branch</span><br></pre></td></tr></table></figure>

<p><strong>5.查看log</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure>

<p><strong>6.查看改动|提交指定文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看xxx.py文件哪里出现了改动</span></span><br><span class="line">git diff dir/xxx.py</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 改动文件中包含不想提交的</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用git reset HEAD</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 把add到index的文件撤回到working中</span></span><br><span class="line">git reset HEAD</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> add指定修改文件</span></span><br><span class="line">git add dir/xx.py</span><br><span class="line"></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提交修改的文件</span></span><br><span class="line">git commit -m &quot;提交信息说明|修复具体的bug|增添的功能&quot;</span><br></pre></td></tr></table></figure>

<p><strong>7.打上tag|push tag</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在阿里云服务中查看命名规则</span></span><br><span class="line">git tag release-vtest_0.25.47</span><br><span class="line">“”“</span><br><span class="line">阿里云会根据明明规则检测tag</span><br><span class="line">如果符合则会创建相应的镜像</span><br><span class="line">”“”</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure>

<p><strong>8.将分支关联到远程分支</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> origin 是默认的远程版本库名称</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将本地分支关联到远程分支并提交</span></span><br><span class="line">git push --set-upstream origin cur_branch</span><br></pre></td></tr></table></figure>

<p><strong>9.容器|上线测试服</strong></p>
<p><strong>使用到7中的tag版本</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ssh root@测试环境ip</span><br><span class="line"></span><br><span class="line">docker ps  # 查看容器</span><br><span class="line">ls  # 查看测试环境内的文件</span><br><span class="line">pwd  # 查看当前路径</span><br><span class="line"></span><br><span class="line">cd ZidouBiz  # 切换到zidoubiz文件</span><br><span class="line">ls  # 查看zidoubiz文件内的文件</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 找到deploy-debug.sh文件并修改</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> vi deploy-debug.sh</span></span><br><span class="line">sh deploy-debug.sh test_0.25.47</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看版本状态</span></span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<p><strong>10.拉version-tag</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.将远程代码clone到本地</span></span><br><span class="line">git clone xxxx.xxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.查看tag</span></span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.检出tag</span></span><br><span class="line">git checkout tagName</span><br></pre></td></tr></table></figure>

<h3 id="script调试"><a href="#script调试" class="headerlink" title="script调试"></a>script调试</h3><p>在docker中对写死的脚本进行调试, 尽量加上所有的import, 如果出现“NoneType” object is not callable, 检查是否初始化了basemode父类</p>
<p>调用格式:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BaseModel.init_model_dict()</span><br></pre></td></tr></table></figure>

<h2 id="Day9"><a href="#Day9" class="headerlink" title="Day9"></a>Day9</h2><h3 id="Python内置装饰器"><a href="#Python内置装饰器" class="headerlink" title="Python内置装饰器"></a>Python内置装饰器</h3><p><strong><a target="_blank" rel="noopener" href="https://www.tutorialsteacher.com/python/staticmethod-decorator#:~:text=The%20%40staticmethod%20is%20a%20built-in%20decorator%20that%20defines,of%20a%20class%20or%20by%20the%20class%20itself.">阅读推荐</a></strong></p>
<h4 id="property-属性方法"><a href="#property-属性方法" class="headerlink" title="@property|属性方法"></a>@property|属性方法</h4><p><strong>1.@property的使用</strong></p>
<p>@property是python的一种装饰器，<strong>用来修饰方法</strong>。</p>
<p>@property是把类内方法当成属性来使用，使用@property装饰器来<strong>创建只读属性</strong></p>
<p>@property装饰器会将方法转换为相同名称的只读属性，必须要有返回值，相当于getter</p>
<p><strong>2.@property</strong></p>
<p>在类中使用, 对类中的方法进行装饰, 将方法装饰成<strong>只读属性</strong>, 在本质上相当于getter, 并且必须有返回值</p>
<h4 id="staticmethod"><a href="#staticmethod" class="headerlink" title="@staticmethod"></a>@staticmethod</h4><ul>
<li>在类中声明一个静态的方法</li>
<li> 这个方法不接收 <code>cls</code> 和  <code>self</code> 参数 </li>
<li>这个静态方法并不能访问类属性或者实例属性</li>
<li>可以使用 <code>ClassName.MethodName()</code> 和 <code>object.MethodName()</code>调用</li>
<li>它可以返回类的对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    name = <span class="string">&#x27;unknown&#x27;</span> <span class="comment"># class attribute</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.age = <span class="number">20</span>  <span class="comment"># instance attribute</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tostring</span>():</span></span><br><span class="line">        print(<span class="string">&#x27;Student Class&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student.tostring() <span class="comment"># 调用class的statcimethod</span></span><br><span class="line"><span class="string">&#x27;Student Class&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student().tostring() <span class="comment"># 调用</span></span><br><span class="line"><span class="string">&#x27;Student Class&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>std = Student() <span class="comment"># 调用instance </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>std.tostring()</span><br><span class="line"><span class="string">&#x27;Student Class&#x27;</span></span><br></pre></td></tr></table></figure>

<p>The static method cannot access the class attributes or instance attributes. It will raise an error if try to do so.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    name = <span class="string">&#x27;unknown&#x27;</span> <span class="comment"># class attribute</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.age = <span class="number">20</span>  <span class="comment"># instance attribute</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod  </span><span class="comment"># 不能在staticmethod装饰的函数中访问class属性或instance属性</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tostring</span>():</span></span><br><span class="line">        print(<span class="string">&#x27;name=&#x27;</span>,name,<span class="string">&#x27;age=&#x27;</span>,self.age)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student.tostring()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;pyshell#22&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    Student.tostring()</span><br><span class="line">  File <span class="string">&quot;&lt;pyshell#21&gt;&quot;</span>, line <span class="number">7</span>, <span class="keyword">in</span> display</span><br><span class="line">    print(<span class="string">&#x27;name=&#x27;</span>,name,<span class="string">&#x27;age=&#x27;</span>,self.age)</span><br><span class="line">NameError: name <span class="string">&#x27;name&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>

<h4 id="calssmethod"><a href="#calssmethod" class="headerlink" title="@calssmethod"></a>@calssmethod</h4><p><strong><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/368999913">classmethod阅读</a></strong></p>
<p><strong>0.用于预处理实例化对象时所接受的参数,并且返回一个初始化的类</strong></p>
<p><strong>1.作用</strong></p>
<p>将类中的实例方法改为类方法, 必须接受一个cls参数, 并且返回一个初始化的类</p>
<ul>
<li>在创建一个实例化对象时使用</li>
<li>不加装饰器的类中方法, 均是实例化方法, 只能对实例化对象进行操作, 无法对类进行操作</li>
</ul>
<p><strong>2.使用场景</strong></p>
<p>在创建一个实例化对象时, 对接受的参数格式进行预先调整, 并将调整好的格式付给类, 相当于在创建实例化对象时, 现根据参数创建一个自适应的初始类</p>
<p><strong>3.好处</strong></p>
<ul>
<li>将处理函数封装在类中, 代码更加简洁</li>
<li>使代码更加容易维护</li>
</ul>
<p><strong>4.缺点</strong></p>
<ul>
<li>在实例化时需要调用classmethod</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, year, month, day</span>):</span></span><br><span class="line">        self.year = year</span><br><span class="line">        self.month = month</span><br><span class="line">        self.day = day</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify_str</span>(<span class="params">cls, <span class="built_in">str</span></span>):</span></span><br><span class="line">        <span class="comment"># tmp = str.split(&#x27;-&#x27;)</span></span><br><span class="line">        <span class="comment"># year = tmp[0]</span></span><br><span class="line">        <span class="comment"># month = tmp[1]</span></span><br><span class="line">        <span class="comment"># day = tmp[2]</span></span><br><span class="line">        year, month, day = <span class="built_in">str</span>.split(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        init_cls = cls(year, month, day)</span><br><span class="line">        <span class="keyword">return</span> init_cls</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">out_date</span>(<span class="params">self</span>):</span></span><br><span class="line">        year = <span class="string">&quot;year: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.year)</span><br><span class="line">        month = <span class="string">&quot;month: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.month)</span><br><span class="line">        day = <span class="string">&quot;day: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.day)</span><br><span class="line">        print(year, month, day, sep=<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">time = A.modify_str(<span class="string">&quot;2021-8-11&quot;</span>)</span><br><span class="line">time.out_date()</span><br><span class="line">&gt;&gt;</span><br><span class="line">error <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line"><span class="comment"># 在创建实例化对象时没有使用classmethod</span></span><br><span class="line">time = A(<span class="string">&quot;2021-8-11&quot;</span>)</span><br><span class="line">time.out_date()</span><br><span class="line"></span><br><span class="line">TypeError: __init__() missing <span class="number">2</span> required positional arguments: <span class="string">&#x27;month&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;day&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="Day8"><a href="#Day8" class="headerlink" title="Day8"></a>Day8</h2><h3 id="API调用"><a href="#API调用" class="headerlink" title="API调用"></a>API调用</h3><p>⚠️:如果API在目录controller中不存在<code>controller/api_controller</code>,即不存在<code>action_api_controller</code>那么此api在<code>ZidouBiz/api_controller</code>里,并且命名规则为<code>api_action[set|get|del]</code></p>
<p><strong>action_api:可以被外界调用</strong></p>
<p><strong>api_action:内部api</strong></p>
<p>使用apipost调用简单的api时[在api_controller中存在]</p>
<p>一般在apipost可以测试的都是action_api_name</p>
<p>端口需要在源文件中查询</p>
<p><code>http://127.0.0.1:8000|9000/class_name/api_name</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件结构如下</span></span><br><span class="line">controller||directory</span><br><span class="line">		&gt;api_name_controller||api_file</span><br><span class="line">  			&gt;<span class="class"><span class="keyword">class</span> <span class="title">API_name</span>:</span>||class_name</span><br><span class="line">      			&gt;<span class="function"><span class="keyword">def</span> <span class="title">action_api</span>||<span class="title">api_name</span></span></span><br></pre></td></tr></table></figure>

<p>⚠️：紫豆所有api调用request都是post请求，在测试调用API时使用<code>使用pycharm中的本地文件进行调用</code></p>
<p>调用一次api需要获得sign</p>
<p>function:调用的api==&gt;本地存住在api_controllert.py</p>
<p>action:增删改</p>
<p>⚠️:tokrn不是secret, secert的获取<code>开通API接口</code></p>
<p>需要修改的参数有：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">phone&lt;--&gt;secret==&gt;紫豆后台获取</span><br><span class="line">params=&#123;</span><br><span class="line">  <span class="string">&quot;key&quot;</span>: value</span><br><span class="line">&#125;</span><br><span class="line">url=<span class="string">&quot;http://api.zidouzone.com/api/bup&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Counter"><a href="#Counter" class="headerlink" title="Counter"></a>Counter</h3><p>计数器：返回一个实力化对象「dict」，对象本身iterable</p>
<p>可以使用list(Counter.items|keys(default)|value()) 查看对应的返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">c1 = Counter()  <span class="comment"># a new, empty counter</span></span><br><span class="line">c2 = Counter(<span class="string">&#x27;gallahad&#x27;</span>)  <span class="comment"># a new counter from an iterable</span></span><br><span class="line">c3 = Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;)  <span class="comment"># a new counter from a mapping</span></span><br><span class="line">c4 = Counter(a=<span class="number">4</span>, b=<span class="number">2</span>)  <span class="comment"># a new counter from keyword args</span></span><br><span class="line">print(c1, c2, c3, c4, sep=<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Counter()</span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;l&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;g&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;h&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;d&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;)</span><br><span class="line">Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Day7"><a href="#Day7" class="headerlink" title="Day7"></a>Day7</h2><h3 id="熟悉项目"><a href="#熟悉项目" class="headerlink" title="熟悉项目"></a>熟悉项目</h3><ul>
<li>通过script运行部分函数加深了解</li>
</ul>
<h3 id="紫豆助手"><a href="#紫豆助手" class="headerlink" title="紫豆助手"></a>紫豆助手</h3><h4 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h4><ul>
<li>本项目是一个微信社群管理工具，可以通过微信机器人实现一些自动化操作，并统计微信群的各种信息。</li>
<li>本项目使用了类似MVC的设计模式，Model将MongoDB的数据封装为统一的model类以便使用，Controller接受前端的接口调用并实现所需功能。</li>
<li>本项目有两种方式处理外部信息，第一种是接受接口调用，url格式为 domin/controller_name/interface_name，Controller中可被外界调用的接口，函数名必须加上”action_”前缀， 接口返回值必须用make_response方法。第二种是处理Android_Server通过RabbitMQ发来的微信实时消息，消息于celery的celery_newmsg队列中，项目中处理消息的方法在component/msg_handler中。</li>
</ul>
<h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">├── celery_app.py           初始化celery配置</span><br><span class="line">├── celery_config.py        celery配置文件，包括队列配置和beat配置等</span><br><span class="line">├── component               各种工具函数，处理微信消息的组件和celery任务函数等</span><br><span class="line">├── config                  各种配置数据和python依赖包文件等</span><br><span class="line">├── controller              接口文件</span><br><span class="line">├── doc                     文档</span><br><span class="line">├── error-config            错误码信息，git子模块，和前端共同维护</span><br><span class="line">├── model                   数据model</span><br><span class="line">├── rabbitmq                rabbitMQ的配置和一些直接发给MQ的函数</span><br><span class="line">├── static                  一些静态数据文件</span><br><span class="line">├── supervisord_conf        supervisor配置文件</span><br><span class="line">├── tests                   单元测试</span><br><span class="line">├── upgrade.sh              上线脚本</span><br><span class="line">├── ZidouBiz.py             项目启动入口</span><br><span class="line">└── ZidouLocal.py           本地调试启动入口</span><br></pre></td></tr></table></figure>

<h4 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h4><p>安装python 3.6.4以上， 运行pip install -r config/requirements.txt安装依赖包 安装Redis 如果想在服务器运行还需要： MongoDB, ElasticSearch, RabbitMQ, Nginx, Supervisor 如在生产环境运行，务必在主目录下创建名为”online_config”的文件，用来区分生产环境与正式环境，切记。</p>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p><strong><a target="_blank" rel="noopener" href="http://ruanyifeng.com/blog/2018/02/docker-tutorial.html">【推荐阅读】</a></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh root@test_env_ip</span><br><span class="line">docker ps</span><br><span class="line">docker exec -it name &#x2F;bin&#x2F;bash</span><br><span class="line">pip3 install ipython -i 清华园(mirrors_url)</span><br><span class="line">ipython</span><br></pre></td></tr></table></figure>

<h3 id="cls"><a href="#cls" class="headerlink" title="cls"></a>cls</h3><h4 id="一、cls含义"><a href="#一、cls含义" class="headerlink" title="一、cls含义"></a><strong>一、cls含义</strong></h4><p>python中cls代表的是类的本身，相对应的self则是类的一个实例对象。</p>
<h4 id="二、cls用法"><a href="#二、cls用法" class="headerlink" title="二、cls用法"></a><strong>二、cls用法</strong></h4><p>cls可以在静态方法中使用，并通过cls()方法来实例化一个对象。</p>
<h3 id="mongo"><a href="#mongo" class="headerlink" title="mongo"></a>mongo</h3><table>
<thead>
<tr>
<th>mongodb聚合操作</th>
<th>SQL 操作/函数</th>
</tr>
</thead>
<tbody><tr>
<td>$match</td>
<td>where</td>
</tr>
<tr>
<td>$group</td>
<td>group by</td>
</tr>
<tr>
<td>$match</td>
<td>having</td>
</tr>
<tr>
<td>$project</td>
<td>select</td>
</tr>
<tr>
<td>$sort</td>
<td>order by</td>
</tr>
<tr>
<td>$limit</td>
<td>limit</td>
</tr>
<tr>
<td>$sum</td>
<td>sum()</td>
</tr>
<tr>
<td>$sum</td>
<td>count()</td>
</tr>
<tr>
<td>$lookup （v3.2 新增）</td>
<td>join</td>
</tr>
</tbody></table>
<h2 id="Day6"><a href="#Day6" class="headerlink" title="Day6"></a>Day6</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="类对象"><a href="#类对象" class="headerlink" title="类对象"></a>类对象</h4><p>指在对class进行实例化时所创建的对象object，在class中如果定义了一个_attribute，虽然在instance.attribute无法访问，但可以使用<code>instance._attribute</code>进行访问</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">xx：公有变量</span><br><span class="line"></span><br><span class="line">_xx：前置单下划线，私有化属性或方法，一般来讲，变量_xx被看作是“私有的”，在模块或类外不可以使用。当变量是私有的时候，用_xx 来表示变量是很好的习惯。类对象和子类可以访问,这并不能完全做到真正的私有，只是约定俗成的而已，这样写表示不希望这个变量在外部被直接调用</span><br><span class="line"></span><br><span class="line">==&gt;模块和类外不可以使用｜但类对象和子类可以访问｜并不是真正的私有</span><br><span class="line"></span><br><span class="line">__xx：前置双下划线，私有化属性或方法，无法在外部直接访问（名字重整所以访问不到,只能是允许这个类本身进行访问了。连子类也不可以）</span><br><span class="line"></span><br><span class="line">==&gt;真正的私有化属性，只允许在calss本身进行调用，子类和类对象访问不到</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">__xx__：前后双下划线，系统定义名字（这就是在python中强大的魔法方法），因为变量名__xxx__对Python 来说有特殊含义，对于普通的变量应当避免这种命名风格。</span><br><span class="line"></span><br><span class="line">xx_：后置单下划线，用于避免与Python关键词的冲突</span><br></pre></td></tr></table></figure>

<h2 id="Day5"><a href="#Day5" class="headerlink" title="Day5"></a>Day5</h2><h3 id="缺省"><a href="#缺省" class="headerlink" title="缺省"></a>缺省</h3><p>缺省=default</p>
<h3 id="Head-Body"><a href="#Head-Body" class="headerlink" title="Head|Body"></a>Head|Body</h3><h4 id="Head"><a href="#Head" class="headerlink" title="Head"></a>Head</h4><p>head定义文档的头部，是所有头部元素的容器。</p>
<p><code>&lt;head&gt;</code>中的元素可以引用脚本、文档的各种属性和信息，包括文档的标题、在web中的位置以及和其它文档的关系等。绝大多数文档头部包含的数据都不会真正作为内容显示给读者。</p>
<p><code>&lt;title&gt;、&lt;meta&gt;、&lt;link&gt;、&lt;style&gt;、&lt;script&gt;</code></p>
<p>应该把 <code>&lt;head&gt;</code> 标签放在文档的开始处，紧跟着<code>&lt;html&gt;</code> 后面，并处于<code> &lt;body&gt;</code> 标签之前。</p>
<p>文档的头部经常会包含一些 <code>&lt;meta&gt;</code> 标签，用来告诉浏览器关于文档的附加信息。</p>
<h4 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一个页面的信息，也就是浏览器呈现出来的，用户看到的页面效果。也就是说这里是网页的主体</span><br></pre></td></tr></table></figure>

<h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><p>文档对象模型（Document Object Model，简称DOM），是<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/W3C%E7%BB%84%E7%BB%87/11005671">W3C组织</a>推荐的处理<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%8F%AF%E6%89%A9%E5%B1%95%E7%BD%AE%E6%A0%87%E8%AF%AD%E8%A8%80">可扩展置标语言</a>的标准<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3">编程接口</a>。它是一种与平台和语言无关的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3">应用程序接口</a>(API),它可以动态地访问程序和脚本,更新其内容、结构和www文档的风格(目前,HTMl和XML文档是通过说明部分定义的)。文档可以进一步被处理，处理的结果可以加入到当前的页面。DOM是一种基于树的API文档，它要求在处理过程中整个文档都表示在<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%AD%98%E5%82%A8%E5%99%A8">存储器</a>中。另外一种简单的API是基于事件的SAX，它可以用于处理很大的XML文档，由于大，所以不适合全部放在存储器中处理。</p>
<h3 id="XHR"><a href="#XHR" class="headerlink" title="XHR"></a>XHR</h3><h4 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h4><pre><code>xhr，全称为XMLHttpRequest，用于与服务器交互数据，是ajax功能实现所依赖的对象，jquery中的ajax就是对 xhr的封装。
</code></pre>
<h4 id="2、xhr"><a href="#2、xhr" class="headerlink" title="2、xhr"></a>2、xhr</h4><pre><code>XMLHttpRequest 对象提供了对 HTTP 协议的完全的访问，包括做出 POST 和 HEAD 请求以及普通的 GET 请求的能力。XMLHttpRequest 可以同步或异步地返回 Web 服务器的响应，并且能够以文本或者一个 DOM 文档的形式返回内容。

xhr 接口强制要求每个请求都具备严格的HTTP语义–应用提供数据和URL，浏览器格式化请求并管理每个连接的完整生命周期，所以XHR仅仅允许应用自定义一些HTTP首部，但更多的首部是不能自己设定的。

浏览器会拒绝绝对不安全的首部重写，以保证应用不能假扮用户代理、用户或请求来源，如Origin由浏览器自动设置，Access-Control-Allow-Origin由服务器设置，如果接受该请求，不包含该字段即可，浏览器发出的请求将作废。
</code></pre>
<p>   如果想要启用cookie和HTTP认证，客户端必须在发送请求时通过XHR对象发送额外的属性（withCredentials），而服务器也需要以Access-Control-Allow-Credentials响应，表示允许应用发送隐私数据。同样，如果客户需要写入或读取自定义HTTP标头或想要使用“非简单的方法”的请求，那么它必须首先通过发出一个预备请求，以获取第三方服务器的许可！</p>
<h3 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h3><p>AJAX = 异步 JavaScript 和 XML。</p>
<p>AJAX 是一种用于创建快速动态网页的技术。</p>
<p>通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p>
<p>传统的网页（不使用 AJAX）如果需要更新内容，必需重载整个网页面。</p>
<h2 id="Day4"><a href="#Day4" class="headerlink" title="Day4"></a>Day4</h2><h3 id="API测试"><a href="#API测试" class="headerlink" title="API测试"></a>API测试</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">前置函数：得到一个编号｜签名｜获取response</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_nonce</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    generate a random string which length -&gt; [1,8]</span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    base_str = <span class="built_in">list</span>(<span class="string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># random.randint(a, b) ==&gt; [a, b]</span></span><br><span class="line">    length = random.randint(<span class="number">1</span>, <span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">    samples = random.sample(base_str, length)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(samples)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_sign</span>(<span class="params">secret, data</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    calculate the sign</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        secret:</span></span><br><span class="line"><span class="string">        data:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    temp_json = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># dict.update(sub_dict): add sub_dict to dict and if key conflict</span></span><br><span class="line">    <span class="comment"># update the &#x27;value&#x27;</span></span><br><span class="line">    temp_json.update(data)</span><br><span class="line"></span><br><span class="line">    pre_list = [<span class="built_in">str</span>(k) + <span class="string">&quot;=&quot;</span> + <span class="built_in">str</span>(v) <span class="keyword">for</span> k, v <span class="keyword">in</span> temp_json.items()]</span><br><span class="line">    print(<span class="string">&#x27;pre_list is :&#x27;</span>, pre_list, <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    pre_list.sort()</span><br><span class="line">    pre_str = <span class="string">&#x27;&amp;&#x27;</span>.join(pre_list)</span><br><span class="line">    pre_str = pre_str + secret</span><br><span class="line">    print(pre_str)</span><br><span class="line">    m = hashlib.md5()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># string.encode() --&gt; 对字符串进行编码，default=utf-8</span></span><br><span class="line">    m.update(pre_str.encode())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> m.hexdigest()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_request_data</span>(<span class="params">phone, function, action, params, secret</span>):</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;phone&quot;</span>: phone,</span><br><span class="line"></span><br><span class="line">        <span class="comment"># int(time.time()) ==&gt; remainder the integer|</span></span><br><span class="line">        <span class="string">&quot;timestamp&quot;</span>: time.strftime(<span class="string">&quot;%Y%m%d%H%M%S&quot;</span>, time.localtime(<span class="built_in">int</span>(time.time()))),</span><br><span class="line">        <span class="string">&quot;nonce&quot;</span>: get_nonce(),</span><br><span class="line">        <span class="string">&quot;function&quot;</span>: function,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: action,</span><br><span class="line">        <span class="string">&quot;params&quot;</span>: json.dumps(params)</span><br><span class="line">    &#125;</span><br><span class="line">    sign = get_sign(secret, data)</span><br><span class="line">    data.update(&#123;<span class="string">&quot;sign&quot;</span>: sign&#125;)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 先有一个</span></span><br><span class="line">url = <span class="string">&quot;http://api.zidouzone.com/api/pub&quot;</span>  <span class="comment"># test env</span></span><br><span class="line"><span class="comment"># url = &quot;http://api.zidouchat.com/api/pub&quot;  # release env</span></span><br><span class="line"><span class="comment"># url = &quot;http://127.0.0.1:8000/api/pub&quot;  # local env</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  default parameters</span></span><br><span class="line">phone = <span class="string">&quot;15714358139&quot;</span></span><br><span class="line"></span><br><span class="line">function = <span class="string">&quot;send_msg&quot;</span>  <span class="comment"># select the module</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># can select from &#x27;set|get|del&#x27;</span></span><br><span class="line">action = <span class="string">&quot;set&quot;</span></span><br><span class="line"></span><br><span class="line">a = &#123;<span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;秀儿你好。。&#x27;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;程序员小哥公开了他的上班摸鱼神器！网友：秀儿你好~&#x27;</span>, <span class="string">&#x27;imageUrl&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;linkUrl&#x27;</span>: <span class="string">&#x27;http://mp.weixin.qq.com/..&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># the format | wechat`s information</span></span><br><span class="line">xml = &#123;</span><br><span class="line">    <span class="string">&quot;appName&quot;</span>: <span class="string">&quot;美团团购丨优选外卖单车美食酒店&quot;</span>,</span><br><span class="line">    <span class="string">&quot;appid&quot;</span>: <span class="string">&quot;wxde8ac0a21135c07d&quot;</span>,</span><br><span class="line">    <span class="string">&quot;appservicetype&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;desc&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pagepath&quot;</span>: <span class="string">&quot;index/pages/mt/mt.html&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pkginfoType&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;thumbAESKey&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;thumbFileId&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;thumbHeight&quot;</span>: <span class="number">576</span>,</span><br><span class="line">    <span class="string">&quot;thumbMD5&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;thumbSize&quot;</span>: <span class="number">52529</span>,</span><br><span class="line">    <span class="string">&quot;thumbUrl&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;thumbWidth&quot;</span>: <span class="number">720</span>,</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;吃喝玩乐 尽在美团&quot;</span>,</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;username&quot;</span>: <span class="string">&quot;gh_870576f3c6f9@app&quot;</span>,</span><br><span class="line">    <span class="string">&quot;version&quot;</span>: <span class="number">781</span>,</span><br><span class="line">    <span class="string">&quot;weappIconUrl&quot;</span>: <span class="string">&quot;http://wx.qlogo.cn/..&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">link = &#123;</span><br><span class="line">    <span class="string">&#x27;linkUrl&#x27;</span>: <span class="string">&#x27;http://mp.weixin.qq.com/s?&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;程序员小哥公开了他的上班摸鱼神器！网友：秀儿你好~&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;秀儿你好。。&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;imageUrl&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">bot在chatroom中发送message时，发送的message均已card的形式存在，</span></span><br><span class="line"><span class="string">我们需要在发送前set下title【type:文本】｜description【type:文本】｜image【type:url】</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&quot;msg&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;link&quot;</span>,</span><br><span class="line">            <span class="string">&quot;linkUrl&quot;</span>: <span class="string">&quot;https://news.online.sh.cn/..&quot;</span>,</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;test&quot;</span>,  <span class="comment"># 在chatroom中展示的卡片链接标题</span></span><br><span class="line">            <span class="string">&quot;description&quot;</span>: <span class="string">&quot;123456&quot;</span>,  <span class="comment"># 在card中显示描述信息</span></span><br><span class="line">            <span class="comment"># set在card中的photo</span></span><br><span class="line">            <span class="string">&quot;imageUrl&quot;</span>: <span class="string">&quot;https://cdn.jsdelivr.net/gh/..&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment"># 选择chatroom，可以contains multiple rooms</span></span><br><span class="line">    <span class="string">&quot;chatroom_list&quot;</span>: [<span class="string">&quot;10696050004037900&quot;</span>]</span><br><span class="line">    <span class="comment"># &quot;callback&quot;: &quot;http://txmtest.zidouchat.com/groupbuy/get_detail&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># question: who get the phone | chatroom?</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">from mongodb --table|client_chatroom_r|</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># get the &#x27;secret&#x27; from ziDou</span></span><br><span class="line">secret = <span class="string">&quot;afd24967eb9e469239c07652f7c9f6ef&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># the scripts of calculating the sign</span></span><br><span class="line">data = get_request_data(phone, function, action, params, secret)</span><br><span class="line"></span><br><span class="line"><span class="comment"># use &#x27;get or post&#x27;</span></span><br><span class="line">res = requests.post(url, headers=&#123;<span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json&quot;</span>&#125;,</span><br><span class="line">                    data=json.dumps(data)).content.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print the responses</span></span><br><span class="line">print(res)</span><br><span class="line">print(json.loads(res))</span><br><span class="line">print(json.dumps(a))</span><br></pre></td></tr></table></figure>

<h3 id="Api请求"><a href="#Api请求" class="headerlink" title="Api请求"></a>Api请求</h3><h4 id="get｜post区别"><a href="#get｜post区别" class="headerlink" title="get｜post区别"></a>get｜post区别</h4><ol>
<li>最直观的区别就是GET把参数包含在URL中，POST通过request body传递参数</li>
</ol>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">get</th>
<th align="center">post</th>
</tr>
</thead>
<tbody><tr>
<td align="center">回退</td>
<td align="center">无害</td>
<td align="center">再次提交</td>
</tr>
<tr>
<td align="center">产生url被bookmark</td>
<td align="center">可以</td>
<td align="center">不可以</td>
</tr>
<tr>
<td align="center">主动被浏览器cache</td>
<td align="center">会</td>
<td align="center">不会</td>
</tr>
<tr>
<td align="center">request编码</td>
<td align="center">url</td>
<td align="center">多种</td>
</tr>
<tr>
<td align="center">请求参数在浏览器的历史</td>
<td align="center">会</td>
<td align="center">不会</td>
</tr>
<tr>
<td align="center">url传递的参数</td>
<td align="center">长度受限</td>
<td align="center">无限制</td>
</tr>
<tr>
<td align="center">对参数的数据类型</td>
<td align="center">ascii</td>
<td align="center">无限制</td>
</tr>
<tr>
<td align="center">安全性</td>
<td align="center">参数暴露在url中</td>
<td align="center">安全</td>
</tr>
<tr>
<td align="center">参数传递方式</td>
<td align="center">url</td>
<td align="center">request body</td>
</tr>
</tbody></table>
<h3 id="Str-encode"><a href="#Str-encode" class="headerlink" title="Str.encode"></a>Str.encode</h3><p>Python encode() 方法以 <em>encoding</em> 指定的编码格式编码字符串。errors参数可以指定不同的错误处理方案。</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><em>encoding</em></td>
<td align="left">可选。字符串。规定要使用的编码。默认是 UTF-8。</td>
</tr>
<tr>
<td align="center"><em>errors</em></td>
<td align="left">可选。字符串。规定错误方法。合法值是： ‘backslashreplace’ - 使用反斜杠代替无法编码的字符 ‘ignore’ - 忽略无法编码的字符 ‘namereplace’ - 用解释字符的文本替换字符 ‘strict’ - 默认值，失败时引发错误 ‘replace’ - 用问号替换字符 ‘xmlcharrefreplace’ - 用 xml 字符替换字符</td>
</tr>
</tbody></table>
<h3 id="dict-update"><a href="#dict-update" class="headerlink" title="dict.update"></a>dict.update</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将dict中的key-value更新到supdict中，其中如果碰到key-conflict，则更新key-value</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用方法</span></span><br><span class="line">super_dict.update(sub_dict)</span><br></pre></td></tr></table></figure>

<h3 id="json基本操作"><a href="#json基本操作" class="headerlink" title="json基本操作"></a>json基本操作</h3><p><strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/daerzei/article/details/100598901">【辅助阅读】</a></strong></p>
<p>一般是python对象「str|dict|tuple|dict」与json（可以理解为dict+）</p>
<p>json =&gt; {“key”: “value”} 双引号</p>
<p>dict =&gt;{‘key’: ‘value’}|双引号｜单引号都可以</p>
<ol>
<li>dumps</li>
</ol>
<p>将python对象格式化成json字符</p>
<ol start="2">
<li>loads</li>
</ol>
<p>将字符串解码成python对象</p>
<ol start="3">
<li>dump</li>
</ol>
<p>将python对象写入json文件中</p>
<ol start="4">
<li>load</li>
</ol>
<p>加载json格式文件，返回python对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span>=&#123;<span class="string">&#x27;article&#x27;</span>:<span class="string">&#x27;中华人民共和国共和国万岁&#x27;</span>,<span class="string">&#x27;tag&#x27;</span>:<span class="string">&#x27;中国共产党万岁&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># 将python对象格式化成json字符串</span></span><br><span class="line">encoded_json=json.dumps(<span class="built_in">str</span>,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">print(encoded_json,<span class="built_in">type</span>(encoded_json))</span><br><span class="line">&gt;&gt;</span><br><span class="line">&#123;<span class="string">&quot;article&quot;</span>: <span class="string">&quot;xxx&quot;</span>, <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;xxx&quot;</span>&#125; &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">str</span>&#x27;&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># 将<span class="title">json</span>字符串解码成<span class="title">python</span>对象</span></span><br><span class="line">decode_json=json.loads(encoded_json)</span><br><span class="line">print(decode_json,<span class="built_in">type</span>(decode_json))</span><br><span class="line">&gt;&gt;</span><br><span class="line">&#123;<span class="string">&quot;article&quot;</span>: <span class="string">&quot;xxx&quot;</span>, <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;xxxx&quot;</span>&#125; &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">dict</span>&#x27;&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># <span class="title">json</span>.<span class="title">dump</span>主要用来将<span class="title">python</span>对象写入<span class="title">json</span>文件</span></span><br><span class="line">f = open(&#x27;demo.json&#x27;,&#x27;w&#x27;,encoding=&#x27;utf-8&#x27;)</span><br><span class="line">json.dump(decode_json,f,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">f.close()</span><br><span class="line">&gt;&gt;</span><br><span class="line">|demo.json|</span><br><span class="line">|&#123;xxx: xx, xxx: xxx&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># json.load加载json格式文件，返回python对象</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;demo.json&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">data = json.load(f)</span><br><span class="line">print(data,<span class="built_in">type</span>(data))</span><br><span class="line">f.close()</span><br><span class="line">&gt;&gt;</span><br><span class="line">&#123;<span class="string">&quot;xxx&quot;</span>: xxx, <span class="string">&quot;xxx&quot;</span>:xxx&#125; &lt;calss <span class="string">&#x27;dict&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="logging｜查看log"><a href="#logging｜查看log" class="headerlink" title="logging｜查看log"></a>logging｜查看log</h3><h4 id="什么是log？"><a href="#什么是log？" class="headerlink" title="什么是log？"></a>什么是log？</h4><p>记录某些软件运行时所发生事件的方法</p>
<h4 id="日志的作用"><a href="#日志的作用" class="headerlink" title="日志的作用"></a>日志的作用</h4><ol>
<li>了解软件｜系统｜应用运行情况</li>
<li>分析用户操作行为｜类型</li>
<li>发现bug解决问题</li>
</ol>
<h4 id="日志的等级"><a href="#日志的等级" class="headerlink" title="日志的等级"></a>日志的等级</h4><p>通常只需要记录应用程序的异常信息、错误信息等，这样既可以减小服务器的I/O压力</p>
<ul>
<li>DEBUG</li>
<li>INFO</li>
<li>NOTICE</li>
<li>WARNING</li>
<li>ERROR</li>
<li>CRITICAL</li>
<li>ALERT</li>
<li>EMERGENCY</li>
</ul>
<h4 id="日志的格式"><a href="#日志的格式" class="headerlink" title="日志的格式"></a>日志的格式</h4><p>一条日志信息对应的是一个事件的发生</p>
<ul>
<li>事件发生时间</li>
<li>事件发生位置</li>
<li>事件的严重程度–日志级别</li>
<li>事件内容</li>
</ul>
<p>日志的格式可以自定义</p>
<h4 id="log的实现【logging】"><a href="#log的实现【logging】" class="headerlink" title="log的实现【logging】"></a>log的实现【logging】</h4><p><code>标准库函数</code></p>
<p>logging模块默认定义了以下几个日志等级，它允许开发人员自定义其他日志级别，但是这是不被推荐的，尤其是在开发供别人使用的库时，因为这会导致日志级别的混乱。</p>
<table>
<thead>
<tr>
<th align="center">level</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DEBUG</td>
<td align="left">最详细的日志信息，典型应用场景是 问题诊断</td>
</tr>
<tr>
<td align="center">INFO</td>
<td align="left">信息详细程度仅次于DEBUG，通常只记录关键节点信息，用于确认一切都是按照我们预期的那样进行工作</td>
</tr>
<tr>
<td align="center">WARNING</td>
<td align="left">当某些不期望的事情发生时记录的信息（如，磁盘可用空间较低），但是此时应用程序还是正常运行的</td>
</tr>
<tr>
<td align="center">ERROR</td>
<td align="left">由于一个更严重的问题导致某些功能不能正常运行时记录的信息</td>
</tr>
<tr>
<td align="center">CRITICAL</td>
<td align="left">当发生严重错误，导致应用程序不能继续运行时记录的信息</td>
</tr>
</tbody></table>
<ul>
<li>开发时，使用debug或info来获取详细的日志信息，进行来发部署</li>
<li>上线时，使用warning｜error｜critical级别的日志来降低I/O提高效率</li>
</ul>
<p>「上面列表中的日志等级是从上到下依次升高的，即：DEBUG &lt; INFO &lt; WARNING &lt; ERROR &lt; CRITICAL，而日志的信息量是依次减少的」</p>
<p>「当为一个应用程序指定log level时，只会记录大于等于次level的信息」</p>
<h4 id="logging使用方法"><a href="#logging使用方法" class="headerlink" title="logging使用方法"></a>logging使用方法</h4><ul>
<li>使用logging提供的模块级别的函数</li>
<li>使用Logging日志系统的四大组件【module级别的封装】</li>
</ul>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>logging.debug(msg, *args, **kwargs)</td>
<td>创建一条严重级别为DEBUG的日志记录</td>
</tr>
<tr>
<td>logging.info(msg, *args, **kwargs)</td>
<td>创建一条严重级别为INFO的日志记录</td>
</tr>
<tr>
<td>logging.warning(msg, *args, **kwargs)</td>
<td>创建一条严重级别为WARNING的日志记录</td>
</tr>
<tr>
<td>logging.error(msg, *args, **kwargs)</td>
<td>创建一条严重级别为ERROR的日志记录</td>
</tr>
<tr>
<td>logging.critical(msg, *args, **kwargs)</td>
<td>创建一条严重级别为CRITICAL的日志记录</td>
</tr>
<tr>
<td>logging.log(level, *args, **kwargs)</td>
<td>创建一条严重级别为level的日志记录</td>
</tr>
<tr>
<td>logging.basicConfig(**kwargs)</td>
<td>对root logger进行一次性配置</td>
</tr>
</tbody></table>
<p><code>logging.basicConfig(**kwargs)</code>函数用于指定“要记录的日志级别”、“日志格式”、“日志输出位置”、“日志文件的打开模式”等信息，其他几个都是用于记录各个级别日志的函数。</p>
<table>
<thead>
<tr>
<th>组件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>loggers</td>
<td>提供应用程序代码直接使用的接口</td>
</tr>
<tr>
<td>handlers</td>
<td>用于将日志记录发送到指定的目的位置</td>
</tr>
<tr>
<td>filters</td>
<td>提供更细粒度的日志过滤功能，用于决定哪些日志记录将会被输出（其它的日志记录将会被忽略）</td>
</tr>
<tr>
<td>formatters</td>
<td>用于控制日志信息的最终输出格式</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.debug(<span class="string">&#x27;debug log&#x27;</span>)</span><br><span class="line">logging.info(<span class="string">&#x27;info log&#x27;</span>)</span><br><span class="line">logging.warning(<span class="string">&#x27;warning log&#x27;</span>)</span><br><span class="line">logging.error(<span class="string">&#x27;error log&#x27;</span>)</span><br><span class="line">logging.critical(<span class="string">&#x27;critical log&#x27;</span>)</span><br><span class="line">&gt;&gt;</span><br><span class="line">WARNING:root:This <span class="keyword">is</span> a warning log.</span><br><span class="line">ERROR:root:This <span class="keyword">is</span> a error log.</span><br><span class="line">CRITICAL:root:This <span class="keyword">is</span> a critical log.</span><br></pre></td></tr></table></figure>

<p><strong>Q1为什么debug和info没有打印？</strong></p>
<p>logging函数级别是<code>WARNING</code></p>
<p><strong>Q2打印的字段含义</strong></p>
<p>日志级别：日志器名称：日志内容</p>
<p>因为logging的日志器格式basic_format为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;%(levelname)s:%(name)s:(message)%s&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="hashlib-md5-hexdigest"><a href="#hashlib-md5-hexdigest" class="headerlink" title="hashlib.md5|hexdigest"></a>hashlib.md5|hexdigest</h3><h4 id="用途简介"><a href="#用途简介" class="headerlink" title="用途简介"></a>用途简介</h4><p>对二进制信息进行加密，形成一个长度固定32的数据块【摘要加密算法】，生成一个object，使用.hedigest()获取可读性信息</p>
<h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># create an instance object</span></span><br><span class="line">md = hashlib.md5()</span><br><span class="line"></span><br><span class="line"><span class="comment"># use update--&gt;add information(only binary data type)</span></span><br><span class="line"><span class="comment"># use str.encode(&#x27;utf-8&#x27;) translate the &#x27;string&#x27; to &#x27;binary&#x27;</span></span><br><span class="line">md.update(<span class="string">&#x27;string&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># gengerate a memory addression</span></span><br><span class="line"><span class="comment"># use hexdigesmdt() to access the coed-info</span></span><br><span class="line">print(md.hexdigest()) --&gt; len=32</span><br></pre></td></tr></table></figure>

<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>python中所有数据结构都是对象</p>
<h4 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h4><p>最基本的参数，按照位置一一对应「等同于其他语言基本参数」</p>
<p>def fun(para1, para2)</p>
<h4 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h4><p>等同于c++，在某些情况下提供方便</p>
<p>def fun(para1, para2=val)</p>
<p>⚠️默认参数必须在最右端</p>
<p>python解释器会将默认参数作为一个公共对象来对待，多次调用含有默认参数的函数，就会进行多次修改。  因此定义默认参数时一定要使用<strong>不可变对象</strong>(int、float、str、tuple)。使用可变对象语法上没错，但在逻辑上是不安全的，代码量非常大时，容易产生很难查找的bug。</p>
<h4 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h4><p>目的：「0｜+输入参数个数未知时，方便函数调用，可变参数将以tuple的形式<strong>传递</strong>」</p>
<p>格式：*参数</p>
<p>Input:[]|()</p>
<h4 id="关键字参数"><a href="#关键字参数" class="headerlink" title="关键字参数"></a>关键字参数</h4><p>目的：「0|+输入参数以dict的形式传递」</p>
<p>格式：**kw</p>
<h4 id="命名关键字参数"><a href="#命名关键字参数" class="headerlink" title="命名关键字参数"></a>命名关键字参数</h4><p>目的：「在关键字参数前增加一个“*”」</p>
<p>区别：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">关键字参数</th>
<th align="center">命名关键字参数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">参数名字</td>
<td align="center">任何名字都可以’key’</td>
<td align="center">只能是*最后的key</td>
</tr>
</tbody></table>
<p>⚠️：如果在使用关键字参数前使用了可变参数，则关键字参数不在添加“*” ，分隔</p>
<hr>
<p>数据流程节点</p>
<p>phone「client」–设备「bot」–服务器「As服务器（有八个容器）」【消息type–a_message】</p>
<h2 id="Day3"><a href="#Day3" class="headerlink" title="Day3"></a>Day3</h2><h3 id="CubicWeb"><a href="#CubicWeb" class="headerlink" title="CubicWeb"></a>CubicWeb</h3><h3 id="RabbitMP"><a href="#RabbitMP" class="headerlink" title="RabbitMP"></a>RabbitMP</h3><h3 id="kibana"><a href="#kibana" class="headerlink" title="kibana"></a>kibana</h3><p>查看日志log</p>
<p>release：线上端</p>
<p>debug：测试端</p>
<h3 id="Docker-1"><a href="#Docker-1" class="headerlink" title="Docker"></a>Docker</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看正在运行的容器</span></span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<h4 id="Docker-create｜创建容器"><a href="#Docker-create｜创建容器" class="headerlink" title="Docker create｜创建容器"></a>Docker create｜创建容器</h4><p>我们可以从任何镜像创建容器，包括您创建的自定义镜像。</p>
<p>输入以下命令</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create -p <span class="number">3000</span>:<span class="number">80</span> --name exampleApp3000 yoyomooc/exampleapp</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li>docker create命令用于创建一个新的镜像。</li>
<li><code>-p</code>参数告诉 Docker 如何在容器中映射端口 80到主机操作系统。我指定容器内的端口80映射到主机操作系统中的端口3000。这与Docker中的EXPOSE命令相对应。</li>
<li><code>--name</code> 参数为容器指定了一个名字，这样一来，一旦容器的已经创建了。本例中的名称是 <code>exampleApp3000</code>，表示这个容器将响应于请求发送至主机操作系统中的端口3000。</li>
<li>最后一个参数告诉Docker要使用哪个镜像作为新容器的模板。这个命令指定了<code>yoyomooc/exampleapp</code>镜像，这是docker build中使用的名称。</li>
</ul>
<h4 id="Docker-exec-进入交互"><a href="#Docker-exec-进入交互" class="headerlink" title="Docker exec|进入交互"></a>Docker exec|进入交互</h4><ul>
<li>**-d :**分离模式: 在后台运行</li>
<li>**-i :**即使没有附加也保持STDIN(标准输入：client–&gt;index) 打开</li>
<li>**-t :**分配一个伪终端</li>
</ul>
<p>docker -compose</p>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用ssh链接到服务器</span></span><br><span class="line">ssh username@ip</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看镜像</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看进程</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在容器中开启一个交互模式的终端</span></span><br><span class="line">docker exec -it 容器名|容器id /bin/bash(/bin/sh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除一个容器</span></span><br><span class="line">docker rm 容器名/容器id</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看容器的信息，tail查看后100行内容</span></span><br><span class="line">tail -<span class="number">100</span>f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看日志信息，tail查看后100行内容</span></span><br><span class="line">docker logs --tail <span class="number">100</span> -f 容器名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过ssh链接到服务器</span></span><br><span class="line">ssh username@ip -i /Users/edy/.ssh/id_rsa</span><br></pre></td></tr></table></figure>

<h3 id="异步函数"><a href="#异步函数" class="headerlink" title="异步函数"></a>异步函数</h3><ul>
<li>同步：是指完成事务的逻辑，先执行第一个事务，如果阻塞了，会一直等待，直到这个事务完成，再执行第二个事务，顺序执行</li>
<li> 异步：是和同步相对的，异步是指在处理调用这个事务的之后，不会等待这个事务的处理结果，直接处理第二个事务去了，通过状态、通知、回调来通知调用者处理结果</li>
</ul>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">fun</span>():</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    print(i)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">0.5</span>)</span><br><span class="line">print(<span class="string">&#x27;the task is over.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数+async=协程函数</span></span><br><span class="line"><span class="comment"># fun()并不会执行协程函数，只会生成一个协程对象，函数内部的code执行需要使用事件循环处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个实例化对象，调用run_util_complete的方法</span></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_util_complete(协程对象)</span><br><span class="line"><span class="comment"># 协程对象=协程函数+()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># await + 可等待的io对象（协程对象｜future｜task）</span></span><br></pre></td></tr></table></figure>

<h3 id="DB-index-join"><a href="#DB-index-join" class="headerlink" title="DB|index|join"></a>DB|index|join</h3><h3 id="路由｜api｜token｜om框架"><a href="#路由｜api｜token｜om框架" class="headerlink" title="路由｜api｜token｜om框架"></a>路由｜api｜token｜om框架</h3><h3 id="web框架【io】"><a href="#web框架【io】" class="headerlink" title="web框架【io】"></a>web框架【io】</h3><h3 id="redis进行缓存"><a href="#redis进行缓存" class="headerlink" title="redis进行缓存"></a>redis进行缓存</h3><h4 id="redis启动服务"><a href="#redis启动服务" class="headerlink" title="redis启动服务"></a>redis启动服务</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server</span><br></pre></td></tr></table></figure>

<h3 id="mongodb插入数据时进行校验"><a href="#mongodb插入数据时进行校验" class="headerlink" title="mongodb插入数据时进行校验"></a>mongodb插入数据时进行校验</h3><h3 id="keyword-【await】"><a href="#keyword-【await】" class="headerlink" title="keyword 【await】"></a>keyword 【await】</h3><h3 id="缺省参数｜缺省"><a href="#缺省参数｜缺省" class="headerlink" title="缺省参数｜缺省"></a>缺省参数｜缺省</h3><h3 id="mongog封装如何实现？｜语法的封装"><a href="#mongog封装如何实现？｜语法的封装" class="headerlink" title="mongog封装如何实现？｜语法的封装"></a>mongog封装如何实现？｜语法的封装</h3><h3 id="vi-修改host-wrapper"><a href="#vi-修改host-wrapper" class="headerlink" title="vi 修改host|wrapper"></a>vi 修改host|wrapper</h3><h3 id="python定时任务"><a href="#python定时任务" class="headerlink" title="python定时任务"></a>python定时任务</h3><h3 id="信息的传递"><a href="#信息的传递" class="headerlink" title="信息的传递"></a><strong>信息的传递</strong></h3><ul>
<li><p>企业微信：josn</p>
</li>
<li><p>微信：xml</p>
</li>
</ul>
<h3 id="python时间戳"><a href="#python时间戳" class="headerlink" title="python时间戳"></a>python时间戳</h3><h3 id="签名算法"><a href="#签名算法" class="headerlink" title="签名算法"></a>签名算法</h3><h2 id="Day2"><a href="#Day2" class="headerlink" title="Day2"></a>Day2</h2><h3 id="git基础"><a href="#git基础" class="headerlink" title="git基础"></a>git基础</h3><h4 id="逻辑模式"><a href="#逻辑模式" class="headerlink" title="逻辑模式"></a><strong>逻辑模式</strong></h4><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/blog-tian/p/14031285.html">photos</a></p>
<p>![image-20210803094748281](/Users/edy/Library/Application Support/typora-user-images/image-20210803094748281.png)</p>
<p>【working】 – 【index】 – 【master｜local repository】</p>
<p>工作区（本地dir）–add–index（缓存区）–commit – git repo｜local repo【在.git文件夹里】–push–remot repo【github】</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/hand-blog/p/13818563.html">git将文件存储的位置</a></p>
<h4 id="【创建｜查看用户】"><a href="#【创建｜查看用户】" class="headerlink" title="【创建｜查看用户】"></a>【创建｜查看用户】</h4><p><strong>查看邮箱｜名字</strong></p>
<p><strong>git config –global –list</strong></p>
<p><strong>【修改】</strong></p>
<p><strong>git config –global user.name “username”</strong></p>
<p> <strong>git config –global user.email “email”</strong></p>
<p><em>邮箱地址是本地git客户端的一个变量，不随git库而改变。而不同项目，设置的用户名和密码不同</em></p>
<hr>
<p><strong>git config user.name</strong></p>
<p><strong>git config user.password</strong></p>
<p><strong>git config user.email</strong></p>
<hr>
<p>git分为三个区，working directory–modify【add】–&gt;index「缓存区」–commit–&gt;改动的内容在local repository中生效，之后使用push到远程仓库中remote repository</p>
<h4 id="添加文件-夹｜撤销"><a href="#添加文件-夹｜撤销" class="headerlink" title="添加文件/夹｜撤销"></a><strong>添加文件/夹｜撤销</strong></h4><p><strong>【1.create new repository】</strong></p>
<pre><code>    git init | git init new_repo[sub dir]
</code></pre>
<hr>
<p><strong>【2.create new file】</strong></p>
<pre><code>    touch file_name

    [使用git status发现此时的file_name并没有被追踪]：git status可以查看branch和提交信息以及dir中的文件是否被追踪
</code></pre>
<hr>
<p>*<em>【3.git add . | <em>】</em></em></p>
<pre><code>    `只用dir中touch了一个file，才可以使用git add file，将文件追踪以备commit`

    使用git . ｜ *进行commit时默认提交所有【修改】和【未被追踪】的文件，添加到git system的index区（缓存区）⚠️并不包括【删除文件】
</code></pre>
<p>命令选项：</p>
<p><strong>-u</strong></p>
<p>表示将已跟踪文件中的修改和删除的文件添加到暂存区，不包括新增加的文件，注意这些被删除的文件被加入到暂存区再被提交并推送到服务器的版本库之后这个文件就会从git系统中消失了。</p>
<p><strong>-A</strong></p>
<p>-A 表示将所有的已跟踪的文件的修改与删除和新增的未跟踪的文件都添加到暂存区。</p>
<p>*<strong>.html</strong></p>
<p>添加某个文件类型到暂存区，比如所有的 <code>.html</code> 文件。</p>
<p><strong>index/</strong></p>
<p>添加整个文件夹到暂存区，比如根目录的 index 文件夹。</p>
<p><strong>index/index.html</strong></p>
<p>添加某个文件或者某个文件夹中的某个文件到暂存区 ，比如 index 下的 <code>index.html</code> 文件。</p>
<hr>
<p>【一些自动生成的，比如日志文件，或者编译过程中创建的临时文件等，不需要纳入 Git 的管理，在这种情况下，我们可以创建一个名为 .gitignore 的文件，来跳过上传。】</p>
<p><strong>【0取消｜撤销文件】</strong></p>
<p><strong>git reset HEAD file_name</strong></p>
<p>注意并不是在dir中del了file，而是将file从git库中删除，在working中依然存在，并且status变成了touch状态「untracked」</p>
<h4 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h4><p>【save changes（index） to the local repository <strong>[git</strong> **repository]**】</p>
<h4 id="【1-git-commit-m‘message’】"><a href="#【1-git-commit-m‘message’】" class="headerlink" title="【1.git commit -m‘message’】"></a>【1.git commit -m‘message’】</h4><p>commit to local repository with message[annontation]</p>
<p><strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qianqiannian/p/6005628.html">【git commit详细解读】</a></strong></p>
<p>当我们修改了很多文件，而不想每一个都add，想commit自动来提交本地修改，我们可以使用-a标识</p>
<p><code>git commit -a -m‘changed some files’</code></p>
<p>git commit 命令的-a选项可将所有<strong>被修改或者已删除的且已经被git管理的文档</strong>提交到仓库中。</p>
<p>千万注意，-a不会造成新文件被提交，只能修改。</p>
<h3 id="Project-address"><a href="#Project-address" class="headerlink" title="Project address"></a>Project address</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin + address</span><br><span class="line">address:</span><br><span class="line">git@gitlab.zidouchat.com:liuyuhao&#x2F;test.git</span><br></pre></td></tr></table></figure>

<h4 id="新建repo使用git"><a href="#新建repo使用git" class="headerlink" title="新建repo使用git"></a>新建repo使用git</h4><h5 id="Git-global-setup"><a href="#Git-global-setup" class="headerlink" title="Git global setup"></a>Git global setup</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;liuyuhao&quot;</span><br><span class="line">git config --global user.email &quot;liuyuhao@doodod.com&quot;</span><br></pre></td></tr></table></figure>

<h5 id="Create-a-new-repository"><a href="#Create-a-new-repository" class="headerlink" title="Create a new repository"></a>Create a new repository</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git clone git@gitlab.zidouchat.com:liuyuhao&#x2F;test.git</span><br><span class="line"></span><br><span class="line">cd repo_name</span><br><span class="line"></span><br><span class="line"># working创建</span><br><span class="line">touch README.md</span><br><span class="line"></span><br><span class="line"># 将file添加到index</span><br><span class="line">git add README.md</span><br><span class="line"></span><br><span class="line"># 将file转移到local repo</span><br><span class="line">git commit -m &quot;add README&quot;</span><br><span class="line"></span><br><span class="line"># push到remote repo</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<h5 id="Push-an-existing-folder"><a href="#Push-an-existing-folder" class="headerlink" title="Push an existing folder"></a>Push an existing folder</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd existing_folder</span><br><span class="line">git init</span><br><span class="line">git remote add origin git@gitlab.zidouchat.com:liuyuhao&#x2F;test.git</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;Initial commit&quot;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<h5 id="Push-an-existing-Git-repository"><a href="#Push-an-existing-Git-repository" class="headerlink" title="Push an existing Git repository"></a>Push an existing Git repository</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd existing_repo</span><br><span class="line">git remote rename origin old-origin</span><br><span class="line">git remote add origin git@gitlab.zidouchat.com:liuyuhao&#x2F;test.git</span><br><span class="line">git push -u origin --all</span><br><span class="line">git push -u origin --tags</span><br></pre></td></tr></table></figure>

<h3 id="Git-push报错"><a href="#Git-push报错" class="headerlink" title="Git push报错"></a>Git push报错</h3><h4 id="【origin报错】"><a href="#【origin报错】" class="headerlink" title="【origin报错】"></a><strong>【origin报错】</strong></h4><p>当使用Git进行代码push提交时，出现报错信息<code>“fatal: &#39;origin&#39; does not appear to be a git repository...”，</code></p>
<p><code>$ git push -u origin master</code><br><code>fatal: &#39;origin&#39; does not appear to be a git repository</code><br><code>fatal: Could not read from remote repository.</code></p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">是因为远程不存在origin这个仓库名称，可以使用如下操作方法，查看远程仓库名称以及路径相关信息，可以删除错误的远程仓库名称，重新添加新的远程仓库；</span><br><span class="line"></span><br><span class="line">git remote -v:查看远程仓库详细信息，可以看到仓库名称</span><br><span class="line"></span><br><span class="line">git remote remove orign:删除orign仓库（如果把origin拼写成orign，删除错误名称仓库）</span><br><span class="line"></span><br><span class="line">git remote add origin 仓库地址:重新添加远程仓库地址</span><br><span class="line"></span><br><span class="line">git push -u origin master:提交到远程仓库的master主干</span><br></pre></td></tr></table></figure>

<h4 id="【-rejected-master-gt-master-fetch-first-】"><a href="#【-rejected-master-gt-master-fetch-first-】" class="headerlink" title="【! [rejected] master -&gt; master (fetch first)】"></a>【! [rejected] master -&gt; master (fetch first)】</h4><p><strong>报错原因：</strong></p>
<p>remote repository与local repository在version方面不一样</p>
<p><strong>解决方法：</strong></p>
<p>【温柔型】</p>
<p>使用git pull将local与remote的version更新到一样</p>
<p>⚠️：local中的modify可能会被覆盖，最好使用git fetch（不会自动合并）</p>
<p>【暴力型】</p>
<p>git push -f</p>
<p>⚠️忽略版本不一致，将remote repo覆盖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">同步remote的master</span><br><span class="line">git pull origin master</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<h4 id="【-rejected-master-gt-master-pre-receive-hook-declined-】"><a href="#【-rejected-master-gt-master-pre-receive-hook-declined-】" class="headerlink" title="【! [rejected] master -&gt; master (pre-receive hook declined)】"></a>【! [rejected] master -&gt; master (pre-receive hook declined)】</h4><p><strong>【问题原因】</strong></p>
<p>git push上不去的原因在于push的分支权限为protected，只用管理员或者项目的管理员指派具有权限的人才可以操作</p>
<p><strong>【解决方法】</strong></p>
<p>1.将所要push的内容所在的分支protected全县关闭</p>
<ul>
<li>进入project的settings</li>
<li>点击protected branches，点击unprotected，将master分支权限关闭</li>
</ul>
<p>2.新建其他分支，将project push到新的分支上，在进行merge</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># create new branch</span><br><span class="line">git branch new_branch</span><br><span class="line"></span><br><span class="line"># exchange branch</span><br><span class="line">git checkout new_branch</span><br><span class="line"></span><br><span class="line"># push project</span><br><span class="line">git add .</span><br><span class="line">git commit -m &#39;push_mes&#39;</span><br><span class="line">git remote add origin repo_address</span><br><span class="line">git push -u origin new_branch</span><br></pre></td></tr></table></figure>

<h3 id="合并分支"><a href="#合并分支" class="headerlink" title="合并分支"></a>合并分支</h3><p>分支指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看已有的分支</span></span><br><span class="line">git branch -a</span><br><span class="line"><span class="comment"># 创建分支</span></span><br><span class="line">git branch newbranch</span><br><span class="line"><span class="comment"># 切换分支</span></span><br><span class="line">git checkout targetbranch</span><br><span class="line"><span class="comment"># 合并分支</span></span><br><span class="line">git checkout master</span><br><span class="line">git merge subbranch</span><br><span class="line"><span class="comment"># 删除分支</span></span><br><span class="line">git branch -D subbranch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程分支</span></span><br><span class="line">git push origin --delete [branch_name]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复误删分支</span></span><br><span class="line">git <span class="built_in">log</span> --查找分支号</span><br><span class="line">git branch delbranch分支号</span><br><span class="line"><span class="comment"># 查看分支图</span></span><br><span class="line">git <span class="built_in">log</span> --graph</span><br><span class="line"><span class="comment"># 重新命名分支</span></span><br><span class="line">git branch -m &lt;cur_branch&gt; &lt;new_branch&gt;</span><br></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42780289/article/details/97945300">【如何合并分支】</a></strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36672905/article/details/82776293"><strong>【分支的介绍】</strong></a></p>
<h3 id="DevOps"><a href="#DevOps" class="headerlink" title="DevOps"></a>DevOps</h3><p>DevOps(Development OPerations) 是一组过程｜方法｜系统｜的统称，用于促进开发（应用程序｜软件工程）、技术运营和质量保障部门之间的沟通、协作与整合</p>
<h3 id="Pip-报错"><a href="#Pip-报错" class="headerlink" title="Pip 报错"></a>Pip 报错</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">“”“</span><br><span class="line"><span class="number">0.</span>首先check在python <span class="built_in">dir</span>是否存在pip</span><br><span class="line">	which pythd on</span><br><span class="line">	cd /Library/Frameworks/Python.framework/Versions/<span class="number">3.6</span>/<span class="built_in">bin</span>/</span><br><span class="line">	ls</span><br><span class="line"><span class="number">1.</span>使用pip3｜pip2</span><br><span class="line"><span class="number">2.</span>sudo easy_install pip[python2.x]</span><br><span class="line">”“”</span><br></pre></td></tr></table></figure>

<h3 id="Docker-2"><a href="#Docker-2" class="headerlink" title="Docker"></a>Docker</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>docker是一个开源的应用容器引擎，可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。</p>
<p>容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。</p>
<p>Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。</p>
<p>Docker 容器通过 Docker 镜像来创建。</p>
<p>容器与镜像的关系类似于面向对象编程中的对象与类。</p>
<table>
<thead>
<tr>
<th align="center">Docker</th>
<th align="center">面向对象</th>
</tr>
</thead>
<tbody><tr>
<td align="center">容器</td>
<td align="center">对象</td>
</tr>
<tr>
<td align="center">镜像</td>
<td align="center">类</td>
</tr>
</tbody></table>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><h3 id="Flask框架"><a href="#Flask框架" class="headerlink" title="Flask框架"></a>Flask框架</h3><h4 id="什么是Flask框架"><a href="#什么是Flask框架" class="headerlink" title="什么是Flask框架"></a>什么是Flask框架</h4><p>Flask是一个用Python编写的Web应用程序框架。 它由 <strong>Armin Ronacher</strong> 开发，他领导一个名为Pocco的国际Python爱好者团队。 Flask基于Werkzeug WSGI工具包和Jinja2模板引擎。两者都是Pocco项目。</p>
<h4 id="WSGI"><a href="#WSGI" class="headerlink" title="WSGI"></a>WSGI</h4><p>Web Server Gateway Interface（Web服务器网关接口，WSGI）已被用作Python Web应用程序开发的标准。 WSGI是Web服务器和Web应用程序之间通用接口的规范。</p>
<h4 id="Werkzeug"><a href="#Werkzeug" class="headerlink" title="Werkzeug"></a>Werkzeug</h4><p>它是一个WSGI工具包，它实现了请求，响应对象和实用函数。 这使得能够在其上构建web框架。 Flask框架使用Werkzeug作为其基础之一。</p>
<h4 id="jinja2"><a href="#jinja2" class="headerlink" title="jinja2"></a>jinja2</h4><p>jinja2是Python的一个流行的模板引擎。Web模板系统将模板与特定数据源组合以呈现动态网页。</p>
<p>Flask通常被称为微框架。 它旨在保持应用程序的核心简单且可扩展。Flask没有用于数据库处理的内置抽象层，也没有形成验证支持。相反，Flask支持扩展以向应用程序添加此类功能。一些受欢迎的Flask扩展将在本教程后续章节进行讨论。</p>
<h2 id="Day1"><a href="#Day1" class="headerlink" title="Day1"></a>Day1</h2><h3 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h3><h4 id="紫豆助手-团小蜜"><a href="#紫豆助手-团小蜜" class="headerlink" title="紫豆助手|团小蜜"></a>紫豆助手|团小蜜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flask</span><br></pre></td></tr></table></figure>

<h3 id="venv"><a href="#venv" class="headerlink" title="venv"></a>venv</h3><h4 id="安装module"><a href="#安装module" class="headerlink" title="安装module"></a>安装module</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此命令需要管理员权限，在linux或macos</span></span><br><span class="line">sudo pip install virtualenv</span><br><span class="line">pip install virtualenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建新的虚拟环境-创建所需目录</span></span><br><span class="line">mkdir newvenv</span><br><span class="line">cd newvenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置环境</span></span><br><span class="line">virtualenv venv</span><br><span class="line"></span><br><span class="line"><span class="comment"># 激活linux|macos </span></span><br><span class="line">cd venv/<span class="built_in">bin</span></span><br><span class="line">source activate</span><br><span class="line"></span><br><span class="line"><span class="comment"># windows</span></span><br><span class="line">venv/scripts/activate</span><br></pre></td></tr></table></figure>

<h4 id="设置venv"><a href="#设置venv" class="headerlink" title="设置venv"></a><strong>设置venv</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m venv my_venv_name</span><br></pre></td></tr></table></figure>

<h4 id="激活venv"><a href="#激活venv" class="headerlink" title="激活venv"></a><strong>激活venv</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd + myvenv&#x2F;bin</span><br><span class="line">Source + activate</span><br></pre></td></tr></table></figure>

<h4 id="退出venv"><a href="#退出venv" class="headerlink" title="退出venv"></a>退出venv</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>

<h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ftl1012/p/ssh.html">【详细了解ssh】</a></p>
<p><strong>查看ssh</strong></p>
<p>进入ssh路径<code>cd ~/.ssh</code></p>
<p><strong>generate ssh</strong></p>
<p><code>ssh-keygen -t rsa -C&#39;email@email.com&#39;</code></p>
<p><strong>查看是否链接成功</strong></p>
<p><code>ssh -T git@email@email.com</code></p>
<p><strong>什么是ssh？</strong></p>
<p>·SSH是一种网络协议，用于计算机之间的加密登录</p>
<p>·SSH的默认端口是22，也就是说，你的登录请求会送进远程主机的22端口。使用p参数，可以修改这个端口。</p>
<p><strong>ssh配置完成后有一下文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Id_rsa: private key</span><br><span class="line">id_rsa.pub: public key</span><br><span class="line">know_hosts:ssh会把你每个你访问过计算机的公钥(public key)都记录在~&#x2F;.ssh&#x2F;known_hosts。当下次访问相同计算机时，OpenSSH会核对公钥。如果公钥不同，OpenSSH会发出警告， 避免你受到DNS Hijack之类的攻击。</span><br></pre></td></tr></table></figure>

<p><strong>【什么是know_hosts】</strong></p>
<h3 id="ssh登陆远程服务器"><a href="#ssh登陆远程服务器" class="headerlink" title="ssh登陆远程服务器"></a>ssh登陆远程服务器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 默认端口进入(22)</span><br><span class="line">ssh username@ip</span><br><span class="line"></span><br><span class="line"># 指定端口进入</span><br><span class="line">ssh -p port username@ip</span><br><span class="line"></span><br><span class="line"># 调用图像界面程序</span><br><span class="line">ssh -X username@ip</span><br></pre></td></tr></table></figure>

<h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p><strong>任务阅读</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/git/git-tutorial.html#:~:text=Git%20%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%95%8F%E6%8D%B7%E9%AB%98%E6%95%88%E5%9C%B0%E5%A4%84%E7%90%86%E4%BB%BB%E4%BD%95%E6%88%96%E5%B0%8F%E6%88%96%E5%A4%A7%E7%9A%84%E9%A1%B9%E7%9B%AE%E3%80%82%20Git%20%E6%98%AF%20Linus%20Torvalds%20%E4%B8%BA%E4%BA%86%E5%B8%AE%E5%8A%A9%E7%AE%A1%E7%90%86,Linux%20%E5%86%85%E6%A0%B8%E5%BC%80%E5%8F%91%E8%80%8C%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%80%E4%B8%AA%E5%BC%80%E6%94%BE%E6%BA%90%E7%A0%81%E7%9A%84%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E8%BD%AF%E4%BB%B6%E3%80%82%20Git%20%E4%B8%8E%E5%B8%B8%E7%94%A8%E7%9A%84%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%B7%A5%E5%85%B7%20CVS%2C%20Subversion%20%E7%AD%89%E4%B8%8D%E5%90%8C%EF%BC%8C%E5%AE%83%E9%87%87%E7%94%A8%E4%BA%86%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E5%BA%93%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%B8%8D%E5%BF%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E8%BD%AF%E4%BB%B6%E6%94%AF%E6%8C%81%E3%80%82">详细了解什么是git</a></p>
<p><strong>什么是git？</strong></p>
<p>Git 是一个开源的分布式版本控制系统，用于敏捷高效地处理任何或小或大的项目。</p>
<p>Git init：初始化git</p>
<h3 id="修改host"><a href="#修改host" class="headerlink" title="修改host"></a>修改host</h3><p>terminal中输入sudo vi /etc/hosts</p>
<p>1.输入本机密码后，打开hosts文件，键盘输入 i （插入），修改hosts文件后，按 esc 键退出,再按shift+：键，再输入w和q，保存退出</p>
<p>2.不保存退出，则按q和！键</p>
<h3 id="mongohub【数据库】"><a href="#mongohub【数据库】" class="headerlink" title="mongohub【数据库】"></a>mongohub【数据库】</h3><p><strong>参见阅读</strong></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/59753955">MongoDB 是什么 ? 为什么网页用它？</a></p>
<p>MongoDB 是一个基于分布式文件存储的数据库。由 C++ 语言编写。旨在为 WEB 应用提供可扩展的高性能数据存储解决方案。</p>
<p>MongoDB 是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。</p>
<h3 id="homebrew【包insatll】"><a href="#homebrew【包insatll】" class="headerlink" title="homebrew【包insatll】"></a>homebrew【包insatll】</h3><p>参见阅读<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/de6f1d2d37bf">Homebrew介绍和使用 </a></p>
<p>Homebrew是一款Mac OS平台下的软件包管理工具，拥有安装、卸载、更新、查看、搜索等很多实用的功能。简单的一条指令，就可以实现包管理，而不用你关心各种依赖和文件路径的情况，十分方便快捷。</p>
<h3 id="redis【数据库】"><a href="#redis【数据库】" class="headerlink" title="redis【数据库】"></a>redis【数据库】</h3><p>参见阅读<a target="_blank" rel="noopener" href="https://www.redis.com.cn/tutorial.html">Redis中文教程</a></p>
<p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字符串（strings） 散列（hashes）列表（lists） 集合（sets）有序集合（sorted sets）</span><br><span class="line">范围查询 bitmaps hyperloglogs</span><br><span class="line">地理空间（geospatial） 索引半径查询。</span><br><span class="line">Redis 内置了 复制（replication），LUA脚本（Lua scripting）， LRU驱动事件（LRU eviction），事务（transactions） 和不同级别的磁盘持久化（persistence）， 并通过 Redis哨兵（Sentinel）和自动分区（Cluster）提供高可用性（high availability）。</span><br></pre></td></tr></table></figure>

<h3 id="新拉的项目没有环境"><a href="#新拉的项目没有环境" class="headerlink" title="新拉的项目没有环境"></a>新拉的项目没有环境</h3><p>新拉的project没有对应的环境，也没有对应的terminal</p>
<p>1.首先先在setting中配置虚拟环境，增加新的环境venv</p>
<p>2.在全局路径中寻找requirements.txt文件，查看需要安装的包</p>
<p>3.在terminal中输入</p>
<p>pip install -r requirements.txt</p>
<h3 id="安装文件的使用"><a href="#安装文件的使用" class="headerlink" title="安装文件的使用"></a>安装文件的使用</h3><p>如果requirements.txt不再dir里</p>
<p>使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r config/requirements.txt</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://drinkle.top/2021/08/02/%E7%8B%AC%E5%88%B0%E7%A7%91%E6%8A%80/" data-id="ckrurzwfk0001wsf5hy7g1fe5" data-title="独到科技" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%8B%AC%E5%88%B0%E7%A7%91%E6%8A%80/" rel="tag">独到科技</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/825%E8%AE%A1%E5%88%92/" rel="tag">825计划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/" rel="tag">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BuiltIn/" rel="tag">BuiltIn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Daily-Plan/" rel="tag">Daily Plan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/" rel="tag">Data Structure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataBase/" rel="tag">DataBase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drink/" rel="tag">Drink</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English-Study/" rel="tag">English Study</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GoodNotes/" rel="tag">GoodNotes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeeCode/" rel="tag">LeeCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Object-Oriented/" rel="tag">Object Oriented</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Postgraduate/" rel="tag">Postgraduate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python%E5%90%8E%E7%AB%AF/" rel="tag">Python后端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spirit/" rel="tag">Spirit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/consciousness/" rel="tag">consciousness</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/" rel="tag">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/source-code/" rel="tag">source-code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%96%E7%95%8C%E8%A7%82/" rel="tag">世界观</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%96%E7%95%8C%E8%A7%82-%E6%96%B9%E6%B3%95%E8%AE%BA/" rel="tag">世界观 方法论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E8%B7%B5/" rel="tag">实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A6%E7%BF%BC%E5%90%8C%E7%9B%9F%E4%BC%9A/" rel="tag">左翼同盟会</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD/" rel="tag">新闻联播</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8B%AC%E5%88%B0%E7%A7%91%E6%8A%80/" rel="tag">独到科技</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%B4%E4%BD%A0%E7%9A%84%E4%B8%80%E5%B0%81%E4%BF%A1/" rel="tag">致你的一封信</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/825%E8%AE%A1%E5%88%92/" style="font-size: 13.33px;">825计划</a> <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/BuiltIn/" style="font-size: 10px;">BuiltIn</a> <a href="/tags/Daily-Plan/" style="font-size: 10px;">Daily Plan</a> <a href="/tags/Data-Structure/" style="font-size: 10px;">Data Structure</a> <a href="/tags/DataBase/" style="font-size: 10px;">DataBase</a> <a href="/tags/Drink/" style="font-size: 13.33px;">Drink</a> <a href="/tags/English-Study/" style="font-size: 20px;">English Study</a> <a href="/tags/GoodNotes/" style="font-size: 10px;">GoodNotes</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/LeeCode/" style="font-size: 10px;">LeeCode</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Object-Oriented/" style="font-size: 10px;">Object Oriented</a> <a href="/tags/Postgraduate/" style="font-size: 10px;">Postgraduate</a> <a href="/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/tags/Python%E5%90%8E%E7%AB%AF/" style="font-size: 10px;">Python后端</a> <a href="/tags/Spirit/" style="font-size: 10px;">Spirit</a> <a href="/tags/consciousness/" style="font-size: 10px;">consciousness</a> <a href="/tags/django/" style="font-size: 10px;">django</a> <a href="/tags/source-code/" style="font-size: 10px;">source-code</a> <a href="/tags/%E4%B8%96%E7%95%8C%E8%A7%82/" style="font-size: 13.33px;">世界观</a> <a href="/tags/%E4%B8%96%E7%95%8C%E8%A7%82-%E6%96%B9%E6%B3%95%E8%AE%BA/" style="font-size: 10px;">世界观 方法论</a> <a href="/tags/%E5%AE%9E%E8%B7%B5/" style="font-size: 10px;">实践</a> <a href="/tags/%E5%B7%A6%E7%BF%BC%E5%90%8C%E7%9B%9F%E4%BC%9A/" style="font-size: 10px;">左翼同盟会</a> <a href="/tags/%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD/" style="font-size: 10px;">新闻联播</a> <a href="/tags/%E7%8B%AC%E5%88%B0%E7%A7%91%E6%8A%80/" style="font-size: 10px;">独到科技</a> <a href="/tags/%E8%87%B4%E4%BD%A0%E7%9A%84%E4%B8%80%E5%B0%81%E4%BF%A1/" style="font-size: 10px;">致你的一封信</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/06/%E6%B5%81%E7%95%85%E7%9A%84python/">流畅的python</a>
          </li>
        
          <li>
            <a href="/2021/11/14/%E7%BB%8F%E6%B5%8E%E5%88%86%E6%9E%90-1/">经济分析[1]</a>
          </li>
        
          <li>
            <a href="/2021/11/14/%E6%96%B0%E9%97%BB%E8%81%94%E6%92%AD-2/">新闻联播[2]</a>
          </li>
        
          <li>
            <a href="/2021/10/07/Question/">Question</a>
          </li>
        
          <li>
            <a href="/2021/10/07/My-Project/">My-Project</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Drink<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>